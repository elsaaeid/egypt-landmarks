<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
	<meta name="format-detection" content="telephone=no" />
	<link rel="stylesheet" type="text/css" href="design.css"/>
	<title>krpano Documentation</title>
	<script>
		function toggle_mobile_nav(){var t=document,n=t.getElementById("krpano_contentnav"),m=t.getElementById("krpano_mobile_menu_bg");t=n.state!=2;n.state=t?2:1;n.style.height=t?"auto":"24px";m.style.display=t?"block":"none";t=t?"add":"remove";n.classList[t]("krpano_contentnav_opened");t+="EventListener";n[t]("click",toggle_mobile_nav,false);m[t]("mousedown",toggle_mobile_nav,false);}
	</script>
</head>
<body>
	<div id="krpano_root">
		<div id="krpano_headerwrapper">
			<div id="krpano_header">
				<div id="krpano_mainmenu">
					krpano 1.23.2 <span class="smallcomment">(build 2025-09-22)</span>
				</div>
			</div>
			<div id="krpano_imagebar"></div>
			
			<div id="krpano_logo_container">
				<a id="krpano_logo" href="https://krpano.com"><span>krpano.com</span></a>
			</div>
			
			<div id="krpano_imagebar_links">
				Documentation
			</div>
		</div>
		
		<div id="krpano_contentwrapper">
			<div id="krpano_mobile_menuicon" onclick="toggle_mobile_nav();"><span class="burgermenu"></span></div>
			<div id="krpano_mobile_menu_bg"></div>
			<div id="krpano_content">
				<div id="krpano_contentnav">
					
					<h2 class="sidemenu_title" onclick="toggle_section('doc_section');">Documentation</h2>
					<ul class="sidemenu_section " id="doc_section">
						<li><a href="embedpano.html#top">Embedding</a></li>
						<li><a href="xml.html#top">XML Reference</a>
							<ul>
								<li class="lisd"><a href="textfield.html#top">Textfield</a></li>
								<li class="lisd"><a href="plugins/scrollarea.html#top">ScrollArea</a></li>
							</ul>
						</li>
						<li><a href="actions.html#top">Actions / Scripting</a></li>
						<li><a href="js_api.html#top">Javascript Interface</a></li>
						<li><a href="localusage.html#top">Local / Offline Usage</a></li>
						<li><a href="coordinates.html#top">Coordinate Systems</a></li>
						<li><a href="../license.html#top">License Agreement</a></li>
						<li><a href="releasenotes.html#top">Release Notes</a></li>
					</ul>
					
					<h2 class="sidemenu_title" onclick="toggle_section('plugins_section');">Plugins</h2>
					<ul class="sidemenu_section hidden" id="plugins_section">
						<li><a href="plugins/bingmaps.html#top">Bing Maps</a></li>
						<li><a href="plugins/googlemaps.html#top">Google Maps</a></li>
						<li><a href="plugins/gyro2.html#top">Gyro2</a></li>
						<li><a href="plugins/krpanomaps.html#top">krpano Maps</a></li>
						<li><a href="plugins/postprocessing.html#top">Postprocessing</a></li>
						<li><a href="plugins/radar.html#top">Radar</a></li>
						<li><a href="plugins/snow.html#top">Snow / Rain</a></li>
						<li><a href="plugins/soundinterface.html#top">Soundinterface</a></li>
						<li><a href="plugins/threejs.html#top">ThreeJS</a></li>
						<li><a href="plugins/videoplayer.html#top">Videoplayer</a></li>
						<li><a href="plugins/webvr.html#top">WebVR</a></li>
					</ul>
					
					<h2 class="sidemenu_title" onclick="toggle_section('xmlext_section');">XML Extensions</h2>
					<ul class="sidemenu_section hidden" id="xmlext_section">
						<li><a href="plugins/xml_extensions.html#controls3d">controls3d.xml</a></li>
						<li><a href="plugins/xml_extensions.html#cursor3d">cursor3d.xml</a></li>
						<li><a href="plugins/combobox.html#top">combobox.xml</a></li>
						<li><a href="plugins/xml_extensions.html#contextmenu">contextmenu.xml</a></li>
						<li><a href="plugins/xml_extensions.html#copy_to_clipboard">copy_to_clipboard.xml</a></li>
						<li><a href="plugins/xml_extensions.html#drag3d">drag3d.xml</a></li>
						<li><a href="plugins/xml_extensions.html#measure3d">measure3d.xml</a></li>
						<li><a href="plugins/xml_extensions.html#fps">fps.xml</a></li>
						<li><a href="plugins/xml_extensions.html#ios_iframe_fullscreen">ios_iframe_fullscreen.xml</a></li>
						<li><a href="plugins/xml_extensions.html#iphone_fullscreen_swipe">iphone_fullscreen_swipe.xml</a></li>
						<li><a href="plugins/xml_extensions.html#minimap_zoomrect">minimap_zoomrect.xml</a></li>
						<li><a href="plugins/showtext.html#top">showtext.xml</a></li>
						<li><a href="plugins/xml_extensions.html#stateurls">stateurls.xml</a></li>
						<li><a href="plugins/xml_extensions.html#vr_and_anaglyph_buttons">vr_and_anaglyph_buttons.xml</a></li>
						<li><a href="plugins/xml_extensions.html#wakelock">wakelock.xml</a></li>
						<li><a href="plugins/xml_extensions.html#webvr">webvr.xml</a></li>
						<li><a href="plugins/xml_extensions.html#webvr_autozoom">webvr_autozoom.xml</a></li>
					</ul>
					
					<h2 class="sidemenu_title" onclick="toggle_section('tools_section');">Tools</h2>
					<ul class="sidemenu_section hidden" id="tools_section">
						<li><a href="tools/krpanotools.html#makepano">Makepano</a><br>
							<ul><li><a href="tools/config.html#top">Config File Reference</a></li></ul>
						</li>
						<li><a href="tools/krpanotools.html#maketiles">Maketiles</a></li>
						<li><a href="tools/krpanotools.html#makepreview">Makepreview</a></li>
						<li><a href="tools/krpanotools.html#spheretocube">SphereToCube</a></li>
						<li><a href="tools/krpanotools.html#cubetosphere">CubeToSphere</a></li>
						<li><a href="tools/krpanotools.html#protect">Protect Tool</a></li>
						<li><a href="tools/krpanotools.html#encrypt">Encrypt Tool</a></li>
						<li><a href="tools/krpanotools.html#register">Registration Tool</a></li>
						<li><a href="tools/testingserver.html#top">krpano Testing Server</a></li>
					</ul>
					
					<h2 class="sidemenu_title" onclick="toggle_section('examples_section');">Examples</h2>
					<ul class="sidemenu_section hidden" id="examples_section">
						<li><a href="examples.html#top">Show All</a></li>
						<li><a href="examples.html?vtour#top">Virtual Tours</a></li>
						<li><a href="examples.html?3d#top">3D Examples</a></li>
						<li><a href="examples.html?splats#top">Gaussian Splatting</a></li>
						<li><a href="examples.html?depthmap#top">Depthmap</a></li>
						<li><a href="examples.html?threejs#top">ThreeJS</a></li>
						<li><a href="examples.html?multires#top">Multiresolution</a></li>
						<li><a href="examples.html?layers#top">Layers</a></li>
						<li><a href="examples.html?plugins#top">Plugins</a></li>
						<li><a href="examples.html?hotspots#top">Hotspots</a></li>
						<li><a href="examples.html?maps#top">Maps</a></li>
						<li><a href="examples.html?video#top">Video</a></li>
						<li><a href="examples.html?webvr#top">WebVR</a></li>
						<li><a href="examples.html?js#top">Javascript</a></li>
					</ul>
				</div>
				<a name="top" class="toplink">&nbsp;</a>
				<div id="krpano_contenttext">

					<noscript>
						<table style="width:100%; height:400px; position:fixed; left:95px; top:220px;"><tr valign="middle"><td><center><h1>
							<span style="color:#FFFFFF; background:#FF0000; padding:15px;">
								Javascript must be activated for this page!
							</span>
						</h1></center></td></tr></table>
					</noscript>
					
					<script>
						function toggle_section(id)
						{
							var element = document.getElementById(id);
							if (element)
							{
								element.classList.toggle("hidden")
							}
						}
					</script>

					

<h1>krpano Actions / Scripting Reference
	
</h1>

<script type="text/javascript">
//<![CDATA[

function toggleexample(elementid,forcestate)
{
	var element = document.getElementById(elementid);

	var curstyle = "";

	if (window.getComputedStyle == undefined)
		curstyle = element.currentStyle.display;
	else
		curstyle = window.getComputedStyle(element, null).display;

	element.style.display = curstyle == "none" || forcestate === true ? "inline" : "none";
}

//]]>
</script>

<div class="paragraph">
	krpano has a small and simple dynamic scripting language.
	With it krpano can be customized in many ways.
	A command or function is called 'action' in krpano.
	It's possible to use existing actions and also to define new ones.
	The scripting language is dynamic and untyped by default, only
	some predefined variables are typed, but that is normally not relevant because inside the
	scripts all type conversions will be done automatically.
</div>


<h2><a href="#aboutthisdoc" name="aboutthisdoc" class="selflink">About this documentation</a></h2>

<div class="paragraph">
	This documentation is about global krpano variables and objects, about the actions calling syntax and about all pre-defined krpano actions / functions.<br>
	<br>
	Documentation topics:
	<ul>
		<li class="uldd"><a href="#globalvarsreference">Global-Variables Reference</a></li>
		<li class="uldd"><a href="#actionsreference">Actions / Functions Reference</a></li>
		<li class="uldd"><a href="#syntaxandusage">Syntax and Usage</a></li>
		<li class="uldd"><a href="#expressions">Expressions</a> / <a href="#expression.functions">Functions</a></li>
		<li class="uldd"><a href="#arrays">Arrays</a></li>
	</ul>
	<br>
	For the documentation about the static xml code and object attributes have a look at the:<br>
	<div class="ico_nextlink"></div> <a href="xml.html#top">krpano XML Reference </a>
</div>



<br>
<h2><a href="#globalvarsreference" name="globalvarsreference" class="selflink">krpano Global-Variables Reference</a></h2>

Version / Build information
<ul>
	<li><a href="#version">version</a></li>
	<li><a href="#xmlversion">xmlversion</a></li>
	<li><a href="#build">build</a></li>
</ul>

Screen information / settings
<ul>
	<li><a href="#fullscreen">fullscreen</a></li>
	<li><a href="#stagewidth">stagewidth / stageheight</a></li>
	<li><a href="#stagescale">stagescale</a></li>
	<li><a href="xml.html#display.viewerwidth">display.viewerwidth</a> / <a href="xml.html#display.viewerheight">viewerheight</a></li>
	<li><a href="xml.html#display.windowwidth">display.windowwidth</a> / <a href="xml.html#display.windowheight">windowheight</a></li>
	<li><a href="xml.html#display.screenwidth">display.screenwidth</a> / <a href="xml.html#display.screenheight">screenheight</a></li>
	<li><a href="xml.html#krpano.bgcolor">bgcolor</a></li>
</ul>


Language / translation settings
<ul>
	<li><a href="xml.html#language">language</a></li>
	<li><a href="xml.html#defaultlanguage">defaultlanguage</a></li>
	<li><a href="xml.html#systemlanguage">systemlanguage</a></li>
</ul>

Device informations
<ul>
	<li><a href="#browser.useragent">browser.useragent</a></li>
	<li><a href="#browser.platform">browser.platform</a></li>
	<li><a href="#browser.location">browser.location</a></li>
	<li><a href="#browser.domain">browser.domain</a></li>
	<li><a href="#browser.protocol">browser.protocol</a></li>
	<li><a href="#device.desktop">device.desktop</a></li>
	<li><a href="#device.normal">device.normal</a></li>
	<li><a href="#device.tablet">device.tablet</a></li>
	<li><a href="#device.mobile">device.mobile</a></li>
	<li><a href="#device.mobilevr">device.mobilevr</a></li>
	<li><a href="#device.css3d">device.css3d</a></li>
	<li><a href="#device.webgl">device.webgl</a></li>
	<li><a href="#device.webgl2">device.webgl2</a></li>
	<li><a href="#device.multiressupport">device.multiressupport</a></li>
	<li><a href="#device.panovideosupport">device.panovideosupport</a></li>
	<li><a href="#device.fullscreensupport">device.fullscreensupport</a></li>
	<li><a href="#device.depthmapsupport">device.depthmapsupport</a></li>
	<li><a href="#device.pixelratio">device.pixelratio</a></li>
	<li><a href="#device.fractionalscaling">device.fractionalscaling</a></li>
	<li><a href="#device.maxtexturesize">device.maxtexturesize</a></li>
	<li><a href="#device.mouse">device.mouse</a></li>
	<li><a href="#device.touch">device.touch</a></li>
	<li><a href="#device.istouchevent">device.istouchevent</a></li>
	<li><a href="#device.ios">device.ios</a></li>
	<li><a href="#device.iosversion">device.iosversion</a></li>
	<li><a href="#device.iosdesktop">device.iosdesktop</a></li>
	<li><a href="#device.iphone">device.iphone</a></li>
	<li><a href="#device.ipad">device.ipad</a></li>
	<li><a href="#device.applevision">device.applevision</a></li>
	<li><a href="#device.android">device.android</a></li>
	<li><a href="#device.androidversion">device.androidversion</a></li>
	<li><a href="#device.chrome">device.chrome</a></li>
	<li><a href="#device.chromeversion">device.chromeversion</a></li>
	<li><a href="#device.firefox">device.firefox</a></li>
	<li><a href="#device.firefoxversion">device.firefoxversion</a></li>
	<li><a href="#device.ie">device.ie</a></li>
	<li><a href="#device.ieversion">device.ieversion</a></li>
	<li><a href="#device.edge">device.edge</a></li>
	<li><a href="#device.newedge">device.newedge</a></li>
	<li><a href="#device.safari">device.safari</a></li>
	<li><a href="#device.safariversion">device.safariversion</a></li>
	<li><a href="#device.iframe">device.iframe</a></li>
	<li><a href="#device.windows">device.windows</a></li>
	<li><a href="#device.mac">device.mac</a></li>
	<li><a href="#device.linux">device.linux</a></li>
</ul>

Mouse / Keyboard / Touch-Gestures
<ul>
	<li><a href="#mouse.button">mouse.button</a></li>
	<li><a href="#mouse.leftbutton">mouse.leftbutton</a> / <a href="#mouse.middlebutton">mouse.middlebutton</a> / <a href="#mouse.rightbutton">mouse.rightbutton</a></li>
	<li><a href="#mouse.altkey">mouse.altkey</a> / <a href="#mouse.ctrlkey">mouse.ctrlkey</a> / <a href="#mouse.shiftkey">mouse.shiftkey</a> / <a href="#mouse.cmdkey">mouse.cmdkey</a></li>
	<li><a href="#mouse.x">mouse.x / mouse.y</a></li>
	<li><a href="#mouse.dx">mouse.dx / mouse.dy</a></li>
	<li><a href="#mouse.stagex">mouse.stagex / mouse.stagey</a></li>
	<li><a href="#mouse.screenx">mouse.screenx / mouse.screeny</a></li>
	<li><a href="#mouse.downx">mouse.downx / mouse.downy</a></li>
	<li><a href="#mouse.clickx">mouse.clickx / mouse.clicky</a></li>
	
	<li><a href="#keycode">keycode</a> / <a href="#keyboard.keycode">keyboard.keycode</a></li>
	<li><a href="#keyboard.keyname">keyboard.keyname</a></li>
	<li><a href="#keyboard.physicalkey">keyboard.physicalkey</a></li>
	<li><a href="#keyboard.pressed">keyboard.pressed</a> / <a href="#keyboard.pressed">keyboard.pressedphysical</a></li>
	<li><a href="#keyboard.alt">keyboard.alt</a> / <a href="#keyboard.ctrl">keyboard.ctrl</a> / <a href="#keyboard.shift">keyboard.shift</a> / <a href="#keyboard.cmd">keyboard.cmd</a></li>
	
	<li><a href="#wheeldelta">wheeldelta</a></li>
	<li><a href="#wheeldelta_raw">wheeldelta_raw</a></li>
	<li><a href="#wheeldelta_touchscale">wheeldelta_touchscale</a></li>
	
	<li><a href="#gesture.event">gesture.event</a></li>
	<li><a href="#gesture.scale">gesture.scale</a></li>
	<li><a href="#gesture.deltascale">gesture.deltascale</a></li>
	<li><a href="#gesture.rotation">gesture.rotation</a></li>
	<li><a href="#gesture.deltarotation">gesture.deltarotation</a></li>
	<li><a href="#gesture.centerx">gesture.centerx / gesture.centery</a></li>
	<li><a href="#gesture.dx">gesture.dx / gesture.dy</a></li>
	<li><a href="#gesture.dt">gesture.dt</a></li>
	<li><a href="#gesture.touches">gesture.touches</a></li>
</ul>

Timing / Interactions / Random values
<ul>
	<li><a href="xml.html#krpano.idletime">idletime</a></li>
	<li><a href="#timertick">timertick</a></li>
	<li><a href="#lastuserinteraction">lastuserinteraction</a></li>
	<li><a href="#lastviewinteraction">lastviewinteraction</a></li>
	<li><a href="#isidle">isidle</a></li>
	<li><a href="#blendtime">blendtime</a></li>
	<li><a href="#random">random</a></li>
</ul>

State variables
<ul>
	<li><a href="xml.html#image.loadstate">image.loadstate</a></li>
	<li><a href="#have3dtransition">have3dtransition</a></li>
</ul>

Math constants
<ul>
	<li><a href="#math.pi">Math.PI</a></li>
</ul>

Keyboard / Button moving
<ul>
	<li><a href="#hlookat_moveforce">hlookat_moveforce</a></li>
	<li><a href="#vlookat_moveforce">vlookat_moveforce</a></li>
	<li><a href="#fov_moveforce">fov_moveforce</a></li>
</ul>

Multiresolution information
<ul>
	<li><a href="#multireslevel">multireslevel</a></li>
	<li><a href="#lockmultireslevel">lockmultireslevel</a></li>
	<li><a href="#downloadlockedlevel">downloadlockedlevel</a></li>
</ul>

Loading information
<ul>
	<li><a href="#progress.progress">progress.progress</a></li>
	<li><a href="#network.viewerpath">network.viewerpath</a></li>
	<li><a href="#network.htmlpath">network.htmlpath</a></li>
	<li><a href="#network.firstxmlpath">network.firstxmlpath</a></li>
	<li><a href="#network.currentxmlpath">network.currentxmlpath</a></li>
</ul>

XML / Scene
<ul>
	<li><a href="#xml.url">xml.url</a></li>
	<li><a href="#xml.content">xml.content</a></li>
	<li><a href="#xml.fileurl">xml.fileurl</a></li>
	<li><a href="#xml.filecontent">xml.filecontent</a></li>
	<li><a href="#xml.scene">xml.scene</a></li>
	<li><a href="#xml.sceneindex">xml.sceneindex</a></li>
	<li><a href="#xml.view">xml.view</a></li>
</ul>


Layers / Hotspots
<ul>
	<li><a href="xml.html#layer.count">layer.count</a></li>
	<li><a href="xml.html#hotspot.count">hotspot.count</a></li>
	<li><a href="#hoveringelement">hoveringelement</a></li>
	<li><a href="#pressedelement">pressedelement</a></li>
</ul>

Programming / Debugging / Error handling
<ul>
	<li><a href="#global">global</a></li>
	<li><a href="#local">local</a></li>
	<li><a href="xml.html#krpano.strict">strict</a></li>
	<li><a href="xml.html#krpano.logkey">logkey</a></li>
	<li><a href="xml.html#krpano.debugmode">debugmode</a></li>
	<li><a href="xml.html#krpano.debugkeys">debugkeys</a></li>
	<li><a href="xml.html#krpano.debugjsactions">debugjsactions</a></li>
	<li><a href="xml.html#krpano.debugjsplugins">debugjsplugins</a></li>
	<li><a href="xml.html#krpano.deprecatedwarnings">deprecatedwarnings</a></li>
	<li><a href="xml.html#krpano.showerrors">showerrors</a></li>
	<li><a href="#lasterror">lasterror</a></li>
	<li><a href="#embeddingparameters">embeddingparameters</a></li>
	<li><a href="#functions">functions</a></li>
	<li><a href="#actions.actioncaller">actions.actioncaller</a></li>
	<li><a href="#actions.calldata">actions.calldata</a></li>
</ul>


<br>
<br>
<h2><a href="#actionsreference" name="actionsreference" class="selflink">krpano Actions / Functions Reference</a></h2>


Programming logic / Flow control
<ul>
	<li><a href="#def">def</a></li>
	<li><a href="#set">set</a></li>
	<li><a href="#get">get</a></li>
	<li><a href="#calc">calc</a></li>
	<li><a href="#copy">copy</a></li>
	<li><a href="#swapvars">swapvars</a></li>
	<li><a href="#delete">delete</a></li>
	<li><a href="#if">if</a></li>
	<li><a href="#delayedcall">delayedcall</a></li>
	<li><a href="#stopdelayedcall">stopdelayedcall</a></li>
	<li><a href="#nexttick">nexttick</a></li>
	<li><a href="#callwhen">callwhen</a></li>
	<li><a href="#stopcallwhen">stopcallwhen</a></li>
	<li><a href="#for">for</a></li>
	<li><a href="#forall">forall</a></li>
	
	<li><a href="#loop">loop</a></li>
	<li><a href="#asyncloop">asyncloop</a></li>
	<li><a href="#renderloop">renderloop</a></li>
	<li><a href="#stoprenderloop">stoprenderloop</a></li>
	<li><a href="#setinterval">setinterval</a></li>
	<li><a href="#clearinterval">clearinterval</a></li>
	<li><a href="#toggle">toggle</a></li>
	<li><a href="#switch">switch</a></li>
	
	<li><a href="#break">break</a></li>
	<li><a href="#exitcall">exitcall</a></li>
	<li><a href="#callwith">callwith</a></li>
	<li><a href="#scope">scope</a></li>
	<li><a href="#parentscopeset">parentscopeset</a></li>
	<li><a href="#linkeventscope">linkeventscope</a></li>
	<li><a href="#assignstyle">assignstyle</a></li>
	<li><a href="#copyattributes">copyattributes</a></li>
	<li><a href="#focus">focus</a></li>
	<li><a href="#releasefocus">releasefocus</a></li>
</ul>

Events
<ul>
	<li><a href="#events.add">events.add</a></li>
	<li><a href="#events.remove">events.remove</a></li>
	<li><a href="#events.once">events.once</a></li>
	<li><a href="#events.dispatch">events.dispatch</a></li>
</ul>

Reactive Programming
<ul>
	<li><a href="#link">link</a></li>
	<li><a href="#unlink">unlink</a></li>
	<li><a href="#updatelink">updatelink</a></li>
	<li><a href="#onchange">onchange</a></li>
	<li><a href="#removeonchange">removeonchange</a></li>
	<li><a href="#linkstyle">linkstyle</a></li>
</ul>
	
Math operators and functions
<ul>
	<li><a href="#add">add</a></li>
	<li><a href="#sub">sub</a></li>
	<li><a href="#mul">mul</a></li>
	<li><a href="#div">div</a></li>
	<li><a href="#mod">mod</a></li>
	<li><a href="#pow">pow</a></li>
	<li><a href="#inc">inc</a></li>
	<li><a href="#dec">dec</a></li>
	<li><a href="#clamp">clamp</a></li>
	
	<li><a href="#math.abs">Math.abs</a></li>
	<li><a href="#math.acos">Math.acos</a></li>
	<li><a href="#math.asin">Math.asin</a></li>
	<li><a href="#math.atan">Math.atan</a></li>
	<li><a href="#math.atan2">Math.atan2</a></li>
	<li><a href="#math.ceil">Math.ceil</a></li>
	<li><a href="#math.cos">Math.cos</a></li>
	<li><a href="#math.exp">Math.exp</a></li>
	<li><a href="#math.floor">Math.floor</a></li>
	<li><a href="#math.log">Math.log</a></li>
	<li><a href="#math.max">Math.max</a></li>
	<li><a href="#math.min">Math.min</a></li>
	<li><a href="#math.pow">Math.pow</a></li>
	<li><a href="#math.round">Math.round</a></li>
	<li><a href="#math.sin">Math.sin</a></li>
	<li><a href="#math.sqrt">Math.sqrt</a></li>
	<li><a href="#math.tan">Math.tan</a></li>
</ul>

Number / String formating
<ul>
	<li><a href="#roundval">roundval</a></li>
	<li><a href="#tohex">tohex</a></li>
	<li><a href="#tolower">tolower</a></li>
	<li><a href="#toupper">toupper</a></li>
	<li><a href="#txtadd">txtadd</a></li>
	<li><a href="#subtxt">subtxt</a></li>
	<li><a href="#indexoftxt">indexoftxt</a></li>
	<li><a href="#txtreplace">txtreplace</a></li>
	<li><a href="#txtsplit">txtsplit</a></li>
	<li><a href="#txtjoin">txtjoin</a></li>
	<li><a href="#fromcharcode">fromcharcode</a></li>
	<li><a href="#escape">escape</a></li>
	<li><a href="#unscape">unscape</a></li>
</ul>

Animations / Animated value changing
<ul>
	<li><a href="#tween">tween</a></li>
	<li><a href="#stoptween">stoptween</a></li>
	<li><a href="#tweentypes">tween types</a></li>
</ul>

Dynamic loading of other panos / tours
<ul>
	<li><a href="#set3dtransition">set3dtransition</a></li>
	<li><a href="#loadpano">loadpano</a></li>
	<li><a href="#loadscene">loadscene</a></li>
	<li><a href="#loadpanoscene">loadpanoscene</a></li>
	<li><a href="#loadpanoimage">loadpanoimage</a> &amp; <a href="#image.reset">image.reset</a></li>
	<li><a href="#loadxml">loadxml</a></li>
	<li><a href="#reloadpano">reloadpano</a></li>
	<li><a href="#includexml">includexml</a></li>
	<li><a href="#includexmlstring">includexmlstring</a></li>
	<li><a href="#loadjs">loadjs</a></li>
	<li><a href="#openurl">openurl</a></li>
</ul>

Viewing animations / Camera control
<ul>
	<li><a href="#lookat">lookat</a> / <a href="#lookat3d">lookat3d</a></li>
	<li><a href="#lookto">lookto</a> / <a href="#lookto3d">lookto3d</a></li>
	<li><a href="#looktohotspot">looktohotspot</a></li>
	<li><a href="#moveto">moveto</a></li>
	<li><a href="#zoomto">zoomto</a></li>
	<li><a href="#adjusthlookat">adjusthlookat</a></li>
	<li><a href="#adjust360">adjust360</a></li>
	<li><a href="#getlooktodistance">getlooktodistance</a></li>
	<li><a href="#stoplookto">stoplookto</a></li>
	<li><a href="#stopmovements">stopmovements</a></li>
	<li><a href="#wait">wait</a></li>
	<li><a href="#oninterrupt">oninterrupt</a></li>
</ul>

Automatic rotation
<ul>
	<li><a href="xml.html#autorotate.start">autorotate.start</a></li>
	<li><a href="xml.html#autorotate.stop">autorotate.stop</a></li>
	<li><a href="xml.html#autorotate.interrupt">autorotate.interrupt</a></li>
	<li><a href="xml.html#autorotate.pause">autorotate.pause</a></li>
	<li><a href="xml.html#autorotate.resume">autorotate.resume</a></li>
</ul>

Coordinate transformation
<ul>
	<li><a href="#screentosphere">screentosphere</a></li>
	<li><a href="#spheretoscreen">spheretoscreen</a></li>
	
	<li><a href="#screentolayer">screentolayer</a></li>
	<li><a href="#layertoscreen">layertoscreen</a></li>
	
	<li><a href="#spheretospace">spheretospace</a></li>
	<li><a href="#spacetosphere">spacetosphere</a></li>
	
	<li><a href="#remapfovtype">remapfovtype</a></li>
</ul>

Depthmap / 3D-Model information
<ul>
	<li><a href="#screenraycast">screenraycast</a></li>
	<li><a href="#cursorraycast">cursorraycast</a></li>
	<li><a href="#raycast">raycast</a></li>
</ul>



Request updates
<ul>
	<li><a href="#updateobject">updateobject</a></li>
	<li><a href="#invalidatescreen">invalidatescreen</a></li>
	<li><a href="xml.html#display.requestresize">display.requestresize</a></li>
	<li><a href="xml.html#display.layout.update">display.layout.update</a></li>
</ul>

Dynamic adding or removing of screen elements
<ul>
	<li><a href="#addlayer">addlayer</a> / <a href="#addplugin">addplugin</a></li>
	<li><a href="#removelayer">removelayer</a> / <a href="#removeplugin">removeplugin</a></li>
	<li><a href="#addhotspot">addhotspot</a></li>
	<li><a href="#removehotspot">removehotspot</a></li>
	
</ul>

Layer / Hotspot Actions
<ul>
	<li>layer / hotspot[name].<a href="xml.html#addevent">addevent(eventname, eventcode)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#removeevent">removeevent(eventname, eventcode)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.triggerevent">triggerevent(eventname)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.loadstyle">loadstyle(styles)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.linkstyle">linkstyle(styles)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.registercontentsize">registercontentsize(imagewidth, imageheight)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.resetsize">resetsize()</a></li>
	
	<li>layer / hotspot[name].<a href="xml.html#layer.changealign">changealign(align, edge)</a></li>
	
	<li>layer / hotspot[name].<a href="xml.html#layer.remove">remove(<span class="optargs">removechildren</span>)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.getchildzorder">getchildzorder(<span class="optargs">"min" or "max"</span>)</a></li>
	<li>layer / hotspot[name].<a href="xml.html#layer.getxml">getxml(<span class="optargs">settings</span>)</a></li>
	<li>hotspot[name].<a href="xml.html#hotspot.getcenter">getcenter()</a></li>
	<li>hotspot[name].<a href="xml.html#hotspot.getnormalvec">getnormalvec()</a></li>
	
</ul>

Javascript Interfaces <span class="smallcomment">(krpano to Javascript calls)</span>
<ul>
	<li><a href="#js">js</a></li>
	<li><a href="#jscall">jscall</a></li>
	<li><a href="#jsget">jsget</a></li>
	<li><a href="#jscode">js:code</a></li>
</ul>

HTML/CSS Interfaces
<ul>
	<li><a href="#addcssstyles">addcssstyles</a></li>
</ul>

Debugging
<ul>
	<li><a href="#showlog">showlog</a></li>
	<li><a href="#debugvar">debugvar</a></li>
	<li><a href="#debug">debug</a></li>
	<li><a href="#trace">trace</a></li>
	<li><a href="#warning">warning</a></li>
	<li><a href="#error">error</a></li>
	<li><a href="#fatalerror">fatalerror</a></li>
	<li><a href="#suppresserrors">suppresserrors</a></li>
</ul>



<br>
<br>
<div class="paragraph">
<h2><a href="#syntaxandusage" name="syntaxandusage" class="selflink">Syntax and Usage</a></h2>

<div class="xmlnodedesc">
	
<div class="xmlnodetext">
	<a href="#syntaxandusage" class="selflink">Basic syntax</a>
	<ul>
		<li>The krpano action code is a list of commands.</li>
		<li>Each command needs to terminated with a semicolon at the end, except for the last one, there the semicolon is optional.</li>
		<li>Whitespace characters or line-breaks between commands are ignored.</li>
		<li>
			Example:
			<pre class="presyntax">command1; command2;<br>command3;<br>...</pre>
		</li>
		<li>A command can be either a variable assignment:
			<pre class="presyntax">variable=<a href="#expressions" class="selflink2">expression</a>;</pre>
			or an action call:
			<pre class="presyntax"><a href="#actioncalls" class="selflink2">action</a>(parameters);</pre>
		</li>
	</ul>
	
	<br>
	<a name="variableassignments" href="#variableassignments" class="selflink">Variable assignments</a>
	<ul>
		<li>Syntax:
			<pre class="presyntax">variable=<a href="#expressions" class="selflink2">expression</a>;</pre>
		</li>
		<li>With variable assignments new variables can be created or the value of exiting variables be changed.</li>
		<li>The expression can be either a simple value or another variable or a more complex <a href="#expressions">expression</a>.</li>
		<li>These assignment operators are available: 
			<ul>
				<li><span class="pre">=</span> - just set/copy the value.</li>
				<li><span class="pre">+=</span> - add the value.</li>
				<li><span class="pre">-=</span> - subtract the value.</li>
				<li><span class="pre">*=</span> - multiply the variable by the given value.</li>
				<li><span class="pre">/=</span> - divide the variable by the given value.</li>
			</ul>
		</li>
		<li>Examples:
			<pre>a = 1 + 2;  // a will be 3<br>b = a + 3;  // b will be 6<br>trace(b);   // output '6'<br>b *= 2;<br>trace(b);   // output '12'</pre>
			<pre>str = "Hello: " + name;</pre>
			<pre>str = "hlookat=" + roundval(view.hlookat, 2);</pre>
		</li>
	</ul>
	
	<br>
	<a name="actioncalls" href="#actioncalls" class="selflink">Action calls</a>
	<ul>
		<li>Syntax:
			<pre class="pre" style="white-space: nowrap;">action(parameters);<br>
				action(parameter1, parameter2, parameter3);<br>
				action(<a href="#get" class="selflink2">get</a>(variable)); &nbsp;<span class="smallcomment">or</span>&nbsp; action(*variable);<br>
				action(<a href="#calc" class="selflink2">calc</a>(<a href="#expressions" class="selflink2">expression</a>)); &nbsp;<span class="smallcomment">or</span>&nbsp; action((<a href="#expressions" class="selflink2">expression</a>));<br>
				action('a quoted text, can contain commas');<br>
			</pre>
		</li>
		<li class="uldd">
			Where 'action' can be either:
			<ul>
				<li>the name of a built-in krpano <a href="#actionsreference" class="selflink">action</a>,</li>
				<li>the name of an <a href="xml.html#action" class="selflink">&lt;action&gt;</a> element,</li>
				<li>the name of a variable that contains krpano action code or</li>
				<li>the name of a variable that refers to a Javascript function.</li>
			</ul>
		</li>
		
		<li class="uldd">
			When passing more than one parameter, then the parameters need to be separated by commas.
		</li>
		
		<li class="uldd">
			Whitespace characters (like space, tab, new-lines) between parameters are ignored.
		</li>
		
		<li class="uldd">
			Parameter value passing:<br>
			<ul>
				<li>The parameters will be passed as they are written as text to the action.</li>
				<li>When a parameter is a variable, then only the name of the variable will be passed - but not the value of the variable!</li>
				<li>To pass the value of a variable <a href="#get" class="selflink2 pre">get(variable)</a> or <a href="#get" class="selflink2 pre">*variable</a> need to be used.</li>
				<li>To pass more complex expressions <a href="#expressions" class="selflink2 pre">calc(expression)</a> or just <a href="#expressions" class="selflink2 pre">(expression)</a> can to be used as parameter.</li>
				<li>Note - some actions might resolve variables automatically to their value!</li>
			</ul>
		</li>
		
		<li class="uldd">
			To be able to use whitespace characters and commas inside a parameter value, the parameter must be enclosed by 
			single <span class="presyntax_inline">'</span> or double quotes <span class="presyntax_inline">"</span>.
		</li>
	</ul>
	
	<br>
	<a name="comments" href="#comments" class="selflink">Comments</a>
	<ul>
		<li>Syntax:
			<pre class="pre" style="white-space: nowrap;">action(parameters);<br>
				action(parameters);	<span class="codecomment">// this is a single-line comment</span><br>
				action(parameters);<br>
				<span class="codecomment">/* a multi-line comment<br> 
				action(parameters);	*/</span><br>
				action(parameters);<br>
				<span class="codecomment">&lt;!-- a xml comment<br> 
				action(parameters);	--&gt;</span><br>
				action(parameters);	
			</pre>
		</li>
		<li>There a single-line comments, starting from <span class="pre">//</span> to the next line-break.</li>
		<li>Multi-line comments from <span class="pre">/*</span> to <span class="pre">*/</span>.</li>
		<li>And xml-comments from <span class="pre">&lt;!--</span> to <span class="pre">--&gt;</span>.
			These comments work only when the related code was defined in a xml file, 
			there they will get stripped away already during the xml-parsing.
			Note - inside CDATA tags these comments will not work!
			
		</li>
	</ul>
	
</div>
</div>

</div>

<br>
<br>

<div class="paragraph">
<h2><a href="#expressions" name="expressions" class="selflink">Expressions</a></h2>
<div class="xmlnodedesc">
<div class="xmlnodetext">
	The expression syntax will be used in <a href="#variableassignments">variable assignments</a>, in <a href="#if">if()</a> checks, 
	for the <a href="#callwhen">callwhen()</a> action,
	in conditional loops (<a href="#for">for</a>, <a href="#loop">loop</a>, <a href="#asyncloop">asyncloop</a>)
	and in the <a href="#calc">calc()</a> action. 
	It can be used to evaluate logical conditions, calculate mathematical expressions or to concatenate strings.
	<br>
	<br>
	The basic syntax is:
	<pre>a OPERATOR b</pre>
	<ul>
		<li>Where the <span class="pre">a</span> or <span class="pre">b</span> terms can be either:
			<ul>
				<li>variables,</li>
				<li>values,</li>
				<li>strings (inside single-quotes <span class="pre">'</span> or double-quotes <span class="pre">"</span>),</li>
				<li>nested expressions (in parenthesis),</li>
				<li>or <a href="#expression.functions">Expression Functions</a>.</li>
			</ul>
		</li>
		<li>The <span class="pre">OPERATOR</span> can be one of the operators listed below.</li>
		<li>The resolving order depends on the operator, but withhin equivalent operators the resolving order is from left to right.</li>
		<li>Use parenthesis / nesting for a custom resolving orders - e.g.:
			<pre>(a OPERATOR b) OPERATOR (c OPERATOR d)</pre>
		</li>
		<li>Textual operators like <span class="pre">AND</span> or <span class="pre">OR</span> are only supported in UPPERCASE notation!</li>
	</ul>
	<br>
	<a name="expressions.comparison" href="#expressions.comparison" class="selflink2">Comparison operators:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax">==</td><td>is equal (<a href="#expressions.strict">non-strict</a>)</td></tr>
		<tr><td style="text-align:center;" class="presyntax">!=</td><td>is not equal (<a href="#expressions.strict">non-strict</a>)</td></tr>
		<tr><td style="text-align:center;" class="presyntax">&lt;<span style="color:gray;"> &nbsp;or&nbsp; </span>LT</td><td>is lower than *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">&gt;<span style="color:gray;"> &nbsp;or&nbsp; </span>GT</td><td>is greater than *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">&lt;=<span style="color:gray;"> &nbsp;or&nbsp; </span>LE</td><td>is lower or equal than *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">&gt;=<span style="color:gray;"> &nbsp;or&nbsp; </span>GE</td><td>is greater or equal than *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">===</td><td> is equal (<a href="#expressions.strict">strict</a>)</td></tr>
		<tr><td style="text-align:center;" class="presyntax">!==</td><td>is not equal (<a href="#expressions.strict">strict</a>)</td></tr>
	</table>
	<a name="expressions.logical" href="#expressions.logical" class="selflink2">Logical operators:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax">||<span style="color:gray;"> &nbsp;or&nbsp; </span>OR&nbsp;</td><td>the left OR the right expression need to be true *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">&amp;&amp;<span style="color:gray;"> &nbsp;or&nbsp; </span>AND</td><td>the left AND the right expression need to be true *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">!</td><td>NOT operator - invert a boolean value</td></tr>
	</table>
	
	<a name="expressions.type" href="#expressions.type" class="selflink2">Type operator:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax">$<span style="color:gray;">variable</span></td><td>Force using that variable as it is, skip any type detection / conversion (e.g. for Strings that contain a Number as value).</td></tr>
	</table>
	
	<a name="expressions.ternary" href="#expressions.ternary" class="selflink2">Ternary operators:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax"><span style="color:gray;">if</span> ? <span style="color:gray;">then</span> : <span style="color:gray;">else</span></td><td>Ternary operator</td></tr>
		<tr><td style="text-align:center;width:33%;" class="presyntax"><span style="color:gray;">if</span> THEN <span style="color:gray;">then</span> ELSE <span style="color:gray;">else</span></td><td>Ternary operator</td></tr>
	</table>
	
	<a name="expressions.nesting" href="#expressions.nesting" class="selflink2">Nesting operators:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax">( <span style="color:gray;">...</span> )</td><td>Nesting operator</td></tr>
	</table>
	
	<a name="expressions.mathematical" href="#expressions.mathematical" class="selflink2">Mathematical operators:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax">+</td><td>plus - add numbers or concatenate strings</td></tr>
		<tr><td style="text-align:center;" class="presyntax">-</td><td>minus</td></tr>
		<tr><td style="text-align:center;" class="presyntax">*</td><td>multiple</td></tr>
		<tr><td style="text-align:center;" class="presyntax">/</td><td>divide</td></tr>
		<tr><td style="text-align:center;" class="presyntax">^</td><td>power of</td></tr>
		<tr><td style="text-align:center;" class="presyntax">MOD</td><td>modulate (remainder of division)</td></tr>
	</table>
	
	<a name="expressions.binary" href="#expressions.binary" class="selflink2">Binary operators:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		<tr><td style="text-align:center;width:33%;" class="presyntax">&lt;&lt;<span style="color:gray;"> &nbsp;or&nbsp; </span>LSHT</td><td>left bit shift *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">&gt;&gt;<span style="color:gray;"> &nbsp;or&nbsp; </span>RSHT</td><td>right bit shift *</td></tr>
		<tr><td style="text-align:center;" class="presyntax">BOR</td><td>bitwise OR</td></tr>
		<tr><td style="text-align:center;" class="presyntax">BAND</td><td>bitwise AND</td></tr>
		<tr><td style="text-align:center;" class="presyntax">XOR</td><td>bitwise XOR</td></tr>
	</table>
	
	<i>
		* Note - due of xml syntax limitations, the usage of the characters <span class="presyntax_inline">&lt;, &gt;, &amp;</span>
		might be not possible (e.g. inside xml attributes or inside xml elements without CDATA tag).
		Therefore it's recommended to use the alternative syntax.
	</i><br>
	
	<br>
	<a name="expressions.inlinefunctions"></a>
	<a name="expression.functions" href="#expression.functions" class="selflink2">Expression Functions:</a>
	<table class="krpano_apitable" style="width:100%;text-align:left;font-size:12px;margin-bottom:8px;">
		
		<tr><td style="text-align:center;width:10%;" class="presyntax"><a href="#expr.isset" class="selflink2">
			isset(v)
		</a></td><td><a name="expr.isset"></a>
			Returns true or false depending on if <span class="pre">v</span> is an already existing variable.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.isvalue" class="selflink2">
			isvalue(v)
		</a></td><td><a name="expr.isvalue"></a>
			Returns true or false depending on if <span class="pre">v</span> is an already existing variable and its value is not an empty string (whitespaces will be ignored).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.isnan" class="selflink2">
			isNaN(v)
		</a></td><td><a name="expr.isnan"></a>
			Returns true or false depending on if <span class="pre">v</span> is Not-a-Number.
		</td></tr>
		
		
		<tr><td style="text-align:center;" class="presyntax"><a name="expr.istweening" href="#expr.istweening" class="selflink2">
			istweening(varpath)<br>
			istweening(object,var)
		</a></td><td>
			Check if a specific variable is currently <a href="#tween">tweened</a>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.int" class="selflink2">
			int(v)
		</a></td><td><a name="expr.int"></a>
			Converts the given value to an Integer.<br>
			Returns 0 when the conversion was not possible.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.number" class="selflink2">
			number(v)
		</a></td><td><a name="expr.number"></a>
			Converts the given value to a Number.<br>
			Returns NaN (Not-a-Number) when the conversion was not possible.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.string" class="selflink2">
			string(v)
		</a></td><td><a name="expr.string"></a>
			Converts the given value to a String.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.boolean" class="selflink2">
			boolean(v)
		</a></td><td><a name="expr.boolean"></a>
			Converts the given value to a Boolean (true or false).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.parseint" class="selflink2">
			parseint(v)
		</a></td><td><a name="expr.parseint"></a>
			Parses the given value and converts all valid characters to an Integer. Returns 0 if the conversion was not possible.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.parsefloat" class="selflink2">
			parsefloat(v)
		</a></td><td><a name="expr.parsefloat"></a>
			Parses the given value and converts all valid characters to a Number. Returns NaN (Not-a-Number) if the conversion was not possible.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.tolower" class="selflink2">
			tolower(v)
		</a></td><td><a name="expr.tolower"></a>
			Converts the given value to a lower-case String.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.toupper" class="selflink2">
			toupper(v)
		</a></td><td><a name="expr.toupper"></a>
			Converts the given value to a upper-case String.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.capitalize" class="selflink2">
			capitalize(v)
		</a></td><td><a name="expr.capitalize"></a>
			Convert the first character of the String to upper-case  and all other characters to lower-case.
		</td></tr>

		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.charat" class="selflink2">
			charat(s,i)
		</a></td><td><a name="expr.charat"></a>
			Returns the character (as String) from the String <span class="pre">s</span> at the index <span class="pre">i</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.charcodeat" class="selflink2">
			charcodeat(s,i)
		</a></td><td><a name="expr.charcodeat"></a>
			Returns the character code (an Integer) from the String <span class="pre">s</span> at the index <span class="pre">i</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.charcode" class="selflink2">
			charcode(ch)
		</a></td><td><a name="expr.charcode"></a>
			Returns the character code for the character (String).<br>
			Could be used to check with <a href="#keycode">keycode</a> for a certain pressed characters.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.fromcharcode" class="selflink2">
			fromcharcode(v)
		</a></td><td><a name="expr.fromcharcode"></a>
			Returns a String created from the given character code.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.indexof" class="selflink2">
			indexof(a,b)
		</a></td><td><a name="expr.indexof"></a>
			Returns the first index of the String <span class="pre">b</span> inside <span class="pre">a</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.lastindexof" class="selflink2">
			lastindexof(a,b)
		</a></td><td><a name="expr.lastindexof"></a>
			Returns the last index of the String <span class="pre">b</span> inside <span class="pre">a</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.contains" class="selflink2">
			contains(a, ...)
		</a></td><td><a name="expr.contains"></a>
			Returns true if the String <span class="pre">a</span> contains any of the given Strings.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.startswith" class="selflink2">
			startswith(a,b)
		</a></td><td><a name="expr.startswith"></a>
			Returns true if the String <span class="pre">a</span> starts with the String <span class="pre">b</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.endswith" class="selflink2">
			endswith(a,b)
		</a></td><td><a name="expr.endswith"></a>
			Returns true if the String <span class="pre">a</span> ends with the String <span class="pre">b</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.slice" class="selflink2">
			slice(s,a,b)
		</a></td><td><a name="expr.slice"></a>
			Returns a part of the String <span class="pre">s</span> from index <span class="pre">a</span> to <span class="pre">b</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.substr" class="selflink2">
			substr(s,i,l)
		</a></td><td><a name="expr.substr"></a>
			Returns a part of the String <span class="pre">s</span> from index <span class="pre">i</span> with length <span class="pre">l</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.trim" class="selflink2">
			trim(s)
		</a></td><td><a name="expr.trim"></a>
			Returns a String with removed whitespaces around.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.padleft" class="selflink2">
			padleft(s,l,ch)<br>
			padright(s,l,ch)<br>
		</a></td><td><a name="expr.padleft"></a><a name="expr.padright"></a>
			Left or right align the String <span class="pre">s</span> by padding it with spaces or the specified <span class="pre">ch</span> for the specified total length <span class="pre">l</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.replace" class="selflink2">
			replace(s,old,new)
		</a></td><td><a name="expr.replace"></a>
			Replace in <span class="pre">s</span> all occurrences of the search-string <span class="pre">old</span> with the replacement-string <span class="pre">new</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.tohex" class="selflink2">
			tohex(v)
		</a></td><td><a name="expr.tohex"></a>
			Returns a String with a hexadecimal converted value (low case, no prefix).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.tohexcolor" class="selflink2">
			tohexcolor(v,prefix*)
		</a></td><td><a name="expr.tohexcolor"></a>
			Returns a String with a hexadecimal Color value, that means with a <span class="pre">0x</span> prefix (*or a custom one) and padded zeros when necessary (e.g. "0x00FF00" for a Green color value).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.fromhex" class="selflink2">
			fromhex(s)
		</a></td><td><a name="expr.fromhex"></a>
			Returns a Number from a parsed hexadecimal String (# and 0x prefixes are possible).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.rgb" class="selflink2">
			rgb(r,g,b)
		</a></td><td><a name="expr.rgb"></a>
			Returns a 32bit Integer-color-value build from the red, green, blue color values (0-255).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.rgba" class="selflink2">
			rgba(r,g,b,a)
		</a></td><td><a name="expr.rgba"></a>
			Returns 32bit Integer-color-value build from the red, green, blue color (0-255) and alpha (0.0-1.0) values.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.colormix" class="selflink2">
			colormix(c1,c2,b)<br>
			colormix(c1,c2,b,a)<br>
		</a></td><td><a name="expr.colormix"></a>
			Mixes/blends two 32bit Integer ARGB color values (each color channel separately).<br>
			Formula: <span class="pre">c1*(1-b) + c2*b</span> or <span class="pre">c1*a + c2*b</span><br>
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.join" class="selflink2">
			join(sep, ...)
		</a></td><td><a name="expr.join"></a>
			Join the values of several variables using the given <span class="pre">sep</span> value as separator.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.valcount" class="selflink2">
			valcount(s)
		</a></td><td><a name="expr.valcount"></a>
			Count the number of values separated by <span class="pre">|</span> or <span class="pre">,</span> or spaces.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.valextract" class="selflink2">
			valextract(s,i)
		</a></td><td><a name="expr.valextract"></a>
			Split the String <span class="pre">s</span> by <span class="pre">|</span> or <span class="pre">,</span> or spaces
			and return the value from the part with the index <span class="pre">i</span>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.valinsert" class="selflink2">
			valinsert(s,i,new)
		</a></td><td><a name="expr.valinsert"></a>
			Split the String <span class="pre">s</span> by <span class="pre">|</span> or <span class="pre">,</span> or spaces
			and replace the value from the part with the index <span class="pre">i</span> with the new value.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.escape" class="selflink2">
			escape(v)
		</a></td><td><a name="expr.escape"></a>
			Returns a String in which certain characters have been replaced by a hexadecimal escape sequence.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.escapexml" class="selflink2">
			escapexml(v)
		</a></td><td><a name="expr.escapexml"></a>
			Escape the xml &lt; and &gt; tags.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.escapetext" class="selflink2">
			escapetext(v)
		</a></td><td><a name="expr.escapetext"></a>
			Escape the [, ], &lt; and &gt; tags to make them printable in textfields.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.escapeurl" class="selflink2">
			escapeurl(v)
		</a></td><td><a name="expr.escapeurl"></a>
			Escape many URL related characters.<br>
			Same as the Javascript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" target="_blank">encodeURIComponent()</a> function.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.unescape" class="selflink2">
			unescape(v)
		</a></td><td><a name="expr.unescape"></a>
			Returns a String in which hexadecimal escape sequences are replaced with the character that it represents.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.filterhtml" class="selflink2">
			filterhtml(v)
		</a></td><td><a name="expr.filterhtml"></a>
			Filter out all HTML tags and return only the plain-text.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.filternumeric" class="selflink2">
			filternumeric(v,int*)
		</a></td><td><a name="expr.filternumeric"></a>
			Filter out all non-numeric characters.<br>
			int - when set to true, allow only Integer Numbers.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.parsepath" class="selflink2">
			parsepath(s)
		</a></td><td><a name="expr.parsepath"></a>
			Parses the given String for <a href="xml.html#url">url-placeholders</a>.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.adjust360" class="selflink2">
			adjust360(v,target*)
		</a></td><td><a name="expr.adjust360"></a>
			Adjusts the value to get the shortest 360-degree distance to the target value (which is 0 by default).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.abs" class="selflink2">
			abs(v)
		</a></td><td><a name="expr.abs"></a>
			Returns the absolute value of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.acos" class="selflink2">
			acos(v)
		</a></td><td><a name="expr.acos"></a>
			Returns the arccosine of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.asin" class="selflink2">
			asin(v)
		</a></td><td><a name="expr.asin"></a>
			Returns the arcsine of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.atan" class="selflink2">
			atan(v)
		</a></td><td><a name="expr.atan"></a>
			Returns the arctangent of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.atan2" class="selflink2">
			atan2(a,b)
		</a></td><td><a name="expr.atan2"></a>
			Returns the arctangent of the quotient of its arguments.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.ceil" class="selflink2">
			ceil(v)
		</a></td><td><a name="expr.ceil"></a>
			Returns the smallest integer greater than or equal to a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.clamp" class="selflink2">
			clamp(v,min,max)
		</a></td><td><a name="expr.clamp"></a>
			Limits/clamps the value to be between min and max.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.cos" class="selflink2">
			cos(v)
		</a></td><td><a name="expr.cos"></a>
			Returns the cosine of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.exp" class="selflink2">
			exp(v)
		</a></td><td><a name="expr.exp"></a>
			Returns the  exponential function of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.floor" class="selflink2">
			floor(v)
		</a></td><td><a name="expr.floor"></a>
			Returns the largest integer less than or equal to a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.log" class="selflink2">
			log(v)
		</a></td><td><a name="expr.log"></a>
			Returns the natural logarithm (also ln) of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.max" class="selflink2">
			max(...)
		</a></td><td><a name="expr.max"></a>
			Returns the largest of the given values.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.min" class="selflink2">
			min(...)
		</a></td><td><a name="expr.min"></a>
			Returns the smallest  of the given values.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.pow" class="selflink2">
			pow(a,b)
		</a></td><td><a name="expr.pow"></a>
			Returns base to the exponent power.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.mix" class="selflink2">
			mix(a,b,m)
		</a></td><td><a name="expr.mix"></a>
			Blend from a to b by factor m (0..1).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.round" class="selflink2">
			round(v)
		</a></td><td><a name="expr.round"></a>
			Returns the value of a number rounded to the nearest integer.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.roundval" class="selflink2">
			roundval(v,dp)
		</a></td><td><a name="expr.roundval"></a>
			Returns a String of a number rounded to given decimal places (dp).
			When using -1 for dp, an automatic number of decimal places will be used, from 1 to 6, no trailing zeros.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.formatnumber" class="selflink2">
			formatnumber(v,dp,ts,cs)
		</a></td><td><a name="expr.formatnumber"></a>
			Same as <a href="#expr.roundval">roundval</a> but with additional options for 
			setting custom thousand- (ts) and comma-separators (cs).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.sin" class="selflink2">
			sin(v)
		</a></td><td><a name="expr.sin"></a>
			Returns the sine of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.sqrt" class="selflink2">
			sqrt(v)
		</a></td><td><a name="expr.sqrt"></a>
			Returns the positive square root of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.tan" class="selflink2">
			tan(v)
		</a></td><td><a name="expr.tan"></a>
			Returns the tangent of a number.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.jsget" class="selflink2">
			jsget(v)
		</a></td><td><a name="expr.jsget"></a><a name="expr.jsget"></a>
			Get the value of a Javascript variable or the result of a Javascript expression or the return value from a Javascript function call.<br>
			When there is a code error, undefined will be returned.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.stringify" class="selflink2">
			stringify(obj)
		</a></td><td><a name="expr.stringify"></a><a name="expr.stringify"></a>
			Convert an Object to a JSON string.
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.debug" class="selflink2">
			debug(v)
		</a></td><td><a name="expr.debug"></a>
			Print the given variable or value in the krpano log and return it unmodified (passthrough it).
		</td></tr>
		
		<tr><td style="text-align:center;" class="presyntax"><a href="#expr.translate" class="selflink2">
			translate(word)
		</a></td><td><a name="translate"></a><a name="expr.translate"></a>
			Look up the given word in the <a href="xml.html#languages" class="selflink">&lt;languages&gt;</a> translation tables
			with the current <a href="xml.html#language">language</a> or the 
			<a href="xml.html#defaultlanguage">defaultlanguage</a> when not available in the current language.
		</td></tr>
		
	</table>
	<br>
	
	<h3><a href="#expressions.strict" name="expressions.strict" class="selflink">Strict / non-strict comparisons</a></h3>
	When using <u>non-strict</u> comparisons (by using <span class="presyntax_inline">==</span> or 
	<span class="presyntax_inline">!=</span> when the <a href="xml.html#krpano.strict">strict</a> mode setting is false)
	then it will be assumed that the given values are either variables or strings.
	That means when a variable with the given name exists, then the value of that variable will be used in the comparison.
	But when the variable doesn't exists, then the given name will be used as string.<br>
	In <u>strict</u> comparisons the strings must be explicitly marked by quotes.
	Variables will resolve either to their value or to null if they don't exists.

</div>
</div>
	
</div>

<br>
<br>

<div class="paragraph">
<h2><a href="#arrays" name="arrays" class="selflink">Arrays</a></h2>

<div class="xmlnodedesc">
<div class="xmlnodetext">
	Basic principles:
	<ul>
		<li>Every xml element with a <a href="xml.html#name">name</a> attribute is an element / item of an Array.</li>
		<li>The name of the xml element is the name of the Array and the name attribute defines the name of the Array element / item.</li>
		<li>An Array in krpano is always an Array of objects.</li>
		<li>Such Array-item object can contain any kind of custom properties / attributes.</li>
		<li>Arrays can be predefined or defined dynamically at runtime by setting an Array item value - when setting an item value the first time, then automatically an Array will be created.</li>
	</ul>
	<br>
	Static XML Syntax: <span class="smallcomment">(when defining in the xml structure)</span><br>
	<pre>&lt;array_name <a href="xml.html#name" class="selflink">name</a>="item_name" value="..." /&gt;</pre>
	<br>
	Dynamic Actions Syntax: <span class="smallcomment">(when accessing or setting at runtime)</span><br>
	<pre>array_name[item_name].value</pre>
	<br>
	<a name="array.count"></a>
	<a name="array.sortby"></a>
	<a name="array.createarrayitem"></a>
	<a name="array.removearrayitem"></a>
	Properties and Actions from Array objects:
	<ul>
		<li><a href="#array.count" class="selflink">count</a>
			<ul>
				<li>Get the current number of items in the array.</li>
				<li>An Array can be cleared by setting <a href="#array.count" class="selflink">count</a> to 0.</li>
			</ul>
		</li>
		<li><a href="#array.sortby" class="selflink">sortby(attribute, <span class="optargs">parameters</span>)</a>
			<ul>
				<li>Sort all array items by the value of the given <b>attribute</b>.</li>
				<li>By default the sorting order will depend on the type of the attribute (e.g. 'numeric vs. string' sorting).</li>
				<li><b>parameters</b> <span class="smallcomment">(optionally)</span> - a string that can contain one or more of the following values (e.g. separated by a pipe <span class="presyntax_inline">|</span> character):
					<ul>
						<li><span class="presyntax_inline">caseinsensitive</span> - case insensitive string sorting.</li>
						<li><span class="presyntax_inline">descending</span> - use a descending sorting order.</li>
						<li><span class="presyntax_inline">numeric</span> - parse the values as numbers and sort accordingly.</li>
					</ul>
				</li>
			</ul>
		</li>
		<li><a href="#array.createarrayitem" class="selflink">createarrayitem(name or index)</a>
			<ul>
				<li>Create / add a new array item.</li>
			</ul>
		</li>
		<li><a href="#array.removearrayitem" class="selflink">removearrayitem(name or index)</a>
			<ul>
				<li>Remove an array item.</li>
				<li>The items following the removed item will rank / move up.</li>
			</ul>
		</li>
	</ul>
	<br>
	<a name="arrayitem.index"></a>
	<a name="arrayitem.name"></a>
	Default properties from Array-Item objects:
	<ul>
		<li><a href="#arrayitem.index" class="selflink">index</a>
			<ul>
				<li>The 0-based index of the current Array-Item (read-only).</li>
			</ul>
		</li>
		<li><a href="#arrayitem.name" class="selflink">name</a>
			<ul>
				<li>The name of the current Array-Item.</li>
				<li>It's also possible to delete an Array-Item by setting its name to <span class="presyntax_inline">null</span>.</li>
			</ul>
		</li>
	</ul>

	<br>
	<a name="valuearrays" href="#valuearrays" class="selflink">Value-Arrays</a>
	<div class="xmlnodetext">
		Different to the normal krpano-Arrays there are also these special Value-Arrays: 
		<ul>
			<li>Value-Arrays are simple Arrays with an integer index and a value.</li>
			<li>Dynamically creating Value-Arrays is possible by <a href="#def" class="presyntax_inline" style="text-decoration:none;font-weight:normal;color:#333;">def(test, array)</a>.</li>
			<li>The access to the items is possible by <span class="presyntax_inline">array[index]</span>.</li>
			<li>The current number of items in the Array can be get via <span class="presyntax_inline">array.length</span>.</li>
			<li>Value-Arrays are only available in actions code.</li>
			<li>Internally these are native Arrays from Javascript. 
				Their usage itself is the same in both cases.
			</li>
		</ul>
	</div>
</div>
</div>
	
</div>

<br>
<br>
<a name="details"></a>
<h2><a name="globalvariables" href="#globalvariables" class="selflink">Global Variables</a></h2>
<div class="xmlnodedesc">
<div class="xmlnodetext">
	All default global krpano variables:	

	<table class="xmlattrdoc">
		
		
		<tr class="xmlattrdocdesc">
			<td colspan="2"><a name="global"></a><a name="local"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#global" class="selflink">global</a><br>
				<a href="#local" class="selflink">local</a>
			</th>
			<th>Object<br>Object</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <a href="#global" class="selflink">global</a> object allows directly accessing the global variable scope.<br>
				The usage of global can be necessary inside <a href="xml.html#action.scope">local- or layer/hotspot scope</a>
				code to be able to access a global variable when a variable with the same name is already defined the current scope.<br>
				<br>
				The <a href="#global" class="selflink">local</a> object is only available inside <a href="xml.html#action.scope">local-scope</a> actions
				and allows directly accessing the current local variable scope.
				This can be used to ensure defining new variables at the local scope when there might be already global variables with the same names.
			</td>
		</tr>

  		<tr class="xmlattrdocdesc"><td colspan="2"><a name="version"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#version" class="selflink">version</a></th>
			<th>String</th>
			<th>"1.23.2"</th>
		</tr>
		<tr>
			<td colspan="4">
				The krpano version string.
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xmlversion"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#xmlversion" class="selflink">xmlversion</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <a href="xml.html#krpano.xmlversion">version</a> setting from the xml.<br>
				When not set, this will be the same as the krpano version string.
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="build"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#build" class="selflink">build</a></th>
			<th>String</th>
			<th>"2025-09-22"</th>
		</tr>
		<tr>
			<td colspan="4">
				The krpano build date string in the format YYYY-MM-DD.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="mouse.button"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#mouse.button" class="selflink">mouse.button</a></th>
			<th>int</th>
			<th>0</th>
		</tr>
		<tr>
			<td colspan="4">
				Which mouse button was pressed or released:
				<ul>
					<li>0 - left mouse button</li>
					<li>1 - middle mouse button</li>
					<li>2 - right mouse button</li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="mouse.leftbutton"></a><a name="mouse.middlebutton"></a><a name="mouse.rightbutton"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#mouse.leftbutton" class="selflink">mouse.leftbutton</a><br>
				<a href="#mouse.middlebutton" class="selflink">mouse.middlebutton</a><br>
				<a href="#mouse.rightbutton" class="selflink">mouse.rightbutton</a><br>
			</th>
			<th>Boolean<br>Boolean<br>Boolean<br></th>
			<th>false<br>false<br>false<br></th>
		</tr>
		<tr>
			<td colspan="4">
				Check which mouse button is currently pressed.<br>
				<br>
				Example - control something with the right mouse button:
				<pre class="prewrap">&lt;events ondown="asyncloop(mouse.rightbutton, 
                  trace(mouse.dx,'/',mouse.dy);
                );" /&gt;</pre>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="mouse.altkey"></a><a name="mouse.ctrlkey"></a><a name="mouse.shiftkey"></a><a name="mouse.cmdkey"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#mouse.altkey" class="selflink">mouse.altkey</a><br>
				<a href="#mouse.ctrlkey" class="selflink">mouse.ctrlkey</a><br>
				<a href="#mouse.shiftkey" class="selflink">mouse.shiftkey</a><br>
				<a href="#mouse.cmdkey" class="selflink">mouse.cmdkey</a><br>
			</th>
			<th>Boolean<br>Boolean<br>Boolean<br>Boolean<br></th>
			<th>false<br>false<br>false<br>false<br></th>
		</tr>
		<tr>
			<td colspan="4">
				Check if the <span class="pre">ALT</span>, 
				<span class="pre">CTRL</span>, <span class="pre">SHIFT</span> or
				<span class="pre">CMD/META</span> 
				keys are pressed on the current mouse event.<br>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2">
			<a name="mouse.x"></a><a name="mouse.y"></a>
			<a name="mouse.dx"></a><a name="mouse.dy"></a>
			<a name="mouse.stagex"></a><a name="mouse.stagey"></a>
			<a name="mouse.screenx"></a><a name="mouse.screeny"></a>
			<a name="mouse.downx"></a><a name="mouse.downy"></a>
			<a name="mouse.clickx"></a><a name="mouse.clicky"></a>
			Variable names <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#mouse.x" class="selflink">mouse.x</a><br>
				<a href="#mouse.y" class="selflink">mouse.y</a><br>
				<a href="#mouse.dx" class="selflink">mouse.dx</a><br>
				<a href="#mouse.dy" class="selflink">mouse.dy</a><br>
				<a href="#mouse.stagex" class="selflink">mouse.stagex</a><br>
				<a href="#mouse.stagey" class="selflink">mouse.stagey</a><br>
				<a href="#mouse.screenx" class="selflink">mouse.screenx</a><br>
				<a href="#mouse.screeny" class="selflink">mouse.screeny</a><br>
				<a href="#mouse.downx" class="selflink">mouse.downx</a><br>
				<a href="#mouse.downy" class="selflink">mouse.downy</a><br>
				<a href="#mouse.clickx" class="selflink">mouse.clickx</a><br>
				<a href="#mouse.clicky" class="selflink">mouse.clicky</a>
			</th>
			<th>int<br>int<br>int<br>int<br>int<br>int<br>int<br>int<br>int<br>int<br>int<br>int</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The mouse position.<br>
				<br>
				The <a href="#mouse.x" class="selflink">mouse.x</a> and <a href="#mouse.y" class="selflink">mouse.y</a> coordinates are relative to the left top edge of the <a href="xml.html#area">area</a>.<br>
				<br>
				The <a href="#mouse.dx" class="selflink">mouse.dx</a> and <a href="#mouse.dy" class="selflink">mouse.dy</a> variables store the 'delta'-movement distance between the previous and the current frame.<br>
				<br>
				The <a href="#mouse.stagex" class="selflink">mouse.stagex</a> and <a href="#mouse.stagey" class="selflink">mouse.stagey</a> coordinates are relative to the left top edge of the whole stage / window.<br>
				<br>
				The <a href="#mouse.screenx" class="selflink">mouse.screenx</a> and <a href="#mouse.screeny" class="selflink">mouse.screeny</a> coordinates are 
				the same as stagex/stagey but additionally also ignoring the <a href="xml.html#display.safearea">safe-screen-area</a> of the device.
				<br>
				<br>
				The <a href="#mouse.downx" class="selflink">mouse.downx</a> and <a href="#mouse.downy" class="selflink">mouse.downy</a> variables store the position where the mouse button was last pressed down (for left and right buttons).
				The coordinates itself are relative to the left top edge of the <a href="xml.html#area">area</a>.<br>
				<br>
				The <a href="#mouse.clickx" class="selflink">mouse.clickx</a> and <a href="#mouse.clicky" class="selflink">mouse.clicky</a> variables are special case ones - 
				they store the position where the click from <a href="xml.html#events.onsingleclick">onsingleclick</a> or <a href="xml.html#events.ondoubleclick">ondoubleclick</a> events had happend.
				The coordinates itself are relative to the left top edge of the <a href="xml.html#area">area</a>.<br>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2">
			<a name="gesture"></a>
			<a name="gesture.event"></a>
			<a name="gesture.scale"></a>
			<a name="gesture.deltascale"></a>
			<a name="gesture.rotation"></a>
			<a name="gesture.deltarotation"></a>
			<a name="gesture.centerx"></a><a name="gesture.centery"></a>
			<a name="gesture.startx"></a><a name="gesture.starty"></a>
			<a name="gesture.dx"></a><a name="gesture.dy"></a>
			<a name="gesture.dt"></a>
			<a name="gesture.touches"></a>
			Variable names <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#gesture.event" class="selflink">gesture.event</a><br>
				<a href="#gesture.scale" class="selflink">gesture.scale</a><br>
				<a href="#gesture.deltascale" class="selflink">gesture.deltascale</a><br>
				<a href="#gesture.rotation" class="selflink">gesture.rotation</a><br>
				<a href="#gesture.deltarotation" class="selflink">gesture.deltarotation</a><br>
				<a href="#gesture.centerx" class="selflink">gesture.centerx</a><br>
				<a href="#gesture.centery" class="selflink">gesture.centery</a><br>
				<a href="#gesture.startx" class="selflink">gesture.startx</a><br>
				<a href="#gesture.starty" class="selflink">gesture.starty</a><br>
				<a href="#gesture.dx" class="selflink">gesture.dx</a><br>
				<a href="#gesture.dy" class="selflink">gesture.dy</a><br>
				<a href="#gesture.dt" class="selflink">gesture.dt</a><br>
				<a href="#gesture.touches" class="selflink">gesture.touches</a><br>
			</th>
			<th>String<br>Number<br>Number<br>Number<br>Number<br>Number<br>Number<br>Number<br>Number<br>Number<br>Array</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Informations for the <a href="xml.html#events.ongesture">ongesture</a> event:
				<ul>
					<li><a href="#gesture.event" class="selflink">gesture.event</a> - the type of the event: <span class="pre">start</span>, <span class="pre">change</span> or <span class="pre">end</span>.</li>
					<li><a href="#gesture.scale" class="selflink">gesture.scale</a> - the scale change since start, starting from 1.0.</li>
					<li><a href="#gesture.deltascale" class="selflink">gesture.deltascale</a> - the scale change since the previous event.</li>
					<li><a href="#gesture.rotation" class="selflink">gesture.rotation</a> - the rotation change in degrees since start, starting from 0.0.</li>
					<li><a href="#gesture.deltarotation" class="selflink">gesture.deltarotation</a> - the rotation change since the previous event.</li>
					<li><a href="#gesture.centerx" class="selflink">gesture.centerx</a> / <a href="#gesture.centery" class="selflink">gesture.centery</a>
						 - the center of the multi-touch gesture.
					</li>
					<li><a href="#gesture.startx" class="selflink">gesture.startx</a> / <a href="#gesture.starty" class="selflink">gesture.starty</a>
						 - the center where the multi-touch gesture started.
					</li>
					
					<li><a href="#gesture.dx" class="selflink">gesture.dx</a> / <a href="#gesture.dy" class="selflink">gesture.dy</a>
						- the change of the center since the previous event.
					</li>
					<li><a href="#gesture.dt" class="selflink">gesture.dt</a> 
						- the delta time in milliseconds between the events.<br>
						<i>
							Note - if dt is greater than 0 in the start event, then this is the time between the first touch of both fingers
							and the first movement.
						</i>
					</li>
					
					<li><a href="#gesture.touches" class="selflink">gesture.touches</a> - a Javascript Array of {id,x,y} Objects that contain the current multi-touch points.</li>
				</ul>
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="keycode"></a><a name="keyboard.keycode"></a><a name="keyboard.keyname"></a><a name="keyboard.physicalkey"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#keyboard.keycode" class="selflink">keyboard.keycode</a> <span class="smallcomment">or</span> <a href="#keycode" class="selflink">keycode</a><br>
				<a href="#keyboard.keyname" class="selflink">keyboard.keyname</a><br>
				<a href="#keyboard.physicalkey" class="selflink">keyboard.physicalkey</a><br>
			</th>
			<th>int<br>String<br>String</th>
			<th>0</th>
		</tr>
		<tr>
			<td colspan="4">
				The code and name of the last pressed or released key.<br>
				<br>
				Values:
				<ul>
					<li><b>keycode</b> - the unmodified Unicode value of the character associated with that key, e.g. 65 for the A-key, regardless if Shift is pressed or not.</li>
					<li><b>keyname</b> - the actual text-representation of the key, e.g. "a" for the A-key when Shift is not pressed and "A" when Shift is pressed.</li>
					<li><b>physicalkey</b> - this is a mapping of the Javascript 
						<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code">KeyboardEvent.code</a> value
						and represents the key with the physical position on an English QWERTY layout keyboard. 
						This can be used for controls like WASD to be independent of the actual keyboard layout.
						<i>Note: in older Browser versions this might be not available!</i>
					</li>
				</ul>
				<br>
				These variables will be updated in the <a href="xml.html#events.onkeydown">onkeydown</a> and
				<a href="xml.html#events.onkeyup">onkeyup</a> events.<br>
				<br>
				<i>Here a small code snippet to find out the keycode of the pressed key:</i>
				<pre class="prewrap">&lt;events onkeydown="showlog(); trace('keycode=',keyboard.keycode,' keyname=',keyboard.keyname, ' physicalkey=',keyboard.physicalkey);" /&gt;</pre>
				<i>Check if the 'A' key got pressed:</i>
				<pre class="prewrap">&lt;events onkeydown="if(keycode == charcode('A'), ...);" /&gt;</pre>

			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="keyboard.pressed"></a><a name="keyboard.pressedphysical"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#keyboard.pressed" class="selflink">keyboard.pressed</a><br>
				<a href="#keyboard.pressedphysical" class="selflink">keyboard.pressedphysical</a><br>
				
			</th>
			<th>Array<br>Object</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Arrays of the currently pressed keys.<br>
				<ul>
					<li><b>keyboard.pressed</b> - here the Array-index is the  <a href="#keyboard.keycode">keycode</a> Integer.</li>
					<li><b>keyboard.pressedphysical</b> - here the Array-index (in this case the Object property) is the <a href="#keyboard.physicalkey">keyboard.physicalkey</a> String.</li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="keyboard.alt"></a><a name="keyboard.ctrl"></a><a name="keyboard.shift"></a><a name="keyboard.cmd"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#keyboard.alt" class="selflink">keyboard.alt</a><br>
				<a href="#keyboard.ctrl" class="selflink">keyboard.ctrl</a><br>
				<a href="#keyboard.shift" class="selflink">keyboard.shift</a><br>
				<a href="#keyboard.cmd" class="selflink">keyboard.cmd</a><br>
			</th>
			<th>Boolean<br>Boolean<br>Boolean<br>Boolean<br></th>
			<th>false<br>false<br>false<br>false<br></th>
		</tr>
		<tr>
			<td colspan="4">
				Check if the <span class="pre">ALT</span>, 
				<span class="pre">CTRL</span>, <span class="pre">SHIFT</span> or
				<span class="pre">CMD/META</span> 
				keys are currently pressed.<br>
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="wheeldelta"></a><a name="wheeldelta_raw"></a><a name="wheeldelta_touchscale"></a>Variable names <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#wheeldelta"            class="selflink">wheeldelta</a><br>
				<a href="#wheeldelta_raw"        class="selflink">wheeldelta_raw</a><br>
				<a href="#wheeldelta_touchscale" class="selflink">wheeldelta_touchscale</a><br>
			</th>
			<th>int<br>Number<br>Number</th>
			<th>0<br>Number.NaN<br>0.0</th>
		</tr>
		<tr>
			<td colspan="4">
				The roll-delta of the mouse wheel rotation.<br>
				<br>
				These variables will be set in the <a href="xml.html#events.onmousewheel">onmousewheel</a> event.<br>
				<br>
				<ul>
					<li><a href="#wheeldelta" class="selflink">wheeldelta</a><br>
						<ul>
							<li>The wheel roll delta as normalized value.</li>
							<li>Typically +3 or -3 on the most systems.</li>
						</ul>
					</li>
					<li><a href="#wheeldelta_raw" class="selflink">wheeldelta_raw</a>
						<ul>
							<li>The 'raw' unscaled and non-rounded delta values of the mouse wheel rotation.
								The normal <a href="#wheeldelta">wheeldelta</a> values are limited to integer values and 
								can be too inaccurate for some usages (plugins).
							</li>
						</ul>
					</li>
					<li><a href="#wheeldelta_touchscale" class="selflink">wheeldelta_touchscale</a>
						<ul>
							<li>
								On touch devices there is no mouse-wheel, but the <a href="xml.html#events.onmousewheel">onmousewheel</a> event
								will be also called on  2-finger zooming gestures.
							</li>
							<li>
								The <a href="#wheeldelta_touchscale" class="selflink">wheeldelta_touchscale</a> variable will provide detailed
								information about the relative touch scale / zoom.<br>
							</li>
							<li>
								<i>Note - only available on touch devices!<br>On other devices the value will be always 0.0.</i>
							</li>
						</ul>
					</li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="fullscreen"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#fullscreen" class="selflink">fullscreen</a></th>
			<th>Boolean</th>
			<th>false</th>
		</tr>
		<tr>
			<td colspan="4">
				The <a href="#fullscreen" class="selflink">fullscreen</a> variable can be used to check or to change the current state of the fullscreen mode.
				When the variable will be changed, then also the fullscreen mode will be changed.<br>
				<br>
				<i>Example - switch to fullscreen mode:</i>
				<pre class="prewrap">onclick="<a href="#set" class="selflink">set</a>(fullscreen,true);"</pre>
				<i>Example - switch between fullscreen and windowed mode:</i>
				<pre class="prewrap">onclick="<a href="#toggle" class="selflink">toggle</a>(fullscreen);"</pre>
				<br>
				Notes:
				<ul>
					<li class="uldd">
						Before using the fullscreen setting, it should be verified if the current browser / device actually supports
						the fullscreen mode. This can be done with the xml <a href="xml.html#devices-notes">fullscreensupport</a> devices setting
						and the <a href="actions.html#device.fullscreensupport">device.fullscreensupport</a> variable.
					</li>
					<li class="uldd">
						Due HTML5 security limitations the switching to the fullscreen mode
						will be only possible as reaction to an user input like a mouse click or a keypress!
						That means it's only possible switch to fullscreen mode in an onclick or onkeydown event!
					</li>
					<li class="uldd">
						When the HTML5 fullscreen mode is not supported by the browser (like on iOS), 
						then the fullscreen setting will only change the size of the viewer HTML element to match the size of the 
						full browser window.
						Due technical limitations this will not work from inside an &lt;iframe&gt; and can be problematic in nested HTML structures.
					</li>
					<li class="uldd">
						When trying to use the HTML5 fullscreen mode from within an <b>&lt;iframe&gt;</b>, 
						it is necessary to add the <a class="pre selflink2" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-allowfullscreen" target="_blank">allowfullscreen</a> parameter 
						to the <b>&lt;iframe&gt;</b> declaration. This tells the browser that this iframe is allowed to switch to Fullscreen mode.<br>
						<br>
						<i>Example:</i>
						<pre class="prewrap">&lt;iframe ... allowfullscreen="true"&gt;&lt;/iframe&gt;</pre>
					</li>
				</ul>
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="stagewidth"></a><a name="stageheight"></a>Variable names <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#stagewidth" class="selflink">stagewidth</a><br>
				<a href="#stageheight" class="selflink">stageheight</a>
			</th>
			<th>int<br>int</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The sizes of the current viewer window in pixels.<br>
				Get the these sizes in the <a href="xml.html#events.onresize">onresize</a> event.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="stagescale"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#stagescale" class="selflink">stagescale</a>
			</th>
			<th>Number</th>
			<th>1.0</th>
		</tr>
		<tr>
			<td colspan="4">
				A global overall scaling setting.<br>
				The stagescale setting will scale all krpano elements and sizes.<br>
				<br>
				By scaling all elements, the krpano stage-size (screen-size / resolution) itself will be scaled inversely by this value - 
				e.g. a value of 0.5 will scale-down all elements by 50% while increasing the internal stage-sizes by 200% at the same time.<br>
				
				
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="browser.useragent"></a><a name="browser.platform"></a><a name="browser.location"></a><a name="browser.domain"></a><a name="browser.protocol"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#browser.useragent" class="selflink">browser.useragent</a><br>
				<a href="#browser.platform"  class="selflink">browser.platform</a><br>
				<a href="#browser.location"  class="selflink">browser.location</a><br>
				<a href="#browser.domain"    class="selflink">browser.domain</a><br>
				<a href="#browser.protocol"  class="selflink">browser.protocol</a><br>
			</th>
			<th>String<br>String<br>String<br>String<br>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Information about the browser.<br>
				
				<ul>
					<li>
						<a href="#browser.useragent" class="pre selflink2">browser.useragent</a><br>
						The user-agent string of the browser.<br>
						The same as <a href="http://www.w3schools.com/jsref/prop_nav_useragent.asp" target="_blank">navigator.userAgent</a> in Javascript.<br>
					</li>
					<li><a href="#browser.platform"  class="pre selflink2">browser.platform</a><br>
						This will be the 'platform' string of the browser.<br>
						The same as <a href="http://www.w3schools.com/jsref/prop_nav_platform.asp" target="_blank">navigator.platform</a> in Javascript.<br>
					</li>
					<li><a href="#browser.location"  class="pre selflink2">browser.location</a><br>
						The full url of the current webpage.<br>
					</li>
					<li><a href="#browser.domain"    class="pre selflink2">browser.domain</a><br>
						The domain name of the current webpage (without leading 'www.' if there is one).<br>
					</li>
					<li><a href="#browser.protocol"    class="pre selflink2">browser.protocol</a><br>
						The protocol part of the current webpage url, e.g. 'http', 'https' or 'file'.<br>
					</li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device"></a><a name="device.desktop"></a><a name="device.tablet"></a><a name="device.mobile"></a><a name="device.normal"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.desktop" class="selflink">device.desktop</a><br>
				<a href="#device.tablet" class="selflink">device.tablet</a><br>
				<a href="#device.mobile" class="selflink">device.mobile</a><br>
				<a href="#device.domain" class="selflink">device.normal</a><br>
			</th>
			<th>Boolean<br>Boolean<br>Boolean<br>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Basic device type detection: <span class="pre">device.desktop</span>, <span class="pre">device.tablet</span> or <span class="pre">device.mobile</span>.<br>
				Note - only one of these three can be set to true!<br>
				<br>
				The <span class="pre">device.normal</span> device is a combined setting and true for desktop and tablet devices.
				This can be used to apply the same to the 'larger' desktop and tablet devices and used as opposite to 'smaller' mobile devices.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.mobilevr"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.mobilevr" class="selflink">device.mobilevr</a><br>
			</th>
			<th>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				For detecting dedicated VR Browsers, that means Browsers that are itself also running in VR,
				e.g. the Meta Quest Browser (Oculus Browser) or Firefox Reality for the Meta Quest (Oculus Quest) or 
				Safari inside an Apple Vision headset.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.css3d"></a><a name="device.webgl"></a><a name="device.webgl2"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.css3d" class="selflink">device.css3d</a><br>
				<a href="#device.webgl" class="selflink">device.webgl</a><br>
				<a href="#device.webgl2" class="selflink">device.webgl2</a><br>
			</th>
			<th>Boolean<br>Boolean<br>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Detect the support of the basic 3D rendering technologies available in the Browser:
				<ul>
					<li><span class="pre">device.css3d</span> - Are <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transforms/Using_CSS_transforms#3d_specific_css_properties" target="_blank">CSS 3D-transforms</a> available. Should be always true.</li>
					<li><span class="pre">device.webgl</span> - Is <a href="https://en.wikipedia.org/wiki/WebGL" target="_blank">WebGL</a> available (1.0 or 2.0).</li>
					<li><span class="pre">device.webgl2</span> - Is <a href="https://en.wikipedia.org/wiki/WebGL" target="_blank">WebGL 2.0</a> available.</li>
				</ul>
				<br>
				Note - see also the <a href="embedpano.html#webgl">webgl</a> embedding setting.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.multiressupport"></a><a name="device.panovideosupport"></a><a name="device.fullscreensupport"></a><a name="device.depthmapsupport"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.multiressupport" class="selflink">device.multiressupport</a><br>
				<a href="#device.panovideosupport" class="selflink">device.panovideosupport</a><br>
				<a href="#device.depthmapsupport" class="selflink">device.depthmapsupport</a><br>
				<a href="#device.fullscreensupport" class="selflink">device.fullscreensupport</a><br>
			</th>
			<th>Boolean<br>Boolean<br>Boolean<br>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Feature detection:
				<ul>
					<li><span class="pre">device.multiressupport</span> - Is using multi-resolution images possible?
					</li>
					<li><span class="pre">device.panovideosupport</span> - Is using videos as panoramic image possible? Depends on WebGL and if using videos as texture is possible.
					</li>
					<li><span class="pre">device.depthmapsupport</span> - 
						Is using <a href="xml.html#image.depthmap">3D Depthmaps</a> possible. Depends on certain WebGL features.
					</li>
					<li><span class="pre">device.fullscreensupport</span> - 
						Is the <a href="#fullscreen">HTML5 fullscreen mode</a> be supported by the Browser and is it available?
						The availability inside <a href="#fullscreen">iframes</a> depends on the <a href="#fullscreen">allowfullscreen</a> setting!
					</li>
				</ul>
				<br>
				All settings (except fullscreensupport, which depends on iOS and iframe restrictons) should be available on all modern devices and browsers.
				Only very old devices and browsers might fail here.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.pixelratio"></a><a name="device.fractionalscaling"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.pixelratio" class="selflink">device.pixelratio</a><br>
				<a href="#device.fractionalscaling" class="selflink">device.fractionalscaling</a><br>
			</th>
			<th>Number<br>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				<ul>
					<li><span class="pre">device.pixelratio</span> - The physical pixels to CSS pixels ratio.<br>
						Same as <a hreF="https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio" target="_blank">window.devicePixelRatio</a>.
					</li>
					<li><span class="pre">device.fractionalscaling</span> - Is pixelratio a fractional value?
						Can be used to workaround layout problems on such devices or when using fractional page-zooms.
					</li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.maxtexturesize"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.maxtexturesize" class="selflink">device.maxtexturesize</a><br>
			</th>
			<th>Number</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The max. WebGL texture size (width or height in pixels) of the device.<br>
				Should be at least 2048.<br>
				<br>
				This can be relevant for hotspot images.
				Larger images will get automatically down-scaled.
				To detect or avoid this case, this value can be checked.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.touchsupport"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.touchsupport" class="selflink">device.touchsupport</a><br>
			</th>
			<th>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Detect if the browser technically provides touch-support - but that doesn't mean that there is be actually a touchscreen.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.mouse"></a><a name="device.touch"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.mouse" class="selflink">device.mouse</a><br>
				<a href="#device.touch" class="selflink">device.touch</a><br>
			</th>
			<th>Boolean<br>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Detect mouse and/or touch support.<br>
				<br>
				Note - mouse and touch can be set at the same time when the device is supporting both (e.g. desktop devices with touch-screens).<br>
				<br>
				Note - in recent browsers, it is no longer possible to detect if a desktop- or laptop-system has a touchscreen and touchsupport.
				In such case the device.touch value will be false, but <a href="#device.touchsupport">touchsupport</a> could be still available.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.istouchevent"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.istouchevent" class="selflink">device.istouchevent</a><br>
			</th>
			<th>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				An interactive setting to detect if the current user-interaction event (ondown, onup, onclick, mouse-moving, dragging, ...) 
				was caused by a touch or a mouse input.<br>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="device.iframe"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.iframe" class="selflink">device.iframe</a><br>
			</th>
			<th>Boolean</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Detect if inside an iframe.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2">
			<a name="device.ios"></a>
			<a name="device.iosversion"></a>
			<a name="device.iosdesktop"></a>
			<a name="device.iphone"></a>
			<a name="device.ipad"></a>
			<a name="device.applevision"></a>
			<a name="device.android"></a>
			<a name="device.androidversion"></a>
			<a name="device.windows"></a>
			<a name="device.mac"></a>
			<a name="device.linux"></a>
			Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.ios" class="selflink">device.ios</a><br>
				<a href="#device.iosversion" class="selflink">device.iosversion</a><br>
				<a href="#device.iosdesktop" class="selflink">device.iosdesktop</a><br>
				<a href="#device.iphone" class="selflink">device.iphone</a><br>
				<a href="#device.ipad" class="selflink">device.ipad</a><br>
				<a href="#device.applevision" class="selflink">device.applevision</a><br>
				<a href="#device.android" class="selflink">device.android</a><br>
				<a href="#device.androidversion" class="selflink">device.androidversion</a><br>
				<a href="#device.windows" class="selflink">device.windows</a><br>
				<a href="#device.mac" class="selflink">device.mac</a><br>
				<a href="#device.linux" class="selflink">device.linux</a><br>
			</th>
			<th>Boolean<br>
				Number<br>
				Boolean<br>
				Boolean<br>
				Boolean<br>
				Boolean<br>
				Boolean<br>
				Number<br>
				Boolean<br>
				Boolean<br>
				Boolean<br>
			</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Device / System detection:<br>
				<ul>
					<li><span class="pre">device.ios</span> - Is an iOS device?</li>
					<li><span class="pre">device.iosversion</span> - The iOS version as Number.</li>
					<li><span class="pre">device.iosdesktop</span> - Use the iOS desktop mode?</li>
					<li><span class="pre">device.iphone</span> - Is an iPhone?</li>
					<li><span class="pre">device.ipad</span> - Is an iPad?</li>
					<li><span class="pre">device.applevision</span> - Is an Apple Vision Headset?</li>
					<li><span class="pre">device.android</span> - Is an Android device?</li>
					<li><span class="pre">device.androidversion</span> - The Android version as Number.</li>
					<li><span class="pre">device.windows</span> - Is a Windows system?</li>
					<li><span class="pre">device.mac</span> - Is a Mac OSX system?</li>
					<li><span class="pre">device.linux</span> - Is a Linux system?</li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2">
			<a name="device.chrome"></a>
			<a name="device.chromeversion"></a>
			<a name="device.firefox"></a>
			<a name="device.firefoxversion"></a>
			<a name="device.ie"></a>
			<a name="device.ieversion"></a>
			<a name="device.edge"></a>
			<a name="device.newedge"></a>
			<a name="device.safari"></a>
			<a name="device.safariversion"></a>
			Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#device.chrome" class="selflink">device.chrome</a><br>
				<a href="#device.chromeversion" class="selflink">device.chromeversion</a><br>
				<a href="#device.firefox" class="selflink">device.firefox</a><br>
				<a href="#device.firefoxversion" class="selflink">device.firefoxversion</a><br>
				<a href="#device.ie" class="selflink">device.ie</a><br>
				<a href="#device.ieversion" class="selflink">device.ieversion</a><br>
				<a href="#device.edge" class="selflink">device.edge</a><br>
				<a href="#device.newedge" class="selflink">device.newedge</a><br>
				<a href="#device.safari" class="selflink">device.safari</a><br>
				<a href="#device.safariversion" class="selflink">device.safariversion</a><br>
			</th>
			<th>Boolean<br>
				Number<br>
				Boolean<br>
				Number<br>
				Boolean<br>
				Number<br>
				Boolean<br>
				Boolean<br>
				Boolean<br>
				Number<br>
			</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				Browser and Browser-version detection:<br>
				<ul>
					<li><span class="pre">device.chrome</span> - Is Chrome or a Chrome/Chromium-based browser?</li>
					<li><span class="pre">device.chromeversion</span> - The Chrome version as Number.</li>
					<li><span class="pre">device.firefox</span> - Is Firefox or a Gecko-based browser?</li>
					<li><span class="pre">device.firefoxversion</span> - The Firefox version as Number.</li>
					<li><span class="pre">device.ie</span> - Is the Interet-Explorer or the (old) Microsoft Edge browser?</li>
					<li><span class="pre">device.ieversion</span> - The Interet-Explorer or (old) Microsof Edge version as Number.</li>
					<li><span class="pre">device.edge</span> - Is the (old) Microsoft Edge browser?</li>
					<li><span class="pre">device.newedge</span> - Is the new Chrome-based Edge browser?
						The <a href="#device.chrome">device.chrome</a>
						and <a href="#device.chromeversion">device.chromeversion</a> settings will be also set in this case.
					</li>
					<li><span class="pre">device.safari</span> - Is the Safari browser?</li>
					<li><span class="pre">device.safariversion</span> - The Safari version as Number.</li>
				</ul>
			</td>
		</tr>
	
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="timertick"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#timertick" class="selflink">timertick</a></th>
			<th>Number</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <a href="#timertick">timertick</a> variable returns the number of milliseconds that have elapsed since the viewer has started
				(1000 milliseconds = 1 second).
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="lastuserinteraction"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#lastuserinteraction" class="selflink">lastuserinteraction</a></th>
			<th>Number</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <a href="#timertick">timertick</a> of the last user interaction.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="lastviewinteraction"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#lastviewinteraction" class="selflink">lastviewinteraction</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				A String showing the type of the last user interaction with the view.<br>
				Will be set in the <a href="xml.html#events.onviewinteraction">onviewinteraction</a> event.<br>
				<br>
				Possible values: 
				<ul>
					<li><span class="pre">keydown</span> <span class="pre">keyup</span></li>
					<li><span class="pre">mousedown</span> <span class="pre">mousedrag </span> <span class="pre">mouseup</span></li>
					<li><span class="pre">mousewheel</span></li>
					<li><span class="pre">touchstart</span> <span class="pre">touchmove</span> <span class="pre">touchend</span></li>
					<li><span class="pre">multitouch</span></li>
				</ul>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="isidle"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#isidle" class="selflink">isidle</a></th>
			<th>Boolean</th>
			<th>false</th>
		</tr>
		<tr>
			<td colspan="4">
				Are the currently no <a href="xml.html#autorotate.interruptionevents">user-interactions</a>?<br>
				This state will change on the <a href="xml.html#events.onidle">onidle</a> / <a href="xml.html#events.onidleend">onidleend</a> events.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="blendtime"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#blendtime" class="selflink">blendtime</a></th>
			<th>Number</th>
			<th>0.0</th>
		</tr>
		<tr>
			<td colspan="4">
				The time that was set in the <a href="#loadpano.blend" class="pre selflink2">BLEND(blendtime)</a> parameter
				of the preceding loadpano/loadscene/load... call.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="have3dtransition"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#have3dtransition" class="selflink">have3dtransition</a></th>
			<th>Boolean</th>
			<th>false</th>
		</tr>
		<tr>
			<td colspan="4">
				A variable to check if a <a href="#set3dtransition">3D transition</a> is currently active.
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="random"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#random" class="selflink">random</a></th>
			<th>Number</th>
			<th>0.0 - 1.0</th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>random</b> variable returns a random number in the range 0.0 to 1.0.<br>
				<br>
				Example - how to get an integer random value in the range 1 - 10:<br>
				<pre class="prewrap">mul(val, random, 9);
add(val, 1);
roundval(val);
trace('random value=',val);</pre>
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="hlookat_moveforce"></a><a name="vlookat_moveforce"></a><a name="fov_moveforce"></a>Variable names</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#hlookat_moveforce" class="selflink">hlookat_moveforce</a><br>
				<a href="#vlookat_moveforce" class="selflink">vlookat_moveforce</a><br>
				<a href="#fov_moveforce" class="selflink">fov_moveforce</a>
			</th>
			<th>Number<br>Number<br>Number</th>
			<th>0.0<br>0.0<br>0.0</th>
		</tr>
		<tr>
			<td colspan="4">
				These variables can be used to set a force to move the view / the pano.<br>
				Their main usage is for keyboard or button movement control.<br>
				<br>
				When they will be set to a value other than 0.0, the view will start slowly accelerating (controlled by
				<a href="xml.html#control.keybaccelerate">control.keybaccelerate</a>) and then move with a maximum speed
				(controlled by <a href="xml.html#control.keybspeed">control.keybspeed</a>) until they will be set back to 0.0, then
				the movement will slow down (controlled by <a href="xml.html#control.keybfriction">control.keybfriction</a>).
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="multireslevel"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#multireslevel" class="selflink">multireslevel</a></th>
			<th>int</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>multireslevel</b> variable returns the current multi-resolution level<br> (0&nbsp;-&nbsp;image.level.count).<br>
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="lockmultireslevel"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a name="lockmultireslevel" href="#lockmultireslevel" class="selflink">lockmultireslevel</a></th>
			<th>String</th>
			<th>-1</th>
		</tr>
		<tr>
			<td colspan="4">
				Lock the automatic multi-resolution level selection to a fixed level.<br>
				Set lockmultireslevel to "current" to lock the level to the current level.
				To release the level locking set lockmultireslevel back to "-1".
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="downloadlockedlevel"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#downloadlockedlevel" class="selflink">downloadlockedlevel</a></th>
			<th>Boolean</th>
			<th>false</th>
		</tr>
		<tr>
			<td colspan="4">
				When set to true, the currently locked level will be downloaded completely.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="progress.progress"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#progress.progress" class="selflink">progress.progress</a></th>
			<th>Number</th>
			<th>0.0</th>
		</tr>
		<tr>
			<td colspan="4">
				The current loading progress as linear value from 0.0 to 1.0.<br> 
				<br>
				It could be used to create custom loading animations - e.g.
				use the <a href="xml.html#events.onxmlcomplete">onxmlcomplete</a> event for starting the loading animation,
				and the <a href="xml.html#events.onloadcomplete">onloadcomplete</a> event for stopping it.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="network.viewerpath"></a><a name="network.htmlpath"></a><a name="network.firstxmlpath"></a><a name="network.currentxmlpath"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#network.viewerpath" class="selflink">network.viewerpath</a><br>
				<a href="#network.htmlpath" class="selflink">network.htmlpath</a><br>
				<a href="#network.firstxmlpath" class="selflink">network.firstxmlpath</a><br>
				<a href="#network.currentxmlpath" class="selflink">network.currentxmlpath</a><br>
			</th>
			<th>String<br>String<br>String<br>String</th>
			<th><br><br><br><br></th>
		</tr>
		<tr>
			<td colspan="4">
				Path to several locations (the path only, without filename):
				<ul>
					<li><b>viewerpath</b> - Path to the krpano viewer file &rArr; <span class="pre">%VIEWER%</span> <a href="xml.html#url">url</a>-placeholder.</li>
					<li><b>htmlpath</b> - Path to HTML file &rArr; <span class="pre">%HTMLPATH%</span> <a href="xml.html#url">url</a>-placeholder.</li>
					<li><b>firstxmlpath</b> - Path to first loaded xml file &rArr; <span class="pre">%FIRSTXML%</span> <a href="xml.html#url">url</a>-placeholder.</li>
					<li><b>currentxmlpath</b> - Path to current xml file &rArr; <span class="pre">%CURRENTXML%</span> <a href="xml.html#url">url</a>-placeholder.</li>
				</ul>
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xml.url"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#xml.url" class="selflink">xml.url</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>xml.url</b> variable contains the path/url of the currently loaded xml file.<br>
				When loading a <a href="#loadscene">scene</a> or a <a href="#loadxml">xml-string</a> the value of url will be null.
				
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xml.content"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#xml.content" class="selflink">xml.content</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>xml.content</b> variable contains the xml-content of the last loaded pano.<br>
				When a <a href="xml.html#scene" class="selflink">&lt;scene&gt;</a> gets loaded or
				<a href="#loadxml">loadxml()</a> be used, then the variable contains only the scene-xml-code or the given loadxml() xml-code.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xml.fileurl"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#xml.fileurl" class="selflink">xml.fileurl</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>xml.fileurl</b> variable contains the path/url of the currently loaded xml file.<br>
				When loading a <a href="#loadscene">scene</a> or a <a href="#loadxml">xml-string</a> this value will not change.
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xml.filecontent"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#xml.filecontent" class="selflink">xml.filecontent</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>xml.filecontent</b> variable contains the content of the last loaded xml file.<br>
				The content will not change when loading a new pano via <a href="#loadscene">loadscene()</a> or <a href="#loadxml">loadxml()</a>.
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xml.scene"></a><a name="xml.sceneindex"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2">
				<a href="#xml.scene" class="selflink">xml.scene</a><br>
				<a href="#xml.sceneindex" class="selflink">xml.sceneindex</a>
			</th>
			<th>String<br>int</th>
			<th>null<br>-1</th>
		</tr>
		<tr>
			<td colspan="4">
				The name and index of the currently loaded scene.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="xml.view"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#xml.view" class="selflink">xml.view</a></th>
			<th>Object</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				A backup of the values from the initial <a href="xml.html#view" class="selflink">&lt;view&gt;</a> element defined in the current xml or scene.
				E.g. get the initial <span class="presyntax_inline">view.hlookat</span> value via <span class="presyntax_inline">xml.view.hlookat</span>.<br>
				<br>
				<i>
					Note - only the values that were defined in the xml are stored here, no default values.
					That means before using a value from that object, it would be necessary to check if these variables actually exists 
					- e.g. via <span class="presyntax_inline">if(xml.view.fov !== null, ...);</span>.
				</i>
			</td>
		</tr>
		
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="hoveringelement"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#hoveringelement" class="selflink">hoveringelement</a></th>
			<th>Object</th>
			<th>null</th>
		</tr>
		<tr>
			<td colspan="4">
				The top-most element (layer or hotspot) where the mouse cursor is currently hovering over it.
				Or null when there is no element.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="pressedelement"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#pressedelement" class="selflink">pressedelement</a></th>
			<th>Object</th>
			<th>null</th>
		</tr>
		<tr>
			<td colspan="4">
				The layer or hotspot element on which the mouse or touch is currently pressed down
				- or null when there is no element.
			</td>
		</tr>

		<tr class="xmlattrdocdesc"><td colspan="2"><a name="lasterror"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#lasterror" class="selflink">lasterror</a></th>
			<th>String</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>lasterror</b> variable contains the last error message when an error had happened.
				To get this variable the <a href="xml.html#events.onloaderror">onloaderror</a> event must be used.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="embeddingparameters"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#embeddingparameters" class="selflink">embeddingparameters</a></th>
			<th>Object</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <a href="embedpano.html#embeddingparameters">Embedding Parameters</a> Object that was given on the 
				<a href="embedpano.html#embedpano">embedpano()</a> call.
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="functions"></a><a name="inlinefunctions"></a>Variable name</td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#functions" class="selflink">functions</a></th>
			<th>Object</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The <b>functions</b> variable is a Javascript Object that stores all functions 
				that are available as as <a href="#expression.functions">Expression Functions</a>
				inside krpano <a href="#expressions">expressions</a>.<br>
				<br>
				With the object it is possible to extend krpano with additional expression functions by 
				adding them to that object.<br>
				<br>
				Example:
				<pre class="prewrap">&lt;action name="extendkrpano" type="Javascript" autorun="preinit"&gt;
  krpano.functions.capitalize = function(s)
  {
    return s.charAt(0).toUpperCase() + s.slice(1);
  }
&lt;/action&gt;

&lt;action name="test" autorun="onstart"&gt;
  // Outputs: 'Test'
  <a href="#trace" class="selflink2">trace</a>(<a href="#calc" class="selflink2">calc</a>( capitalize('test') ));
&lt;/action&gt;
</pre>
			</td>
		</tr>
		
		<tr class="xmlattrdocdesc"><td colspan="2"><a name="actions.actioncaller"></a>Variable name <span class="readonly">(read only)</span></td><td>type</td><td>default value</td></tr>
		<tr>
			<th colspan="2"><a href="#actions.actioncaller" class="selflink">actions.actioncaller</a></th>
			<th>Object</th>
			<th></th>
		</tr>
		<tr>
			<td colspan="4">
				The layer or hotspot object that has called the current action / function.
			</td>
		</tr>

	</table>


</div>
</div>


<br>
<br>
<h2><a href="#detailsactions" name="detailsactions" class="selflink">Action Documentations</a></h2>









<div class="xmlnodedesc">
<a name="def" class="docu_anchor"></a>
<pre><a href="#def" class="selflink">def(variable, type, <span class="optargs">value</span>)</a></pre>
<div class="xmlnodetext">
	Define a new <b>variable</b> with a specific <b>type</b> and optionally set it to the given <b>value</b>.<br>
	<br>
	When no <b>value</b> will be given and the <b>variable</b> already exists, then the variable with its current value will be converted to the given <b>type</b>.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b><br>
			<ul>
				<li>The variable name.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>type</b><br>
			<ul>
				<li>The type of the variable.</li>
				<li>Available types:<br>
					<ul>
						<li><span class="pre">boolean</span> - true or false</li>
						<li><span class="pre">number</span> - a numeric value</li>
						<li><span class="pre">integer</span> or <span class="pre">int</span> - an integer value</li>
						<li><span class="pre">uint</span> - an unsigned integer value</li>
						<li><span class="pre">string</span> - text characters</li>
						<li><span class="pre">object</span> - a Javascript Object with custom properties</li>
						<li><span class="pre">array</span> - a <a href="#valuearrays">Javascript-Array / Value-Array</a></li>
					</ul>
				</li>
			</ul>
		</li>
		<li><b>value</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>The new value for this variable.</li>
				<li>When no value will be given and the variable already exsits, 
					then the variable with its current value will be converted to the given type.
				</li>
				<li>When no value will be given and the variable doesn't exsits, then
					these the default values are used: boolean=false, number=NaN (Not a Number), integer=0, string=null.
				</li>
				<li>When the type is <span class="pre">object</span> or <span class="pre">array</span>, then either no value must be set (to create an empty Object or Array)
					or a String with the Object properties or Array values (in Javascript syntax).
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('defexamples');"><div class="ico_example"></div> Examples</div>
		<div id="defexamples" class="xmlexamplecontent">
			<pre>def(b, boolean, true);</pre>
			<pre>def(n, number, 123.456);</pre>
			<pre>def(s, string, 'text');</pre>
			<pre>def(obj, object);<br>def(obj.x, number, 0.0);<br>def(obj.y, number, 0.0);</pre>
			<pre>def(obj, object, "{num:123, str:'hello'}");</pre>
			<pre>def(obj, array, "[1,2,3,4,5]");</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="set" class="docu_anchor"></a>
<pre><a href="#set" class="selflink">set(variable, value)</a></pre>
<pre><a href="#set" class="selflink">set(object, variable:type=value, variable:type=value, <span class="optargs">...</span>)</a></pre>
<div class="xmlnodetext">
	Set a <b>variable</b> to the a <b>value</b>.<br>
	<br>
	The set() action was two calling / usage possibilities:
	<ul>
		<li>When called with <u>two arguments</u>:
			<ul>
				<li>This is a normal set of one variable to a value.</li>
			</ul>
		</li>
		<li>When called with <u>three or more arguments</u>:
			<ul>
				<li>This is a multiple-set of several variables at once.</li>
				<li>Here the variables will be set or added to an object.</li>
				<li>Optionally it will be also possible to specify the type of the variable.</li>
			</ul>
		</li>
	</ul>
	<br>
	Parameters:<br>
	<ul>
		<li><b>object</b> <span class="smallcomment">(optionally - for the three or more arguments call)</span><br>
			<ul>
				<li>The object for the multiple set call - at this object the variables will be set.</li>
				<li>When the object doesn't exists, it will be created.</li> 
				<li>To define variables at a specific scope, it would be e.g. possible to use the <a href="#global">global</a> or <a href="#local">local</a> objects here.</li>
			</ul>
		</li>
		<li><b>variable</b><br>
			<ul>
				<li>The variable name.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>type</b> <span class="smallcomment">(optionally - for the three or more arguments call)</span><br>
			<ul>
				<li>The type of the variable.</li>
				<li>Available types:<br>
					<ul>
						<li><b>boolean</b> - true or false</li>
						<li><b>number</b> - a numeric value</li>
						<li><b>integer</b> or <b>int</b> - an integer value</li>
						<li><b>uint</b> - an unsigned integer value</li>
						<li><b>string</b> - text characters</li>
					</ul>
				</li>
			</ul>
		</li>
		<li><b>value</b><br>
			<ul>
				<li>The new value for this variable.</li>
				<li>When the variable already exists, then the value will be converted to the type of that variable (when no explicit type was be defined).<br>
				<li>To get here the value of other variables use
					<ul>
						<li><a href="#get" class="selflink2 pre">get(variable)</a> or</li>
						<li><a href="#calc" class="selflink2 pre">calc(expression)</a>.</li>
					</ul>
				</li>
				<li>To <a href="#link">link</a> here to variables use &nbsp;<span class="smallcomment">(for the three or more arguments call only)</span>
					<ul>
						<li><a href="#link" class="selflink2 pre">link(variable)</a> or</li>
						<li><a href="#link" class="selflink2 pre">link(var1,var2:expression)</a>.</li>
					</ul>
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('setexamples');"><div class="ico_example"></div> Examples</div>
		<div id="setexamples" class="xmlexamplecontent">
			Normal set:
			<pre>set(var1, 'hello');</pre>
			<pre>set(var2, get(var1));</pre>
			<pre>set(fullscreen, true);</pre>
			<pre>set(layer[p1].visible, false);</pre>
			<pre>set(hotspot[h1].scale, 2.5);</pre>
			<pre>set(contextmenu.item[0].caption, 'hello item');</pre>
			<pre>set(events.onxmlcomplete, null);</pre>
			Multiple set:
			<pre>set(layer[p1], visible=false, alpha=0.5);</pre>
			<pre>set(hotspot[hs1],
    type='text',
    ath=0.0,
    atv=0.0,
    html='Test Text',
    css='text-align:center',
    bg=false
);</pre>
			<pre>set(global,
    test='Test text',
    havesomething:boolean=true,
    var2:string=get(var1),
    value:number=calc(1 + 2*3)
);</pre>
<pre>set(style[skin_thumb],
    width=link(skin.thumbs_width),
    height=link(skin.thumbs_height:skin.thumbs_height + 30),
    bgborder=0
);</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="get" class="docu_anchor"></a>
<pre style="font-weight:normal;color:gray;">action( <a href="#get" class="selflink">get(variable)</a>, ... )  <span class="smallcomment">or</span>  action( <a href="#get" class="selflink">*variable</a>, ... )</pre>
<pre style="font-weight:normal;color:gray;">array[ <a href="#get" class="selflink">get(variable)</a> ]  <span class="smallcomment">or</span>  array[ <a href="#get" class="selflink">*variable</a> ]</pre>
<pre style="font-weight:normal;color:gray;">&lt;xmlelement attribute="<a href="#get" class="selflink">get:variable</a>" ... /&gt;</pre>
<div class="xmlnodetext">
	Resolves the <b>variable</b> to its value.<br>
	<br>
	The <a href="#get" class="selflink2 pre">get(var)</a> action is a special action that can be only used as parameter
	when calling other actions or  when accessing array elements.<br>
	<br>
	As shorter syntax also just <span class="pre">*var</span> can be used.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>Any variable.</li>
				<li>When the variable doesn't exists, get() will return null.</li>
			</ul>
		</li>
	</ul>
	<br>
	<i>
		Note - some actions are automatically trying to resolve their given parameters to their values.
		For these actions using get(var) would be not necessary.
	</i><br>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('getexamples');"><div class="ico_example"></div> Examples</div>
		<div id="getexamples" class="xmlexamplecontent">
			<pre>set(dstvar, get(srcvar));</pre>
			<pre>looktohotspot(get(name));</pre>
			<pre>lookto(get(h), get(v), get(f));</pre>
			<pre>showtext(get(msg));</pre>
			<pre>tween(var,get(dstval));</pre>
			<pre>set(pic, spot1);
set(hotspot[get(pic)].visible, false);</pre>
			<pre>trace('xyz=', xyz, ' get(xyz)=', get(xyz));</pre>
			<pre>txtadd(msg, 'fov=', get(view.fov));</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="calc" class="docu_anchor"></a>
<a href="#calc" class="selflink"><pre>calc(variable, expression);</pre></a>
<pre style="font-weight:normal;color:gray;">action( <a href="#calc" class="selflink">calc(expression)</a>, ... )  <span class="smallcomment">or</span>  action( <a href="#calc" class="selflink">(expression)</a>, ... )</pre>
<pre style="font-weight:normal;color:gray;">array[ <a href="#calc" class="selflink">calc(expression)</a> ]  <span class="smallcomment">or</span>  array[ <a href="#calc" class="selflink">(expression)</a> ]</pre>
<pre style="font-weight:normal;color:gray;">&lt;xmlelement attribute="<a href="#calc" class="selflink">calc:expression</a>" ... /&gt;</pre>
<div class="xmlnodetext">
	Calculate / evaluate / resolve the <a href="#expressions">expression</a> to its value.<br>
	<br>
	The <a href="#calc" class="selflink">calc(expression)</a> action is a special action that can be only used as parameter
	when calling other actions or  when accessing array elements.<br>
	<br>
	As shorter syntax also just <span class="pre">(expression)</span> can be used.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b><br>
			<ul>
				<li>The variable where the result will be stored.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>expression</b><br>
			<ul>
				<li>The mathematical or logical <a href="#expressions">expression</a>.</li>
			</ul>
		</li>
	</ul>
	
	<br>
	<i>
	Note:
		When using a calc(variable, expression) call in a 'callback' parameter (e.g. in an <a href="#if">if</a> or <a href="#delayedcall">delayedcall</a> action),
		make sure to terminate its call with a ';' to allow differing that call to 'calc(expression)' that would resolve the expression and pass only the result
		to the called action.
	</i>
	

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('calcexamples');"><div class="ico_example"></div> Examples</div>
		<div id="calcexamples" class="xmlexamplecontent">
			<pre>set(y_new, calc(y_old - offset1 + offset2));</pre>
			<pre>set(animationtime, calc('%1' == 'instant' ? 0.0 : 0.5));</pre>
			<pre>&lt;layer url="calc:'%CURRENTXML%/skin/' + settings.image1" /&gt;</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="copy" class="docu_anchor"></a>
<pre><a href="#copy" class="selflink">copy(destination, source, <span class="optargs">typeconversion</span>)</a></pre>
<div class="xmlnodetext">
	The copy() action copies the content from one variable to the other one.<br>
	<br>
	By default this is the same as:
	<span class="presyntax_inline"><a href="#set" class="selflink2">set</a>(destination, <a href="#get" class="selflink2">get</a>(source))</span>.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>destination</b><br>
			<ul>
				<li>The destination variable.</li>
				<li>When the variable doesn't exists, it will be created.</li>
			</ul>
		</li>
		<li><b>source</b><br>
			<ul>
				<li>The source variable.</li>
				<li>When the variable doesn't exists, null will be set to the destination variable.</li>
			</ul>
		</li>
		<li><b>typeconversion</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>When set to <b>true</b> (the default):<br>
					When both variables have different types, then the value of the source variable will be converted to the type of the destination variable.
				</li>
				<li>When set to <b>false</b>:<br>
					Copy the value <u>and the type</u> of the source variable to the destination variable.
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('copyexamples');"><div class="ico_example"></div> Examples</div>
		<div id="copyexamples" class="xmlexamplecontent">
			<pre>copy(dstvar, srcvar);</pre>
			<pre>copy(cur_hlookat, view.hlookat);</pre>
<pre>copy(layer[text].x, mouse.x);
copy(layer[text].y, mouse.y);</pre>
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="swapvars" class="docu_anchor"></a>
<pre><a href="#swapvars" class="selflink">swapvars(varA, varB)</a></pre>
<div class="xmlnodetext">
	Swaps the value/content of the two given variables.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>varA</b>, <b>varB</b><br>
			<ul>
				<li>Two existing variables.</li>
			</ul>
		</li>
	</ul>
</div>
</div>



<div class="xmlnodedesc">
<a name="delete" class="docu_anchor"></a>
<pre><a href="#delete" class="selflink">delete(variable, <span class="optargs">...</span>)</a></pre>
<div class="xmlnodetext">
	Delete and remove the given variables.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variables</b><br>
			<ul>
				<li>Any variable name.</li>
				<li>It's possible to delete several variables at once - just pass several variables names (separated by a comma).</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('deleteexamples');"><div class="ico_example"></div> Examples</div>
		<div id="deleteexamples" class="xmlexamplecontent">
			<pre>set(tmp1, ...);
set(tmp2, ...);
... do something ...
delete(tmp1, tmp2);
</pre>
		</div>
	</div>

</div>
</div>



<div class="xmlnodedesc">
<a name="if" class="docu_anchor"></a>
<a name="ifnot"></a>
<span class="smallcomment">2 or 3 parameter call:</span>
<a href="#if"    class="selflink"><pre>if(condition, then-actions, <span class="optargs">else-actions</span>)</pre></a>
<span class="smallcomment">4 or more parameter call:</span>
<a href="#if"    class="selflink"><pre>if(
   condition, then-actions,
   else-if-condition, then-actions,
   else-if-condition, then-actions,
   ...
   else-actions
)</pre></a>

<div class="xmlnodetext">
	The <b>if()</b> action allows conditional execution of code.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>condition</b><br>
			<ul>
				<li>A logical <a href="#expressions">expression</a>.</li>
			</ul>
		</li>

		<li><b>then-actions</b><br>
			<ul>
				<li>The actions that will be executed when the evaluation of the condition will be true.</li>
			</ul>
		</li>
		<li><b>else-actions</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>The actions that will be executed when the evaluation of the condition will be false.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('ifexamples');"><div class="ico_example"></div> Examples</div>
		<div id="ifexamples" class="xmlexamplecontent">
			<pre>if(fullscreen, fullscreensetup(), windowsetup() );</pre>
			<pre>if(fullscreen, set(layer[controls].visible, false) );</pre>
			<pre>if(i LT 10, loop(next) );</pre>
			<pre>if(var === null, set(var,0));</pre>
			<pre>if(hotspot[spot1] === null, trace(there is no spot1 hotspot));</pre>
			<pre>if((varA GT 5) AND (varA LT 10),
    trace('varA is between 5 and 10')
  );</pre>
  			<pre>if(varA AND varB AND varC, trace('all vars are true') );</pre>
			<pre>if(var1 GT var2,
    trace('condition is true');
    lookto(100,20,50);
  ,
    trace('condition is false');
    lookto(0,0,100);
  );</pre>
  			<pre>if(a*2+b GT (c+3)*1.5 OR teststring == '123', ...);</pre>
<pre>if(
    test == 1, trace('test is 1'),
    test == 2, trace('test is 2'),
    test == 3, trace('test is 3'),
    trace('test is someting else')
);</pre>

		</div>
	</div>

</div>
</div>










<div class="xmlnodedesc">
<a name="delayedcall" class="docu_anchor"></a>
<pre><a href="#delayedcall" class="selflink">delayedcall(delay, actions)</a></pre>
<pre><a href="#delayedcall" class="selflink">delayedcall(id, delay, actions)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>id = krpano.<a href="#delayedcall" class="selflink">delayedcall(delay, actions)</a></pre>
<div class="xmlnodetext">
	Calls / executes the given actions after a given time.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>id</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>An optional unique id for the delayedcall.</li>
				<li>This id can be used to stop the delayedcall by calling <a href="#stopdelayedcall">stopdelayedcall(id)</a>.</li>
				<li>When no id is given as parameter, an automatic one will be generated and returned.</li>
			</ul>
		</li>
		<li><b>delay</b><br>
			<ul>
				<li>The number of seconds to wait before executing the actions.</li>
			</ul>
		</li>
		<li><b>actions</b><br>
			<ul>
				<li>The actions to call after the delay.</li>
				<li>Can be also a Javascript Function.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('delayedcallexamples');"><div class="ico_example"></div> Examples</div>
		<div id="delayedcallexamples" class="xmlexamplecontent">
			<pre>delayedcall(5.0, hidelogo() );</pre>
			<pre>delayedcall(10, looktohotspot(spot1);loadpano(pano2.xml); );</pre>
			<pre>delayedcall(1, showtext('hello');       );
delayedcall(4, showtext('to the pano'); );</pre>
			<pre>&lt;action name="updatemousepos"&gt;
  copy(layer[cursor].x, mouse.x);
  copy(layer[cursor].y, mouse.y);
  delayedcall(0.02, updatemousepos() );
&lt;/action&gt;</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="stopdelayedcall" class="docu_anchor"></a>
<pre><a href="#stopdelayedcall" class="selflink">stopdelayedcall(id)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.<a href="#stopdelayedcall" class="selflink">stopdelayedcall(id)</a></pre>
<div class="xmlnodetext">
	Stop the <a href="#delayedcall">delayedcall</a> with the given id.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>id</b><br>
			<ul>
				<li>The id of the delayedcall that should be stopped.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('stopdelayedcallexamples');"><div class="ico_example"></div> Examples</div>
		<div id="stopdelayedcallexamples" class="xmlexamplecontent">
			<pre>&lt;events name="introimage_events"
        onnewpano="delayedcall(introimage, 5.0, hide_introimage() );"
        onremovepano="stopdelayedcall(introimage);"
        /&gt;
</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="nexttick" class="docu_anchor"></a>
<pre><a href="#nexttick" class="selflink">nexttick(actions)</a></pre>
<div class="xmlnodetext">
	Calls / executes the given actions in the next processing tick - that means after the current actions, but as soon as possible.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>actions</b><br>
			<ul>
				<li>
					The actions to call.
				</li>
			</ul>
		</li>
	</ul>
</div>
</div>




<div class="xmlnodedesc">
<a name="callwhen" class="docu_anchor"></a>
<pre><a href="#callwhen" class="selflink">callwhen(condition, actions)</a></pre>
<pre><a href="#callwhen" class="selflink">callwhen(id, condition, actions)</a></pre>
<div class="xmlnodetext">
	Calls the given actions when the condition is true or when it will become true.<br>
	When the condition is currently not true, then the callwhen() action will wait as long until the condition will become true.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>id</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>An optional unique id for the callwhen.</li>
				<li>This id can be used to stop a waiting callwhen by calling <a href="#stopcallwhen">stopcallwhen(id)</a>.</li>
			</ul>
		</li>
		<li><b>condition</b><br>
			<ul>
				<li>A logical <a href="#expressions">expression</a>.</li>
				<li>The callwhen() action will check this condition constantly every frame until it will become true.</li>
			</ul>
		</li>
		<li><b>actions</b><br>
			<ul>
				<li>The actions to call when the condition is true.</li>
				<li>Can be a krpano action-code string or a Javascript function.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('callwhenexamples');"><div class="ico_example"></div> Examples</div>
		<div id="callwhenexamples" class="xmlexamplecontent">
			<pre>callwhen(plugin[video].loaded, plugin[video].playvideo(...); );</pre>
			<pre>callwhen(plugin[maps].loaded, plugin[maps].setcenter(...); );</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="stopcallwhen" class="docu_anchor"></a>
<pre><a href="#stopcallwhen" class="selflink">stopcallwhen(id)</a></pre>
<div class="xmlnodetext">
	Stop a still waiting <a href="#callwhen">callwhen</a> with the given id.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>id</b><br>
			<ul>
				<li>The id of the callwhen that should be stopped.</li>
			</ul>
		</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="for" class="docu_anchor"></a><a name="asyncfor"></a>
<pre><a href="#for"      class="selflink">for(startactions, condition, nextactions, loopactions)</a></pre>

<div class="xmlnodetext">
	For loops.<br>
	<br>
	First the <b>startactions</b> will be called, then the <b>condition</b> be checked and when it is true -
	then the <b>loopactions</b> will be called, then the <b>nextactions</b> and then it starts checking
	the <b>condition</b> and the loop again.<br>
	
	<br>
	Parameters:<br>
	<ul>
		<li><b>startactions</b>
			<ul>
				<li>The actions that will be called / executed before the for loop starts.</li>
			</ul>
		</li>
		<li><b>condition</b>
			<ul>
				<li>A logical <a href="#expressions">expression</a>.</li>
			</ul>
		</li>
		<li><b>nextactions</b>
			<ul>
				<li>The actions that will be called / executed after one loop (after the loopaction).</li>
			</ul>
		</li>
		<li><b>loopactions</b>
			<ul>
				<li>The actions that will be repeatedly called / executed as long as the condition is true.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('forexamples');"><div class="ico_example"></div> Examples</div>
		<div id="forexamples" class="xmlexamplecontent">
			<pre>for(set(i,0), i LT 10, inc(i), trace('i=',i) );.</pre>
			<pre>for(set(i,0), i LT layer.count, inc(i), 
  trace('layer[',i,'].name=',layer[get(i)].name);
);  
</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="forall" class="docu_anchor"></a><a name="forall"></a>
<pre><a href="#forall" class="selflink">forall(array, itemvar, actions)</a></pre>
<div class="xmlnodetext">
	Loops through all elements of a <a href="#arrays">krpano Array</a>.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>array</b>
			<ul>
				<li>A <a href="#arrays">krpano Array</a>.</li>
			</ul>
		</li>
		<li><b>itemvar</b>
			<ul>
				<li>Name of the variable that will contain the Array item in the <b>actions</b> code.</li>
			</ul>
		</li>
		<li><b>actions</b>
			<ul>
				<li>The actions that will be called / executed for each item.</li>
				<li>The current Array item will be available here as <b>itemvar</b>-named variable.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('forallexamples');"><div class="ico_example"></div> Examples</div>
		<div id="forallexamples" class="xmlexamplecontent">
			<pre>forall(scene, s, trace(s.name); );</pre>
			<pre>forall(hotspot, h, h.visible=false; );</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="loop" class="docu_anchor"></a>
<a name="asyncloop" class="docu_anchor"></a>
<pre><a href="#loop" class="selflink">loop(condition, loopactions)</a></pre>
<pre><a href="#asyncloop" class="selflink">asyncloop(condition, loopactions, <span class="optargs">doneactions</span>)</a></pre>
<span class="jsactionapi">Javascript API - use a callback function:</span>
<pre><a href="#asyncloop" class="selflink">krpano.asyncloop(function(){ ...; return true; })</a></pre>
<div class="xmlnodetext">
	As long as the <b>condition</b> is true the <b>loopactions</b> will be called repeatedly.<br>
	<br>
	The normal loop() action will continue with the following actions when the loop itself is done.<br>
	<br>
	The asyncloop() will continue intermediately with the following actions and execute the 
	<b>loopactions</b> once per frame. When the async looping is finally done, then the <b>doneactions</b> will be called.<br>
	<br>
	For Javascript usage there is also a special API where a callback function can be used.
	This function will be called as long once per frame until the function returns false.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>condition</b>
			<ul>
				<li>A logical <a href="#expressions">expression</a>.</li>
				<li>Or a Javascript function that returns true (=keep looping) or false (=stop looping).</li>
			</ul>
		</li>
		<li><b>loopactions</b>
			<ul>
				<li>The actions or a Javascript function that will be repeatedly called / executed as long as the condition is true.</li>
			</ul>
		</li>
		<li><b>doneactions</b> <span class="smallcomment">(optionally, asyncloop only)</span>
			<ul>
				<li>The actions or a Javascript function that will be called when the condition becomes false and the looping stops.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('loopexamples');"><div class="ico_example"></div> Examples</div>
		<div id="loopexamples" class="xmlexamplecontent">
			<pre>ondown="asyncloop(pressed, layer[scrollarea].scrollby(+2,0) );"</pre>
			<pre>onover="asyncloop(hovering, updatemousepos(), hideinfo() );"</pre>
			<pre>asyncloop(true, framehandler() );</pre>
			Javascript Example:
			<pre>
var hs = krpano.get("hotspot[spotname]");
hs.ondown = function(){
  krpano.asyncloop(function(){
    if (hs.pressed) some_drag_hotspot_function(hs);
    return hs.pressed;
  });
};</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="renderloop" class="docu_anchor"></a>
<a name="stoprenderloop" class="docu_anchor"></a>
<pre><a href="#renderloop" class="selflink">renderloop(loopactions)</a></pre>
<pre><a href="#stoprenderloop" class="selflink">stoprenderloop()</a></pre>
<span class="jsactionapi">Javascript API - use a callback function:</span>
<pre><a href="#renderloop" class="selflink">loopid = krpano.actions.renderloop(function(){ ...; return true; })</a></pre>
<pre><a href="#stoprenderloop" class="selflink">krpano.actions.stoprenderloop(loopid)</a></pre>
<div class="xmlnodetext">
	The renderloop() action will execute the <b>loopactions</b> once every frame.<br>
	To stop the loop the stoprenderloop() action need to be called inside the <b>loopactions</b>.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>loopactions</b>
			<ul>
				<li>The actions that will be repeatedly called / executed every frame.</li>
				<li>Can be a krpano action-code string or 
					a Javascript function that returns true (=keep looping) or false (=stop looping).
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('renderloopexamples');"><div class="ico_example"></div> Examples</div>
		<div id="renderloopexamples" class="xmlexamplecontent">
			krpano-Action-Code Example:
			<pre>renderloop(
    ... do something ...
    if(...done with rendering...,
      stoprenderloop();
    );
);</pre>
			Javascript-Code Example:
			<pre>krpano.actions.renderloop(function(){
    ... do something ...
    return done_with_rendering ? false : true;
});</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="setinterval" class="docu_anchor"></a><a name="clearinterval" class="docu_anchor"></a>
<pre><a href="#setinterval" class="selflink">setinterval(id, delay, actions)</a></pre>
<pre><a href="#clearinterval" class="selflink">clearinterval(id)</a></pre>
<div class="xmlnodetext">
	Calls / executes the given actions repeatedly with a <b>delay</b> time interval between them.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>id</b><br>
			<ul>
				<li>An unique id for the interval.</li>
				<li>This <b>id</b> can be used to stop the interval by calling <a href="#clearinterval">clearinterval(id)</a>.</li>
			</ul>
		</li>
		<li><b>delay</b><br>
			<ul>
				<li>The number of seconds to wait between the actions calls.</li>
				<li>When using 0 as delay, the actions will be called once every frame.</li>
			</ul>
		</li>
		<li><b>actions</b><br>
			<ul>
				<li>
					The actions to call every <b>delay</b> seconds.
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('setintervalexamples');"><div class="ico_example"></div> Examples</div>
		<div id="setintervalexamples" class="xmlexamplecontent">
			<pre>setinterval(time, 1.0, 
    jsget(time, (new Date()).toLocaleTimeString(); );
    trace('time=',time);
  );</pre>
			<pre>&lt;events onkeydown="setinterval(get(keycode), 0.1, trace(keycode); );"
        onkeyup="clearinterval(get(keycode));"
        /&gt;</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="toggle" class="docu_anchor"></a>
<pre><a href="#toggle" class="selflink">toggle(variable)</a></pre>
<div class="xmlnodetext">
	The <b>toggle</b> action toggles the value of the given (boolean) variable between true and false.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The boolean variable that should be toggled.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('toggleexamples');"><div class="ico_example"></div> Examples</div>
		<div id="toggleexamples" class="xmlexamplecontent">
			<pre>toggle(<a href="#fullscreen" class="selflink">fullscreen</a>);</pre>
			<pre>toggle(layer[button1].visible);</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="switch" class="docu_anchor"></a>
<pre><a href="#switch" class="selflink">switch(variable)</a></pre>
<pre><a href="#switch" class="selflink">switch(variable, value1, value2, <span class="optargs">...</span>)</a></pre>
<div class="xmlnodetext">
	The <b>switch</b> action switches the value of the given variable between / through several states.
	Every time when the switch action will be called the value will be switched / changed.<br>
	<br>
	When only the variable itself without value parameters will be given, then the variable will
	be switched between true and false.<br>
	<br>
	When there are two or more values given as parameters, then the variable will switch through all
	the values (starting from the current value and then to right and then starting over again at the end).<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The variable that should be switched / changed.</li>
			</ul>
		</li>
		<li><b>value1, value2, ...</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The switch-through values for this variable.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('switchexamples');"><div class="ico_example"></div> Examples</div>
		<div id="switchexamples" class="xmlexamplecontent">
			<pre>switch(fullscreen);</pre>
			<pre>switch(layer[button1].visible);</pre>
			<pre>switch(layer[button1].alpha, 1.0, 0.5);</pre>
			<pre>switch(layer[child].parent, button1, button2, button3);</pre>
			<pre>switch(destpos, -100, 0, +100); tween(y,get(destpos));</pre>
		</div>
	</div>

</div>
</div>















<div class="xmlnodedesc">
<a name="break" class="docu_anchor"></a>
<pre><a href="#break" class="selflink">break()</a></pre>
<div class="xmlnodetext">
	<ul>
		<li>Break / stop the execution of action calls from the current flow and the also the action calls from one nesting level up
			(e.g. when called inside an if() call then also the flow outside that if will be stopped).</li>
		<li>When used inside a <a href="#for">for()</a> or <a href="#loop">loop()</a> loop, the break() call will also stop that loop.</li>
	</ul>
</div>
</div>



<div class="xmlnodedesc">
<a name="exitcall" class="docu_anchor"></a>
<pre><a href="#exitcall" class="selflink">exitcall()</a></pre>
<div class="xmlnodetext">
	<ul>
		<li>Directly exit / stop the current actions 'call'.</li>
		<li>A 'call' is either a call to an &lt;action&gt; or the calling of a variable that contains action code or the calling of action code from events.</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="callwith" class="docu_anchor"></a>
<pre><a href="#callwith" class="selflink">callwith(caller, actions)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.<a href="#callwith" class="selflink">callwith(caller, actions)</a></pre>
<div class="xmlnodetext">
	Call krpano action code with using a specific plugin / layer or hotspot element as caller.
	This can be used for direct property access or to simulate event calls on these elements.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>caller</b>
			<ul>
				<li>The element that should be used as caller.</li>
				<li>Can be either a String with the name/path of the element or directly the element Object itself.</li> 
				<li>Can be only a &lt;plugin&gt; / &lt;layer&gt; or &lt;hotspot&gt; element - or null.</li>
				<li>The value null can be used to remove the current caller and to use the global scope.</li>
			</ul>
		</li>
		<li><b>actions</b>
			<ul>
				<li>Any krpano action code.</li>
				<li>The code will be executed in the 'context' of the caller - that means 'direct' access to its properties.</li>
			</ul>
		</li>
	</ul>
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('callwithexamples');"><div class="ico_example"></div> Examples</div>
		<div id="callwithexamples" class="xmlexamplecontent">
			<pre>callwith(layer[test], onclick);</pre>
			<pre>callwith(layer[test], trace('test pos=',x,'/',y); );</pre>
			<pre>callwith(layer[test], tween(alpha, 0.0); );</pre>
		</div>
	</div>
</div>
</div>





<div class="xmlnodedesc">
<a name="scope" class="docu_anchor"></a>
<pre><a href="#scope" class="selflink">scope(scope, actions)</a></pre>
<div class="xmlnodetext">
	Call krpano action code within a specific scope.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>scope</b>
			<ul>
				<li>The scope for the actions code.</li>
				<li>Available scopes:
					<ul>
						<li>global</li>
						<li>local</li>
						<li>localonly</li>
						<li>parent</li>
						<li>private:NAME</li>
					</ul>
					Details about the scopes here:  <a href="xml.html?#action.scope">actions scope</a>.
				</li>
			</ul>
		</li>
		<li><b>actions</b>
			<ul>
				<li>Any krpano action code.</li>
			</ul>
		</li>
	</ul>
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('scopeexamples');"><div class="ico_example"></div> Examples</div>
		<div id="scopeexamples" class="xmlexamplecontent">
			<pre>scope(localonly, for(set(i,0), i LT 10, inc(i), trace(i)); );</pre>
			<pre>scope(private:my_xml_plugin, trace(internal_var); );</pre>
		</div>
	</div>
</div>
</div>





<div class="xmlnodedesc">
<a name="parentscopeset" class="docu_anchor"></a>
<pre><a href="#parentscopeset" class="selflink">parentscopeset(variable, value)</a></pre>
<div class="xmlnodetext">
	Set a <b>variable</b> to the a <b>value</b> - like a <a href="#set">set()</a> call - but in the scope of the parent action.<br>
	This could be used to return / pass back a result from an inner local scope action to an outer one.<br>
	
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b><br>
			<ul>
				<li>The variable name.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>value</b><br>
			<ul>
				<li>The new value for this variable.</li>
				<li>When the variable already exists, then the value will be converted to the type of that variable.</li>
			</ul>
		</li>
	</ul>
	
</div>
</div>





<div class="xmlnodedesc">
<a name="linkeventscope" class="docu_anchor"></a>
<pre><a href="#linkeventscope" class="selflink">linkeventscope(element)</a></pre>
<div class="xmlnodetext">
	
	Link the current local scope to the events of the given element.<br>
	<br>
	When an event of that element (e.g. onclick) will be called, then the same scope will be used
	in the event code. By default events are always using the global scope.<br>
	<br>
	Note - when having linked to a scope, it is necessary to use <a href="xml.html#localscope.caller">caller</a> to address the element scope itself!
 	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>element</b><br>
			<ul>
				<li>A layer or hotspot element.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('linkeventscopeexamples');"><div class="ico_example"></div> Examples</div>
		<div id="linkeventscopeexamples" class="xmlexamplecontent">
			<pre>&lt;action ... scope="local"&gt;
  set(localvar, 123);
  addhotspot(auto,hs);
  ...
  linkeventscope(hs);
  set(hs.onclick, trace('localvar=',get(localvar)); );
&lt;/action&gt;</pre>
		</div>
	</div>
</div>
</div>





<div class="xmlnodedesc">
<a name="link" class="docu_anchor"></a>
<a name="unlink" class="docu_anchor"></a>
<pre><a href="#link" class="selflink">link(variable, sourcevariable)</a></pre>
<pre><a href="#link" class="selflink">link(variable, var1|var2:expression)</a></pre>
<pre><a href="#link" class="selflink">link(variable, events:expression)</a></pre>
<pre><a href="#unlink" class="selflink">unlink(variable)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.actions.<a href="#link" class="selflink">link(object, varname, sourcevariable)</a></pre>
<pre>krpano.actions.<a href="#link" class="selflink">link(object, varname, var1|var2:expression)</a></pre>
<pre>krpano.actions.<a href="#link" class="selflink">link(object, varname, events:expression)</a></pre>
<pre>krpano.actions.<a href="#unlink" class="selflink">unlink(object, varname)</a></pre>
<div class="xmlnodetext">
	Link a variable to an other variable or let the value 
	be automatically calculated using an <a href="actions.html#expressions">expression</a> when one or more other variables are changing or
	when certain events are triggered.<br>
	<br>
	Same as the xml <a href="xml.html#xmllink" class="pre selflink2">link:...</a> syntax.<br>
	See also the notes there!.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The name or path of a krpano variable that should get linked.</li>
			</ul>
		</li>
		<li><b>object</b> and <b>varname</b>
			<ul>
				<li>Any object and the name or the variable/property that should get linked.</li>
			</ul>
		</li>
		<li><b>sourcevariable</b>
			<ul>
				<li>The name or path of a krpano variable that should be the source.</li>
				<li>When this variable changes, the current variable will also change.</li>
			</ul>
		</li>
		<li><b>var1|var2:expression</b>
			<ul>
				<li>Link to one or more variables and use an <a href="#expressions">expression</a> to calculate the value.</li>
				<li>When linking to multiple variables, they must be separated by 
					<span class="pre">|</span> or <span class="pre">,</span> characters.
				</li>
				<li>The <a href="#expressions">expression</a> need to be defined after a <span class="pre">:</span> character.</li>
			</ul>
		</li>
		<li><b>events:expression</b>
			<ul>
				<li>Link to one or more <a href="#xml.html#events">events</a> and use an <a href="#expressions">expression</a> to calculate the value.</li>
				<li>The synax for the events is <span class="pre">event.EVENTNAME</span>, where EVENTNAME can be any of the krpano <a href="xml.html#events">events</a>.</li>
				<li>When linking to multiple events, they must be separated by 
					<span class="pre">|</span> or <span class="pre">,</span> characters.
				</li>
				<li>The <a href="#expressions">expression</a> need to be defined after a <span class="pre">:</span> character.</li>
			</ul>
		</li>
		
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('linkexamples');"><div class="ico_example"></div> Examples</div>
		<div id="linkexamples" class="xmlexamplecontent">
			<pre>link(layer[radar].rotate, view.hlookat);</pre>
			<pre>link(layer[info].text, view.hlookat|view.vlookat:'Lookat:'+roundval(view.hlookat,2)+'/'+roundval(view.vlookat,2));</pre>
		</div>
	</div>
</div>
</div>





<div class="xmlnodedesc">
<a name="updatelink" class="docu_anchor"></a>
<pre><a href="#updatelink" class="selflink">updatelink(variable)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.actions.<a href="#updatelink" class="selflink">updatelink(object, varname)</a></pre>
<div class="xmlnodetext">
	Forcing updating/refreshing the link.
	<ul>
		<li>This can be necessary/useful in some cases, because the link will get only updated <u>automatically</u>
			when the values of the linked variables will change.
		</li>
		<li>E.g. this can be used when the value of the variable had been manually changed 
			and should be set back to the value generated by the linking.
		</li>
	</ul>
	
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The name or path of a krpano variable that is linked and should get updated.</li>
			</ul>
		</li>
		<li><b>object</b> and <b>varname</b>
			<ul>
				<li>Any object and the name or the variable/property that is linked and should get updated.</li>
			</ul>
		</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="onchange" class="docu_anchor"></a>
<a name="removeonchange" class="docu_anchor"></a>
<pre><a href="#onchange" class="selflink">onchange(variable, callback)</a></pre>
<pre><a href="#removeonchange" class="selflink">removeonchange(variable)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.actions.<a href="#onchange" class="selflink">onchange(object, varname, callback)</a></pre>
<pre>krpano.actions.<a href="#removeonchange" class="selflink">removeonchange(object, varname)</a></pre>
<div class="xmlnodetext">
	Automatically call actions or a JS Function when the content of a variables changes.<br>
	<br>
	Notes:
	<ul>
		<li>Could be used multiple times on one variable, 
			but when calling <a href="#removeonchange">removeonchange()</a>, then <u>all</u> onchange callbacks will be removed.
		</li>
		<li>When <a href="#onchange">onchange()</a> is getting called from a <a href="xml.html#layer">layer</a> or <a href="xml.html#hotspot">hotspot</a> event - 
			or by using <a href="#callwith">callwith()</a>,
			then that layer/hotspot object will be the variable scope for direct access.<br>
			Otherwise the Object where the variable is defined, will be the variable scope and allow direct access to the variable without using the 'full-path'.
		</li>
		<li>By writing <a href="xml.html#onchangeattributes" class="pre selflink2">attribute.onchange="..."</a> 
			it would be possible to define <a href="#onchange">onchange()</a> callbacks already in the xml when defining <a href="xml.html#onchangeattributes">attributes</a>!
		</li>
	</ul>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The name or path of a krpano variable.</li>
			</ul>
		</li>
		<li><b>object</b> and <b>varname</b>
			<ul>
				<li>Any object and the name or the variable/property.</li>
			</ul>
		</li>
		<li><b>callback</b>
			<ul>
				<li>The actions or a Javascript function that will be called when the variable changes.</li>
			</ul>
		</li>
	</ul>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('onchangekexamples');"><div class="ico_example"></div> Examples</div>
		<div id="onchangekexamples" class="xmlexamplecontent">
			<pre>onchange(xml.scene, trace('new scene loaded:',xml.scene); );</pre>
		</div>
	</div>
</div>
</div>




<div class="xmlnodedesc">
<a name="linkstyle" class="docu_anchor"></a>
<pre><a href="#linkstyle" class="selflink">linkstyle(elementname, styles)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.actions.<a href="#linkstyle" class="selflink">linkstyle(object, styles)</a></pre>
<div class="xmlnodetext">
	Automatically <a href="#link">link</a> to all variables defined in the <a href="xml.html#style" class="selflink">&lt;style&gt;</a>.
	That means when a value inside the &lt;style&gt; changes, then automatically the value at the element will change too.<br>
	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>elementname</b> or <b>object</b>
			<ul>
				<li>Either the name/path of a krpano element or directly the element Object itself.</li>
				<li>E.g. <span class="presyntax_inline">layer[test]</span> or <span class="presyntax_inline">myelement[name]</span>.</li>
			</ul>
		</li>
		<li><b>styles</b>
			<ul>
				<li>The name of a <a href="xml.html#style" class="selflink">&lt;style&gt;</a> element.</li>
				<li>Several style names can be to combined by a <span class="presyntax_inline">|</span> character.</li>
			</ul>
		</li>
	</ul>

</div>
</div>






<div class="xmlnodedesc">
<a name="assignstyle" class="docu_anchor"></a>
<pre><a href="#assignstyle" class="selflink">assignstyle(elementname, styles)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.actions.<a href="#assignstyle" class="selflink">assignstyle(object, styles)</a></pre>
<div class="xmlnodetext">
	Copy the attributes from one or more <a href="xml.html#style" class="selflink">&lt;style&gt;</a> elements to a custom element.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>elementname</b> or <b>object</b>
			<ul>
				<li>Either the name/path of a krpano element or directly the element Object itself.</li>
				<li>E.g. <span class="presyntax_inline">layer[test]</span> or <span class="presyntax_inline">myelement[name]</span>.</li>
			</ul>
		</li>
		<li><b>styles</b>
			<ul>
				<li>The name of a <a href="xml.html#style" class="selflink">&lt;style&gt;</a> element.</li>
				<li>Several style names can be to combined by a <span class="presyntax_inline">|</span> character.</li>
			</ul>
		</li>
	</ul>
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('assignstyleexamples');"><div class="ico_example"></div> Examples</div>
		<div id="assignstyleexamples" class="xmlexamplecontent">
			<pre>assignstyle(layer[test], 'teststyle');</pre>
			<pre>assignstyle(layer[test], 'style1|style2');</pre>
		</div>
	</div>
</div>
</div>




<div class="xmlnodedesc">
<a name="copyattributes" class="docu_anchor"></a>
<pre><a href="#copyattributes" class="selflink">copyattributes(destobject, srcobject)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.<a href="#copyattributes" class="selflink">copyattributes(destobject, srcobject)</a></pre>
<div class="xmlnodetext">
	Copy all attributes from one object to another one.<br>
	<br>
	<i>Note - the parameters of the copyattributes() action need to be the objects, not the names/paths of the objects!
		That means it might be necessary to use the <a href="#get">get()</a> action to resolve the names/paths.</i><br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>destobject</b>
			<ul>
				<li>The destination object - the object where the attributes will be copied to.
					Existing attributes will be overwritten.
				</li>
			</ul>
		</li>
		<li><b>srcobject</b>
			<ul>
				<li>The source object - all attributes from that object will be copied to the destination object.</li>
			</ul>
		</li>
	</ul>
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('copyattributesexamples');"><div class="ico_example"></div> Examples</div>
		<div id="copyattributesexamples" class="xmlexamplecontent">
			<pre>copyattributes(get(layer[test]), get(style[style1]));</pre>
		</div>
	</div>
</div>
</div>





<div class="xmlnodedesc">
<a name="events.add" class="docu_anchor"></a>
<pre><a href="#events.add" class="selflink">events.add(events, callback)</a></pre>
<pre><a href="#events.add" class="selflink">events.add(<span class="optargs">name</span>, events, callback)</a></pre>
<div class="xmlnodetext">
	Dynamically add event callbacks.<br>
	<br>
	This will create a new <a href="xml.html#events" class="selflink">&lt;events&gt;</a> element (with keep=true set)
	and assign the given events to the <b>callback</b> code.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>name</b> <span class="smallcomment">(optionally, only if called with 3 arguments)</span><br>
			<ul>
				<li>The name for the new <a href="xml.html#events" class="selflink">&lt;events&gt;</a> element.</li>
				<li>If not set, an automatic one will be used.</li>
			</ul>
		</li>
		
		<li><b>events</b>
			<ul>
				<li>The name of one or more <a href="xml.html#events">events</a> (separated by a <span class="pre">|</span> or a <span class="pre">,</span>).</li>
			</ul>
		</li>
		
		<li><b>callback</b>
			<ul>
				<li>Actions code or a Javascript function that will be called when the events gets triggered.</li>
			</ul>
		</li>
	</ul>
	Return value:<br>
	<ul>
		<li>The name of the new created <a href="xml.html#events" class="selflink">&lt;events&gt;</a> element.</li>
		<li>This can be used for calling <a href="#events.remove">events.remove()</a> to remove previously added elements.</li>
	</ul>
	
	<br>
	<i>Note - for Javascript usage cases also the <a href="js_api.html#events.addListener">events.addListener()</a> function can be used.
		This one works independent of the <a href="xml.html#events" class="selflink">&lt;events&gt;</a> elements.
	</i><br>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('eventsaddexamples');"><div class="ico_example"></div> Examples</div>
		<div id="eventsaddexamples" class="xmlexamplecontent">
			<pre>events.add('myevents', 'ondown|onwheel', trace('test'));
...
events.remove('myevents', 'ondown');  // removes only the ondown event
</pre>
Technically this is the same as:
<pre>events[myevents].keep = true;
events[myevents].ondown = "trace('test');";
events[myevents].onwheel = "trace('test');";
...
events[myevents].ondown = null;</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="events.remove" class="docu_anchor"></a>
<pre><a href="#events.remove" class="selflink">events.remove(name<span class="optargs">, events</span>)</a></pre>
<div class="xmlnodetext">
	Dynamically remove event callbacks.<br>
	<br>
	This will remove events from an <a href="xml.html#events" class="selflink">&lt;events&gt;</a> element.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>name</b><br>
			<ul>
				<li>The name for an <a href="xml.html#events" class="selflink">&lt;events&gt;</a> element.</li>
				<li>This name was either set in the <a href="#events.add">events.add()</a> action or returned by it.</li>
			</ul>
		</li>
		
		<li><b>events</b>  <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The name of the events to remove <a href="xml.html#events">events</a> (separated by a <span class="pre">|</span> or a <span class="pre">,</span>).</li>
				<li>If not set or set to <span class="pre">all</span> or <span class="pre">*</span>, all events will be removed.</li>
			</ul>
		</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="events.once" class="docu_anchor"></a>
<pre><a href="#events.once" class="selflink">events.once(events, callback)</a></pre>
<div class="xmlnodetext">
	Add an 'once' event callback.<br>
	The callback function will be called only once and then automatically be removed.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>events</b>
			<ul>
				<li>The name of one or more <a href="xml.html#events">events</a> (separated by a <span class="pre">|</span> or a <span class="pre">,</span>).</li>
			</ul>
		</li>
		
		<li><b>callback</b>
			<ul>
				<li>Actions code or a Javascript function that will be called when the events gets triggered.</li>
			</ul>
		</li>
	</ul>
	
	<br>
	<i>Note - for Javascript usage cases also the <a href="js_api.html#events.addListener">events.addListener()</a> function can be used.
		This one works independent of the <a href="xml.html#events" class="selflink">&lt;events&gt;</a> elements.
	</i><br>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('eventsonceexamples');"><div class="ico_example"></div> Examples</div>
		<div id="eventsonceexamples" class="xmlexamplecontent">
			Get the next click on the pano:
			<pre>events.once('onclick', trace('test'); );</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="events.dispatch" class="docu_anchor"></a>
<pre><a href="#events.dispatch" class="selflink">events.dispatch(eventname, <span class="optargs">instant</span>, )</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.<a href="#events.dispatch" class="selflink">events.dispatch(eventname, <span class="optargs">eventdata</span>, <span class="optargs">caller</span>)</a></pre>
<div class="xmlnodetext">
	Dispatches / calls the given event listeners from all <a href="xml.html#events" class="selflink">&lt;events&gt;</a> elements.
	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>eventname</b>
			<ul>
				<li>The name of the event.</li>
				<li>Can be also any custom name, when event listeners for that name are used.</a>
			</ul>
		</li>
		
		<li><b>instant</b> <span class="smallcomment">(actions only, optionally)</span><br>
			<ul>
				<li>A Boolean setting (true or false, false by default).</li>
				<li>When set to true, the events will be called and executed instantly, 
					when not set or set to false, the events will be called after the current actions calls. 
				</li>
			</ul>
		</li>
		
		<li><b>eventdata</b> <span class="smallcomment">(js only, optionally)</span><br>
			<ul>
				<li>An optional Object for the event.</li>
				<li>Will be passed as first argument to Javascript listener functions.</li>
			</ul>
		</li>
		
		<li><b>caller</b> <span class="smallcomment">(js only, optionally)</span><br>
			<ul>
				<li>Optionally set who (hotspot, layer, ...) is calling the event.</li>
				<li>Will be passed as second argument to Javascript listener functions.</li>
			</ul>
		</li>
	</ul>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('eventsdispatchexamples');"><div class="ico_example"></div> Examples</div>
		<div id="eventsdispatchexamples" class="xmlexamplecontent">
			<pre>&lt;events name="events1" myevent="trace(events1...);" /&gt;
&lt;events name="events2" myevent="trace(events2...);" /&gt;
...
events.dispatch(myevent);
</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="focus" class="docu_anchor"></a>
<pre><a href="#focus" class="selflink">focus()</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#focus" class="selflink">krpano.focus()</a></pre>
<div class="xmlnodetext">
	Give the input focus to the current krpano viewer.
</div>
</div>




<div class="xmlnodedesc">
<a name="releasefocus" class="docu_anchor"></a>
<pre><a href="#releasefocus" class="selflink">releasefocus()</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#releasefocus" class="selflink">krpano.releasefocus()</a></pre>
<div class="xmlnodetext">
	Remove the input focus from the current viewer.<br>
	That will also stop any movement frictions, release pressed keyboard-keys and close an open contextmenu.
</div>
</div>




<div class="xmlnodedesc">
<a name="add" class="docu_anchor"></a>
<a name="sub" class="docu_anchor"></a>
<a name="mul" class="docu_anchor"></a>
<a name="div" class="docu_anchor"></a>
<a name="mod" class="docu_anchor"></a>
<a name="pow" class="docu_anchor"></a>
<pre><a href="#add" class="selflink">add(variable, valueA, <span class="optargs">valueB</span>)</a></pre>
<pre><a href="#sub" class="selflink">sub(variable, valueA, <span class="optargs">valueB</span>)</a></pre>
<pre><a href="#mul" class="selflink">mul(variable, valueA, <span class="optargs">valueB</span>)</a></pre>
<pre><a href="#div" class="selflink">div(variable, valueA, <span class="optargs">valueB</span>)</a></pre>
<pre><a href="#mod" class="selflink">mod(variable, valueA, <span class="optargs">valueB</span>)</a></pre>
<pre><a href="#pow" class="selflink">pow(variable, valueA, <span class="optargs">valueB</span>)</a></pre>
<div class="xmlnodetext">
	Actions for mathematical calculations.<br>
	These actions can be used with 2 or 3 parameters:<br>
	<br>
	<ul>
		<li>with 2 parameters:<br>
			<ul>
				<li>add(dst,val1) &nbsp;&rArr;&nbsp; dst = dst + val1 <small><i>(like +=)</i></small></li>
				<li>sub(dst,val1) &nbsp;&rArr;&nbsp; dst = dst - val1 <small><i>(like -=)</i></small></li>
				<li>mul(dst,val1) &nbsp;&rArr;&nbsp; dst = dst * val1 <small><i>(like *=)</i></small></li>
				<li>div(dst,val1) &nbsp;&rArr;&nbsp; dst = dst / val1 <small><i>(like /=)</i></small></li>
				<li>mod(dst,val1) &nbsp;&rArr;&nbsp; dst = dst % val1 <small><i>(modulate)</i></small></li>
				<li>pow(dst,val1) &nbsp;&rArr;&nbsp; dst = dst ^ val1</li>
			</ul>
		</li>
		<li>with 3 parameters:<br>
			<ul>
				<li>add(dst,val1,val2) &nbsp;&rArr;&nbsp; dst = val1 + val2</li>
				<li>sub(dst,val1,val2) &nbsp;&rArr;&nbsp; dst = val1 - val2</li>
				<li>mul(dst,val1,val2) &nbsp;&rArr;&nbsp; dst = val1 * val2</li>
				<li>div(dst,val1,val2) &nbsp;&rArr;&nbsp; dst = val1 / val2</li>
				<li>mod(dst,val1,val2) &nbsp;&rArr;&nbsp; dst = val1 % val2 <small><i>(modulate)</i></small></li>
				<li>pow(dst,val1,val2) &nbsp;&rArr;&nbsp; dst = val1 ^ val2</li>
			</ul>
		</li>
	</ul>
	<br>
	<i>Note - val1 and val2 can be values or variables. When val1 or val2 is a variable
		then automatically the content of the variable will be used!
    </i>

	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The variable where the result of the calculation will be stored.</li>
				<li>When the variable doesn't exists, it will be created.</li>
			</ul>
		</li>
		<li><b>valueA</b> / <b>valueB</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>The values or variables for the calculation.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('mathexamples');"><div class="ico_example"></div> Examples</div>
		<div id="mathexamples" class="xmlexamplecontent">
			<pre>set(val, 1);
add(val, 1);
trace('val should be 2: val=',val);</pre>
			<pre>mul(doublewidth, width, 2.0);</pre>
			<pre>mul(scale, 0.5);</pre>
			<pre>div(result, vala, valb);</pre>
			<pre>add(dst,rotate,360); tween(rotate,get(dst),5);</pre>
			<pre>add(xpos, mouse.x, mouse_x_offset);</pre>
			<pre>sub(destx, stagewidth,  destwidth);</pre>
			<pre>div(aspect,16,9);</pre>
			<pre>mod(cur_hlookat,cur_hlookat,360);</pre>
			<pre>pow(sqrt,val,0.5);</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="inc" class="docu_anchor"></a>
<a name="dec" class="docu_anchor"></a>
<pre><a href="#inc" class="selflink">inc(variable, <span class="optargs">byvalue, max, min</span>)</a></pre>
<pre><a href="#dec" class="selflink">dec(variable, <span class="optargs">byvalue, min, max</span>)</a></pre>
<div class="xmlnodetext">
	These actions increase or decrease variable (with saturation or limiting).<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The variable to increase or decrease.</li>
			</ul>
		</li>
		<li><b>byvalue</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Increase or decrease the variable by this value.</li>
				<li>When not set, the variable will be increased or decreased by 1.</li>
			</ul>
		</li>
		<li><b>max</b> / <b>min</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Defines maximum and minimum values.</li>
				<li>When one limit will be reached then the value will be set back to the other limit value.
					This can be used to let the varibale either wrap around
					a defined range or to clip at at specific limit (with min=max).
				</li>
			</ul>
		</li>
	</ul>
	
	<br>
	<i>Note - The inc() and dec() actions will convert the variable type to 'integer'!</i>
	

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('incdecexamples');"><div class="ico_example"></div> Examples</div>
		<div id="incdecexamples" class="xmlexamplecontent">
			<pre>inc(i);</pre>
			<pre>inc(frame,1,get(lastframe),0);</pre>
			<pre>inc(ypos,30);</pre>
			<pre>inc(view.hlookat, 2, 90, 90);</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="clamp" class="docu_anchor"></a>
<pre><a href="#clamp" class="selflink">clamp(variable, min, max)</a></pre>
<div class="xmlnodetext">
	Limit the value of the variable to be between the given min and max values.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The variable to clamp / to limit.</li>
			</ul>
		</li>
		<li><b>min</b>
			<ul>
				<li>The minimum value - when value of the variable is below that value, it will be set to this min value.</li>
			</ul>
		</li>
		<li><b>max</b>
			<ul>
				<li>The maximum value - when value of the variable is above that value, it will be set to this max value.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('clampexamples');"><div class="ico_example"></div> Examples</div>
		<div id="clampexamples" class="xmlexamplecontent">
			<pre>clamp(percent, 0, 100);</pre>
			<pre>screentolayer(bar, mouse.stagex,mouse.stagey, lx,ly);<br>div(fill, lx, layer[bar].pixelwidth);<br>mul(fill, 100);<br>clamp(fill, 0, 100);<br>txtadd(layer[barfill].width, get(fill), '%');</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="math" class="docu_anchor"></a>
<pre><a href="#math" class="selflink">Math.*</a></pre>
<div class="xmlnodetext">
	
	The Math object provides constants and actions for mathematical calculations.<br>
	<br>
	The most Math actions can be called in two ways - either by just passing the name of the variable - then 
	variable will be used as parameter and the result of the calculation will be stored back to the variable,
	or by specifying an additionally parameter where the result should be stored.<br>
	<br>
	
	<ul>
		<li>
			<a name="math.pi" href="#math.pi" class="selflink">Math.PI</a>
			<ul>
				<li>Mathematically constant with the value of PI (3.141592)</li>
			</ul>
		</li>
		
		<li><a name="math.abs" href="#math.abs" class="selflink">Math.abs(var)</a> or <a href="#math.abs" class="selflink">Math.abs(result,v)</a><br>
			<ul>
				<li>Make an absolute value.</li>
			</ul>
		</li>
		
		<li><a name="math.acos" href="#math.acos" class="selflink">Math.acos(var)</a> or <a href="#math.acos" class="selflink">Math.acos(result,v)</a><br>
			<ul>
				<li>Calculates the arc cosine (in radians).</li>
			</ul>
		</li>
		
		<li><a name="math.asin" href="#math.asin" class="selflink">Math.asin(var)</a> or <a href="#math.asin" class="selflink">Math.asin(result,v)</a><br>
			<ul>
				<li>Calculates the arc sine (in radians).</li>
			</ul>
		</li>
		
		<li><a name="math.atan" href="#math.atan" class="selflink">Math.atan(var)</a> or <a href="#math.atan" class="selflink">Math.atan(result,v)</a><br>
			<ul>
				<li>Calculates the arc tangent (in radians).</li>
			</ul>
		</li>
		
		<li><a name="math.atan2" href="#math.atan2" class="selflink">Math.atan2(result,a,b)</a><br>
			<ul>
				<li>Calculates the arc tangent (in radians) of the two variables a and b.</li>
				<li>It is similar to calculating the arc tangent of a / b, except that the signs of both arguments 
					are used to determine the quadrant of the result.
				</li>
			</ul>
		</li>
		
		<li><a name="math.ceil" href="#math.ceil" class="selflink">Math.ceil(var)</a> or <a href="#math.ceil" class="selflink">Math.ceil(result,v)</a><br>
			<ul>
				<li>Calculates the next highest integer value by rounding up.</li>
			</ul>
		</li>
		
		<li><a name="math.cos" href="#math.cos" class="selflink">Math.cos(var)</a> or <a href="#math.cos" class="selflink">Math.cos(result,v)</a><br>
			<ul>
				<li>Calculates the cosine (parameter in radians). </li>
			</ul>
		</li>
		
		<li><a name="math.exp" href="#math.exp" class="selflink">Math.exp(var)</a> or <a href="#math.exp" class="selflink">Math.exp(result,v)</a><br>
			<ul>
				<li>Calculates e (=base of the natural system of logarithms, ~2.718282) raised to the power of var/v. </li>
			</ul>
		</li>
		
		<li><a name="math.floor" href="#math.floor" class="selflink">Math.floor(var)</a> or <a href="#math.floor" class="selflink">Math.floor(result,v)</a><br>
			<ul>
				<li>Calculates the next lowest integer value by rounding down.</li>
			</ul>
		</li>
		
		<li><a name="math.log" href="#math.log" class="selflink">Math.log(var)</a> or <a href="#math.log" class="selflink">Math.log(result,v)</a><br>
			<ul>
				<li>Calculates the natural logarithm.</li>
			</ul>
		</li>
		
		<li><a name="math.max" href="#math.max" class="selflink">Math.max(var,var2)</a> or <a href="#math.max" class="selflink">Math.max(result,...vars)</a><br>
			<ul>
				<li>Get the largest value of all given variables or values.</li>
			</ul>
		</li>
		
		<li><a name="math.min" href="#math.min" class="selflink">Math.min(var,var2)</a> or <a href="#math.min" class="selflink">Math.min(result,...vars)</a><br>
			<ul>
				<li>Get the lowest value of all given variables or values.</li>
			</ul>
		</li>
		
		<li><a name="math.pow" href="#math.pow" class="selflink">Math.pow(var,var2)</a> or <a href="#math.pow" class="selflink">Math.pow(result,v1,v2)</a><br>
			<ul>
				<li>Calculates var/v1 raised to the power of var2/v2.</li>
			</ul>
		</li>
		
		<li><a name="math.round" href="#math.round" class="selflink">Math.round(var)</a> or <a href="#math.round" class="selflink">Math.round(result,v)</a><br>
			<ul>
				<li>Calculates the rounded integer value.</li>
			</ul>
		</li>
		
		<li><a name="math.sin" href="#math.sin" class="selflink">Math.sin(var)</a> or <a href="#math.sin" class="selflink">Math.sin(result,v)</a><br>
			<ul>
				<li>Calculates the sine (parameter in radians).</li>
			</ul>
		</li>
		
		<li><a name="math.sqrt" href="#math.sqrt" class="selflink">Math.sqrt(var)</a> or <a href="#math.sqrt" class="selflink">Math.sqrt(result,v)</a><br>
			<ul>
				<li>Calculates the square root.</li>
			</ul>
		</li>
		
		<li><a name="math.tan" href="#math.tan" class="selflink">Math.tan(var)</a> or <a href="#math.tan" class="selflink">Math.tan(result,v)</a><br>
			<ul>
				<li>Calculates the tangent (parameter in radians).</li>
			</ul>
		</li>
	</ul>

</div>
</div>




<div class="xmlnodedesc">
<a name="roundval" class="docu_anchor"></a>
<pre><a href="#roundval" class="selflink">roundval(variable, <span class="optargs">decimalplaces</span>)</a></pre>
<pre><a href="#roundval" class="selflink">roundval(destinationvariable, variable, decimalplaces)</a></pre>
<div class="xmlnodetext">
	Rounds the value of the variable to given decimal places.<br>
	<br>
	<i>Note - the variable will be a string internally after rounding!</i>
	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>destinationvariable</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The variable where the result will be stored.</li>
				<li>Only when called with 3 parameters!</li>
			</ul>
		</li>
		<li><b>variable</b>
			<ul>
				<li>The variable to be rounded.</li>
				<li>When called with 1 or 2 parameters, the result will be stored also in that variable.</li>
			</ul>
		</li>
		<li><b>decimalplaces</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The number of decimal places - 0 when not set.</li>
				<li>Negative values work like positive ones, except that trailing zeros are automatically removed 
					(except for a least one zero after the comma dot). 
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('roundvalexamples');"><div class="ico_example"></div> Examples</div>
		<div id="roundvalexamples" class="xmlexamplecontent">
			<pre>roundval(val);</pre>
			<pre>roundval(val, 2);</pre>
			<pre>roundval(val, 123.0, 6);   <span class="codecomment">// &rArr; "123.000000"</span></pre>
			<pre>roundval(val, 123.0, -6);  <span class="codecomment">// &rArr; "123.0"</pre>
			<pre>roundval(hlookat_print, view.hlookat, 2);</pre>
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="tohex" class="docu_anchor"></a>
<pre><a href="#tohex" class="selflink">tohex(variable, <span class="optargs">prefix, length</span>)</a></pre>
<pre><a href="#tohex" class="selflink">tohex(destinationvariable, variable, prefix, length)</a></pre>
<div class="xmlnodetext">
	Convert the content of the given variable to a hexadecimal string.<br>
	Can be used to create html/css color strings.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>destinationvariable</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The variable where the result will be stored.</li>
				<li>Only when called with 4 parameters!</li>
			</ul>
		</li>
		<li><b>variable</b>
			<ul>
				<li>The variable to be converted to a hexadecimal string.</li>
				<li>When called with less than 4 parameters, the result will be stored also in that variable.</li>
			</ul>
		</li>
		<li><b>prefix</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>A prefix (like '0x' or '#') for the string.</li>
			</ul>
		</li>
		<li><b>length</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>A fixed length for the result.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('tohexexamples');"><div class="ico_example"></div> Examples</div>
		<div id="tohexexamples" class="xmlexamplecontent">
			<pre>tohex(color,'#',6);</pre>
			<pre>set(color, ...an_external_integer_input...);<br>tohex(color,'#',6);<br>txtadd(layer[text1].css,'color:',get(color),';');</pre>
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="tolower" class="docu_anchor"></a>
<a name="toupper" class="docu_anchor"></a>
<pre><a href="#tolower" class="selflink">tolower(variable)</a></pre>
<pre><a href="#toupper" class="selflink">toupper(variable)</a></pre>
<pre><a href="#tolower" class="selflink">tolower(destinationvariable, sourcevariable)</a></pre>
<pre><a href="#toupper" class="selflink">toupper(destinationvariable, sourcevariable)</a></pre>
<div class="xmlnodetext">
	Convert the content of the given variable to a lower or upper case.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>destinationvariable</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The variable where the case conversion result will be stored.</li>
				<li>Only when called with 2 parameters!</li>
			</ul>
		</li>
		<li><b>variable</b> / <b>sourcevariable</b>
			<ul>
				<li>The variable to be converted to a lower or upper case.</li>
			</ul>
		</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="txtadd" class="docu_anchor"></a>
<pre><a href="#txtadd" class="selflink">txtadd(destination, txt1, <span class="optargs">txt2, txt3, ...</span>)</a></pre>
<div class="xmlnodetext">
	The <b>txtadd</b> action can be used to add/connect several texts / values together.<br>
	The action can be used with 2 or more parameters. When using only two parameters (destination and a text)
	then the text will be added to current value of the destination variable.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>destination</b>
			<ul>
				<li>The destination variable where the connected text will be stored.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>txt1</b>, <b>txt2</b>, <b>txt3</b>, ... <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The texts that will be connected together.</li>
				<li>When using only one txt parameter then this text will be added to the content of current destination variable.</li>
				<li><i>Note - when the content of a variable should be used - then the <a href="#get">get()</a>
					action must be used to resolve the variable!</i>
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('txtaddexamples');"><div class="ico_example"></div> Examples</div>
		<div id="txtaddexamples" class="xmlexamplecontent">
			<pre>txtadd(picfilename,'%CURRENTXML%/pic_',get(pic),'.jpg');</pre>
			<pre>txtadd(crop,'0|',get(ypos),'|333|285');</pre>
			<pre>txtadd(pname, 'thumbbar_image_', get(i));</pre>
			<pre>txtadd(layer[text].html,'[p]',get(data[txt1].content),'[/p]');</pre>
			<pre>txtadd(msg,get(view.fovtype),'=',get(fov),'°');</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="subtxt" class="docu_anchor"></a>	
<pre><a href="#subtxt" class="selflink">subtxt(dstvar, srcvar, startpos, len)</a></pre>
<div class="xmlnodetext">
	The <b>subtxt</b> action extracts a part of an other text.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>dstvar</b>
			<ul>
				<li>The destination variable where the extracted text will be stored.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>srcvar</b>
			<ul>
				<li>The variable or text with the source text.</li>
			</ul>
		</li>
		<li><b>startpos</b>
			<ul>
				<li>The starting position from where the text should be extracted.</li>
			</ul>
		</li>
		<li><b>len</b>
			<ul>
				<li>The length of the text to extract.</li>
			</ul>
		</li>
	</ul>

</div>
</div>




<div class="xmlnodedesc">
<a name="indexoftxt" class="docu_anchor"></a>
<pre><a href="#indexoftxt" class="selflink">indexoftxt(index, txt, searchtxt, <span class="optargs">startindex</span>)</a></pre>
<div class="xmlnodetext">
	The <b>indexoftxt</b> action gives the position of the first occurrence of the 'searchtxt' value in the 'txt' string.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>index</b>
			<ul>
				<li>A variable that will store the index of first occurrence of 'searchtxt'.</li>
				<li>Or <span class="presyntax_inline">-1</span> if 'searchtxt' never occurs.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>txt</b>
			<ul>
				<li>The text in which it should be searched.</li>
			</ul>
		</li>
		<li><b>searchtxt</b>
			<ul>
				<li>The text to searched for.</li>
			</ul>
		</li>
		<li><b>startindex</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The starting startindex / position where to start searching for the text (0 by default).</li>
			</ul>
		</li>
	</ul>

</div>
</div>





<div class="xmlnodedesc">
<a name="txtreplace" class="docu_anchor"></a>
<pre><a href="#txtreplace" class="selflink">txtreplace(var, searchtext, replacetext)</a></pre>
<pre><a href="#txtreplace" class="selflink">txtreplace(dstvar, srcvar, searchtext, replacetext)</a></pre>
<div class="xmlnodetext">
	The <b>txtreplace</b> action searches in 'var/srcvar' for all occurrences of 'searchtext' and replaces them with 'replacetext'.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>var / srcvar / dstvar</b>
			<ul>
				<li>The variable where to search for (var, srcvar) and where the result will be stored (var, dstvar).</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>searchtxt</b>
			<ul>
				<li>The text that should be searched for.</li>
			</ul>
		</li>
		<li><b>replacetext</b>
			<ul>
				<li>The text that will replace the 'searchtxt' occurrences.</li>
			</ul>
		</li>
	</ul>

</div>
</div>




<div class="xmlnodedesc">
<a name="txtsplit" class="docu_anchor"></a>
<pre><a href="#txtsplit" class="selflink">txtsplit(string, separator, resultingarray)</a></pre>
<pre><a href="#txtsplit" class="selflink">txtsplit(string, separator, var1, var2, <span class="optargs">...</span>)</a></pre>
<div class="xmlnodetext">
	Splits the given 'string' by the given 'separator'.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>string</b>
			<ul>
				<li>The string to split, can be either a text or a variable.</li>
			</ul>
		</li>
		<li><b>separator</b>
			<ul>
				<li>The separator character or string.</li>
			</ul>
		</li>
		<li><b>resultingarray</b> <span class="smallcomment">(when calling the txtsplit() action with 3 arguments)</span>
			<ul>
				<li>Name of a <a href="#arrays">krpano Array</a> variable that will contain the split parts as 'value' properties.</li>
			</ul>
		</li>
		<li><b>var1, var2, ...</b> <span class="smallcomment">(when calling the txtsplit() action with 4 or more arguments)</span>
			<ul>
				<li>The results of the spliting will be directly assigned to the given variables.</li>
				<li>When using null as variable, that value will ignored/skipped (could be used to extract only some specific values).</li>
			</ul>
		</li>
	</ul>
	
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('txtsplitexamples');"><div class="ico_example"></div> Examples</div>
		<div id="txtsplitexamples" class="xmlexamplecontent">
			<div style="padding-top:6px;">
				Split into separate variables:
				<pre>txtsplit('1|2|3', '|', a, b, c);<br>trace('a=',get(a), ' b=',get(b), ' c=',get(c));</pre>
				Result:
				<pre>a=1 b=2 c=3</pre>
			</div>
			<div style="padding-top:6px;">
				Split into an array:
				<pre>txtsplit('x|y|z', '|', arr);<br>for(set(i,0), i LT arr.count, inc(i),<br>  trace('arr[',get(i),'].value=',arr[get(i)].value);<br>);</pre>
				Result:
				<pre>arr[0].value=x<br>arr[1].value=y<br>arr[2].value=z</pre>
			</div>
		</div>
	</div>


</div>
</div>




<div class="xmlnodedesc">
<a name="txtjoin" class="docu_anchor"></a>
<pre><a href="#txtjoin" class="selflink">txtjoin(var, separator, array)</a></pre>
<pre><a href="#txtjoin" class="selflink">txtjoin(var, separator, var1, var2, <span class="optargs">...</span>)</a></pre>
<div class="xmlnodetext">
	Join / concate all of the elements in the given array or the given variables and inserts the specified separator string between them.
	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>var</b>
			<ul>
				<li>The variable where the result will be stored.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>separator</b>
			<ul>
				<li>The separator character or string that will be insert between the elements.</li>
			</ul>
		</li>
		<li><b>array</b> <span class="smallcomment">(when calling the txtjoin() action with 3 arguments)</span>
			<ul>
				<li>Name of an array variable.</li>
				<li>Can be either a <a href="#valuearrays">value array</a> or a <a href="#arrays">krpano Array</a> with 'value' properties (the output from <a href="#txtsplit">txtsplit</a>).</li>
			</ul>
		</li>
		<li><b>var1, var2, ...</b> <span class="smallcomment">(when calling the txtjoin() action with 4 or more arguments)</span>
			<ul>
				<li>The variables or values to join.</li>
			</ul>
		</li>
	</ul>
	
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('txtjoinexamples');"><div class="ico_example"></div> Examples</div>
		<div id="txtjoinexamples" class="xmlexamplecontent">
			<div style="padding-top:6px;">
				Split into separate variables, modify and then join again:
				<pre>txtsplit(image.prealign, '|', rx, ry, rz);<br>add(ry,90);<br>txtjoin(image.prealign, '|', rx, ry, rz);</pre>
			</div>
			<div style="padding-top:6px;">
				Split into an array, modify and rejoin:
				<pre>txtsplit('1|2|3', '|', arr);<br>for(set(i,0), i LT arr.count, inc(i), mul(arr[get(i)].value,2); );<br>txtjoin(test, '|', arr);<br>trace(test);</pre>
				Result:
				<pre>2|4|6</pre>
			</div>
		</div>
	</div>


</div>
</div>





<div class="xmlnodedesc">
<a name="fromcharcode" class="docu_anchor"></a>
<pre><a href="#fromcharcode" class="selflink">fromcharcode(var, charcode)</a></pre>
<div class="xmlnodetext">
	The <b>fromcharcode</b> action converts the given character code to a string and stores in the given variable.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>var</b>
			<ul>
				<li>The variable where to store the character.</li>
				<li>The variable will be created when it doesn't exists.</li>
			</ul>
		</li>
		<li><b>charcode</b>
			<ul>
				<li>The Unicode character code as number.</li>
			</ul>
		</li>
	</ul>

</div>
</div>




<div class="xmlnodedesc">
<a name="escape" class="docu_anchor"></a>
<a name="unescape" class="docu_anchor"></a>
<pre><a href="#escape" class="selflink">escape(var)</a></pre>
<pre><a href="#escape" class="selflink">escape(var, text)</a></pre>
<pre><a href="#unescape" class="selflink">unescape(var)</a></pre>
<pre><a href="#unescape" class="selflink">unescape(var, text)</a></pre>
<div class="xmlnodetext">
	The <b>escape</b> and <b>unescape</b> actions are escaping the content of the given variable or the given text and then storing the result in the given variable.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>var</b>
			<ul>
				<li>Without text parameter - the variable which will be escaped/unescaped.</li>
				<li>With text parameter - the variable where the escaped/unescaped text will be stored.</li>
			</ul>
		</li>
		<li><b>text</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The text that that will be escaped/unescaped.</li>
			</ul>
		</li>
	</ul>
</div>
</div>




<div class="xmlnodedesc">
<a name="tween" class="docu_anchor"></a>
<pre><a href="#tween" class="selflink">tween(variable, value, <span class="optargs">time, tweentype, ondone, onupdate</span>)</a></pre>
<span class="jsactionapi">Object API:</span>
<pre><a href="#tween" class="selflink">tween(objectpath, var1=val, var2=val, ..., <span class="optargs">time=, type=, ondone=, onupdate=</span>)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.<a href="#tween" class="selflink">tween(object, destobject, <span class="optargs">time, tweentype, ondone, onupdate</span>)</a></pre>
<div class="xmlnodetext">
	The <b>tween</b> action can be used for a time-controlled animation / change of a variable.<br>
	The action will dynamically change the current value of the variable to the given value.<br>
	<br>
	<i><u>Color support:</u>
	 When tweening a variable with a name that contains the word 'color', then the values will be automatically
	 interpreted as 32bit ARGB colors and each color channel will be processed individually.
	</i><br>
	<br>
	<i><u>Relative sizes support (percent-sizes and negative width/height values):</u>
	 When tweening a 'size-based' variable from a layer or hotspot (e.g. width, height, or x, y, ox, oy),
	 then automatically convert between the relative and the absolute size depending on the target value.
	</i><br>
	<br>
	<i><u>Multi-value support:</u> Some variables (e.g. like <a href="xml.html#image.prealign">image.prealign</a> or 
		<a href="xml.html#layer.bgborder">layer.bgborder</a>) can contain 
		multiple values separated by a <span class="pre">|</span> or a <span class="pre">,</span> or a space character.
		The detection and format of such variables is based on the target value.<br>
		Example values: <span class="pre">1.0|2.0|3.0</span> or <span class="pre">4,5,6</span> or <span class="pre">3 0xFF0000 1.0</span>.
		
	</i><br>
	<br>
	<i><u>Multi-variable support:</u> It is possible to tween several variables together at once.
		When all variables are from the same Object, the' Object API' can be used.
		Otherwiese the variables, values and tweentypes can separated by <span class="pre">|</span> characters.
		<br>
	</i>
	<br>
	<i><u>Javascript API:</u> 
		With the Javascript API an Object that ones properties should be changed can be selected and 
		a 'Destination' Object be given with the properties and values that should be changed/tweened to.
		<br>
	</i>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The variable that should be changed.</li>
				<li>Use the <span class="presyntax_inline">|</span> character to specify several variables.</li>
				<li>When the variable name contains the word 'color', then process the variable value as 32bit ARGB color value.</li>
			</ul>
		</li>

		<li><b>value</b>
			<ul>
				<li>The destination value for this variable.</li>
				<li>When tweening percent values - add a '%' character to the value.</li>
				<li>Use the <span class="presyntax_inline">|</span> character to specify several values for several variables.</li>
				<li>Note - to tween to the value of another variable or to the result of an expression, 
					the <a href="#get">get()</a> or or <a href="#calc">calc()</a> actions can be used.
				</li>
				<li>Note (Object API only) - when using expressions, the special keyword <span class="pre">this</span>
					is available to access the Object itself.
				</li>
			</ul>
		</li>
		
		<li><b>objectpath</b> <span class="smallcomment">(Object API)</span>
			<ul>
				<li>The name/path to the Object (e.g. "hotspot[spot1]" or "view").</li>
				<li>If getting called from a layer or hotspot event and that layer/hotspot should be changed,
					then the objectpath could be skipped or the name <span class="pre">caller</span> be used to address it.
				</li>
			</ul>
		</li>
		
		<li><b>object</b> <span class="smallcomment">(Javascript API)</span>
			<ul>
				<li>The Object whose properties are to be changed/tweened.</li>
			</ul>
		</li>
		
		<li><b>destobject</b> <span class="smallcomment">(Javascript API)</span>
			<ul>
				<li>An Object with properties and their destination values.</li>
				<li>This Object should have one or more properties that the original Object also have.
					The properties from the original Object will then be tweened to the given values.
				</li>
			</ul>
		</li>

		<li><a name="tween.time" href="#tween.time" class="selflink">time</a> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The time in seconds for the change from the current value to the destination value
					(0.5 seconds by default).
				</li>
				<li>Instead of using a fixed time for the change it is possible to define
					the maximum moving distance for the value and a time for that distance <i>(not supported when tweening multiple variables)</i>.
					This allows to use a short time for a short distance and long time for a long distance.<br>
					This can be done by using the distance function (non JS API only):<br>
					<ul>
						<li><b>distance(maxdistance,maxtime)</b><br>
							<ul>
								<li>maxdistance - the maximum distance between the start and the destination value</li>
								<li>maxtime - the time in seconds for this maximum distance</li>
							</ul>
						</li>
					</ul>
				</li>
			</ul>
		</li>

		<li><b>tweentype</b> <span class="smallcomment">(optionally)</span> / <b>type</b> <span class="smallcomment">(Object API)</span>
			<ul>
				<li>The tweening / interpolation type (easeOutQuad by default).</li>
				<li>See here for all available tween types: <a href="#tweentypes">tweentypes</a>.</li>
				<li>Can also be an Object with individual tweentypes per property (Javascript API).</li>
			</ul>
		</li>

		<li><b>ondone</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The action commands that should be executed when the tween is done and the destination value has been reached.</li>
				<li>Instead of normal actions, it is also possible to use the special keyword <b>WAIT</b> here. 
					In this case the user interface and the execution of the following actions will be
					blocked until the destination value has been reached.
					The <a href="#oninterrupt">oninterrupt</a> action can be used to make this action interruptable by the user.</i>
				</li>
			</ul>
		</li>
		
		<li><b>onupdate</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>These action will be called every time (=every frame!) when the value will be updated / changed!</li>
			</ul>
		</li>

	</ul>

	<br>
	<i>Some information about the origin of the name "tween" - <a href="http://en.wikipedia.org/wiki/Tweening" target="_blank">Wikipedia about Tweening</a>.</i>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('tweenexamples');"><div class="ico_example"></div> Examples</div>
		<div id="tweenexamples" class="xmlexamplecontent">
			<pre>tween(scale,2);</pre>
			<pre>tween(rotate,90);</pre>
			<pre>tween(width,50%);</pre>
			<pre>onover="tween(alpha,0.7,distance(0.3,0.2));"
onout="tween(alpha,1.0,distance(0.3,0.2));"</pre>
			<pre>set(alpha,0);
set(visible,true);
tween(alpha, 1.0 ,0.3);</pre>
			<pre>tween(layer[logo].width, get(destwidth));</pre>
			<pre>set(layer[image].enabled,false);
tween(layer[image].alpha,0.0,0.5,default,removeplugin(image));</pre>
			<pre>set(view.stereographic,true);
tween(view.vlookat, 90.0, 2.0);				
tween(view.fisheye, 1.0, 2.0);
tween(view.fov, 150.0, 2.0);</pre>
<pre>tween(image.prealign, '0|90|0');</pre>
<br>
Object API Examples:
<pre>tween(view, tx=0, ty=0, tz=0, time=1.0, type=smooth);</pre>
<pre>tween(view, ath=(hotspot[test].ath), atv=(hotspot[test].atv));</pre>
<pre>tween(hotspot[test], ath=(this.ath+360), type=linear);</pre>
<pre>tween(layer[test], width=(this.width LT 100 ? 100 : 50));</pre>
<br>
Javascript Examples:
<pre>krpano.tween(krpano.view, {tx:0, ty:0, tz:0}, 1.0, "linear");</pre>
<pre>var layer = krpano.addlayer();<br>...<br>krpano.tween(layer, {y:0, height:"50%"});</pre>
<pre>var obj = {a:0.0, b:"50%", color:0xFF0000};<br>krpano.tween(obj, {a:1.0, c:"100%", color:0x0000FF});</pre>
<pre>var obj = {x:0.0};<br>krpano.tween(obj, {x:1.0}, 10.0, "default", null, function()
{
  // callback for each step/change
  console.log(obj.x);
});</pre>
<pre>krpano.tween(video,
    {width:0, height:0}, 
    0.5,
    {width:"linear", height:"easeoutexpo"}
);</pre>
		</div>
	</div>

</div>
</div>




<div class="xmlnodedesc">
<a name="stoptween" class="docu_anchor"></a>
<pre><a href="#stoptween" class="selflink">stoptween(variable, <span class="optargs">...</span>)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre>krpano.<a href="#stoptween" class="selflink">stoptween(object, vars)</a></pre>
<div class="xmlnodetext">
	The <b>stoptween</b> action stops a currently running tween action.<br>
	<br>
	Parameters (Action):<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The name of the variable which is currently tweening and should be stopped.</li>
			</ul>
		</li>
		<li><b>... variable, variable, ...</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Addtional variables that should stop tweening.</li>
			</ul>
		</li>
	</ul>
	
	Parameters (Javascript API):<br>
	<ul>
		<li><b>object</b>
			<ul>
				<li>The Object whose tweening properties should be stopped.</li>
			</ul>
		</li>
		<li><b>vars</b>
			<ul>
				<li>A list of variable/property-names.</li>
				<li>Can by either a Javascript Array with Strings,</li>
				<li>or a String with names separated by ',' or '|',</li>
				<li>or an Object with properties (with any values),</li>
				<li>or the String <span class="pre">*</span> to stop all 
					tween animations related to this Object.
				</li>
			</ul>
		</li>
	</ul>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('stoptweenexamples');"><div class="ico_example"></div> Examples</div>
		<div id="stoptweenexamples" class="xmlexamplecontent">
			<pre>ondown="tween(layer[text].y, 10, distance(400,0.7), linear);"
onup="stoptween(layer[text].y);"</pre>
		</div>
	</div>
	
</div>
</div>




<div class="xmlnodedesc">
	<a name="tweentypes" class="docu_anchor"></a>
	<pre><a href="#tweentypes" class="selflink">tweentypes</a></pre>
<div class="xmlnodetext">
	All available tween types for the <a href="#tween">tween</a> action:<br>
	<br>
	Notes:
	<ul>
		<li>The default tween type is <span class="pre">easeoutquad</span>.</li>
		<li>All <span class="pre">easeinout*</span> types have one optional arguments to control the crossing between the in and out functions (0.0 to 1.0, 0.5 by default).</li>
		<li>These tween types also have optional arguments:
			<ul>
				<li><span class="pre">step(steps)</span></li>
				<li><span class="pre">power(exponent,crosspoint)</span></li>
			</ul>
		</li>
	</ul>

	<div style="padding-top:8px;">
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px 0px;"></div>linear</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px 0px;"></div>smooth</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px 0px;"></div>smoother</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px 0px;"></div>step(8)</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -92px;"></div>easeinsine</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -92px;"></div>easeoutsine</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -92px;"></div>easeinquad</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -92px;"></div><u>easeoutquad</u></div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -184px;"></div>easeincubic</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -184px;"></div>easeoutcubic</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -184px;"></div>easeinquart</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -184px;"></div>easeoutquart</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -276px;"></div>easeinquint</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -276px;"></div>easeoutquint</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -276px;"></div>easeinexpo</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -276px;"></div>easeoutexpo</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -368px;"></div>easeincirc</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -368px;"></div>easeoutcirc</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -368px;"></div>easeinback</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -368px;"></div>easeoutback</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -460px;"></div>easeinbounce</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -460px;"></div>easeoutbounce</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -460px;"></div>easeinoutsine</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -460px;"></div>easeinoutquad</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -552px;"></div>easeinoutcubic</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -552px;"></div>easeinoutquart</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -552px;"></div>easeinoutquint</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -552px;"></div>easeinoutexpo</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:0px -644px;"></div>easeinoutcirc</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-134px -644px;"></div>easeinoutback</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-268px -644px;"></div>easeinoutbounce</div>
		<div class="tweentypebox"><div class="tweentypeimg" style="background-image:url('./images/tweentypes.png');background-position:-402px -644px;"></div>power(2.1,0.1)</div>
	</div>
</div>
</div>




<div class="xmlnodedesc">
<a name="set3dtransition" class="docu_anchor"></a>
<pre style="white-space:pre-wrap;"><a href="#set3dtransition" class="selflink">set3dtransition(ref, dx,dy,dz, <span class="optargs">mblur, hlookatoffset, delay, time, tweentype</span>)</a></pre>
<pre style="white-space:pre-wrap;"><a href="#set3dtransition" class="selflink">set3dtransition(ref, h,v,d, <span class="optargs">mblur, hlookatoffset, delay, time, tweentype</span>)</a></pre>
<div class="xmlnodetext">
	Setup a <a href="examples.html#3dtransitions">3D-transition</a> between panos.<br>
	<ul>
		<li>A movement in 3D space with optional motion-blurring.</li>
		<li>Need to be called before a <a href="#loadpano">loadpano/loadscene/load...</a> call.</li>
		<li>Works for normal 'non-3D' panos and for <a href="xml.html#depthmap">Depthmapped / 3D-Model</a> panos.</li>
		<li>The 3D transition will start automatically once the new pano is loaded and ready.</li>
		<li>When set and during the 3D transition is running, the <a href="#have3dtransition">have3dtransition</a> variable will be true.</li>
	</ul>
	<br>
	Parameters:<br>
	<ul>
		<li><b>ref</b> and <b>dx</b>, <b>dy</b>, <b>dz</b> or <b>h</b>, <b>v</b>, <b>d</b>
			<ul>
				<li>The reference for the given 3D coordinates:</li>
				<li><span class="pre">ref="image"</span> (default)
					<ul>
						<li>For panos <u>without</u> Depthmapping or a 3D-Model the dx, dy, dz values are defining the 3D moving direction.
							The length of the 3D direction vector defines the zooming distance and should be typically between 500 and 1000.
						</li>
						<li>For panos <u>with</u> Depthmapping or a 3D-Model the dx, dy, dz values are a relative offset to the <a href="xml.html#image.ox">image 3D position</a> of the next pano.</li>
					</ul>
				</li>
				<li><span class="pre">ref="world"</span>
					<ul>
						<li>The dx, dy, dz values are defining an absolute 3D world position.</li>
						<li>Only for Depthmapped / 3D-Model panos.</li>
					</ul>
				</li>
				<li><span class="pre">ref="sphere"</span>
					<ul>
						<li>The h, v, d values are defining a spherical position as direction and a distance (1000.0 by default) for zooming.</li>
						<li>Only for panos <u>without</u> Depthmapping or a 3D-Model.</li>
					</ul>
				</li>
			</ul>
		</li>
		<li><b>mblur</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Strengh of the motion blur effect: 0.0 to 0.9.</li>
				<li>The default is <span class="pre">0.5</span>.</li>
			</ul>
		</li>
		<li><b>hlookatoffset</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>An optional offset for the horizontal looking direction (<a href="xml.html#view.hlookat">view.hlookat</a>).</li>
				<li>Can be used when the panos are not aligned together (different Norths).</li>
				<li>The default is <span class="pre">0.0</span>.</li>
			</ul>
		</li>
		<li><b>delay</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>An optional delay in seconds before starting with the 3D-transition.</li>
				<li>By default or when set to <span class="pre">0.0</span>, the 3D-transition starts together with the pano-blending.</li>
			</ul>
		</li>
		<li><b>time</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>An optional duration time in seconds for the 3D-transition.</li>
				<li>By default or when set to <span class="pre">0.0</span>, the time will be automatically the same that will be set in the <a href="#loadpano.blend" class="pre selflink2">BLEND(blendtime)</a> parameter.</li>
			</ul>
		</li>
		<li><b>tweentype</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The <a href="#tweentypes">tweening / interpolation type</a> for the 3D-transition movement.</li>
				<li>The default is <span class="pre">easeOutQuad</span>.</li>
			</ul>
		</li>
	</ul>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('set3dtransitionexamples');"><div class="ico_example"></div> Examples</div>
		<div id="set3dtransitionexamples" class="xmlexamplecontent">
			<pre>&lt;hotspot ... onclick="scene3dtransition('scene2');" /&gt;

&lt;action name="scene3dtransition" scope="local" args="newscene"&gt;
    set3dtransition("sphere", caller.ath,0);
    loadscene(get(newscene), null, MERGE, BLEND(0.5) );
&lt;/action&gt;
</pre>
		</div>
	</div>
	
</div>
</div>





<div class="xmlnodedesc">
<a name="loadpano" class="docu_anchor"></a>
<a name="loadscene" class="docu_anchor"></a>
<a name="loadpanoscene" class="docu_anchor"></a>
<a name="loadpanoimage" class="docu_anchor"></a>
<a name="loadxml" class="docu_anchor"></a>
<pre><a href="#loadpano" class="selflink">loadpano(xmlpath, <span class="optargs">vars, flags, blend, loaddone, loaderror</span>)</a></pre>
<pre><a href="#loadscene" class="selflink">loadscene(scenename, <span class="optargs">vars, flags, blend, loaddone</span>)</a></pre>
<pre style="white-space:pre-wrap;"><a href="#loadpanoscene" class="selflink">loadpanoscene(xmlpath, scenename, <span class="optargs">vars, flags, blend, loaddone, loaderror</span>)</a></pre>
<pre><a href="#loadpanoimage" class="selflink">loadpanoimage(<span class="optargs">flags, blend, loaddone</span>)</a></pre>
<pre><a href="#loadxml"   class="selflink">loadxml(xmlstring, <span class="optargs">vars, flags, blend, loaddone, loaderror</span>)</a></pre>
<div class="xmlnodetext">
	Actions to load a new panos:<br>
	<ul>
		<li><a href="#loadpano">loadpano</a> - load a xml file.</li>
		<li><a href="#loadscene">loadscene</a> - load a <a href="xml.html#scene" class="selflink">&lt;scene&gt;</a>.</li>
		<li><a href="#loadpanoscene">loadpanoscene</a> - load a <a href="xml.html#scene" class="selflink">&lt;scene&gt;</a> from another xml file.</li>
		<li><a href="#loadpanoimage">loadpanoimage</a> - load the currently defined <a href="xml.html#image" class="selflink">&lt;image&gt;</a> element.<br>
			Need to be used together with <a href="#image.reset">image.reset()</a>.
		</li>
		<li><a href="#loadxml">loadxml</a> - load a xml string.</li>
	</ul>
	<div class="ico_nextlink"></div> <a href="#loadpanoexamples" onclick="toggleexample('loadpanoexamples',true);" class="selflink2">Examples</a><br>
		
	<br>
	<i>Note - only the layer, plugin, hotspot and event elements with <a href="xml.html#layer.keep">keep</a>="true" 
	will be kept when loading new panos!
	</i><br>
	<br>
	Parameters:<br>
	<ul>
		<li class="uldd2"><b>xmlpath</b> <span class="smallcomment">(for loadpano)</span>
			<ul>
				<li>The path/url of the new pano xml file to be loaded (use <b>null</b> for none).</li>
				<li>When a relative path will be used then the file will be loaded from the 
					<a href="xml.html#krpano.basedir">basedir</a> folder, which is %FIRSTXML% by default.
					That means that the paths in all loadpano calls are relative to the first loaded xml file.
				</li>
			</ul>
		</li>
		
		<li class="uldd2"><b>xmlstring</b> <span class="smallcomment">(for loadxml)</span>
			<ul>
				<li>The content of a xml file as string / text to be loaded (should be escaped).</li>
			</ul>
		</li>
		
		<li class="uldd2"><b>scenename</b> <span class="smallcomment">(for loadscene)</span>
			<ul>
				<li>The name of the <a href="xml.html#scene" class="selflink">&lt;scene&gt;</a> element that should to be loaded.</li>
			</ul>
		</li>
		
		<li class="uldd2"><a name="loadpano.vars" href="#loadpano.vars" class="selflink">vars</a> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Custom variables to set (use null for none).</li>
				<li>These variables will be set <u>after</u> parsing / resolving the xml but before starting to load the pano images.
					This way these variables can be used either to overwrite settings from the xml or to set addtional ones.
				</li>
				<li>Variables can be defined as <span class="presyntax_inline">var1=val1</span> pairs separated by <span class="presyntax_inline">&amp;amp;</span>.
				</li>
			</ul>
		</li>
		
		<li class="uldd2"><a name="loadpano.flags" href="#loadpano.flags" class="selflink">flags</a> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Addtional flags for loading (use null for none).</li>
				<li>Several flags can be combined by a <span class="presyntax_inline">|</span> character.</li>
				<li>Available flags:
					<ul>
						<li><a name="loadpano.flags.MERGE" href="#loadpano.flags.MERGE" class="pre selflink2">MERGE</a> <span class="smallcomment">(the recommended flag)</span><br>
							<ul>
								<li>Merges all settings from the current and the next pano.</li>
								<li>If there are layers, plugins or hotspots in the new panorama with the same <a href="xml.html#name-notes">name</a> as the <a href="xml.html#layer.keep">kept</a> ones, the new elements will not be loaded.</li>
								<li>This is the recommended setting for virtual tours.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.PRELOAD" href="#loadpano.flags.PRELOAD" class="pre selflink2">PRELOAD</a>
							<ul>
								<li>Preload the full resolution of the next pano for the current viewing range before blending to it.</li>
								<li>Without that flag the blending will start as soon ANY content (e.g. the preview-pano, low-res tiles, ...) has fully filled the view.</li>
								<li>Without PRELOAD flag the switching from one pano to the next pano can be much faster,
									so this flag should be only used in certain cases.
								</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPIMAGE" href="#loadpano.flags.KEEPIMAGE" class="pre selflink2">KEEPIMAGE</a>
							<ul>
								<li>Keep the current pano-image.</li>
								<li>Ignores the <a href="xml.html?#image" class="selflink">&lt;image&gt;</a> element from the next pano.
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPVIEW" href="#loadpano.flags.KEEPVIEW" class="pre selflink2">KEEPVIEW</a>
							<ul>
								<li>Keep the current view settings.</li>
								<li>Except the viewing range limitations as they are more related to the pano image.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPMOVING" href="#loadpano.flags.KEEPMOVING" class="pre selflink2">KEEPMOVING</a>
							<ul>
								<li>Keep the current view and allow moving during the blending.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPLIMITS" href="#loadpano.flags.KEEPLIMITS" class="pre selflink2">KEEPLIMITS</a>
							<ul>
								<li>Keep the current view limitations.</li>
								<li>Without that flag, the current viewing limits will be reset when loading a new pano.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPLOOKAT" href="#loadpano.flags.KEEPLOOKAT" class="pre selflink2">KEEPLOOKAT</a>
							<ul>
								<li>Keep the current looking direction (<a href="xml.html#view.hlookat">hlookat</a>, <a href="xml.html#view.vlookat">vlookat</a>, <a href="xml.html#view.camroll">camroll</a>).</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEP3D" href="#loadpano.flags.KEEP3D" class="pre selflink2">KEEP3D</a>
							<ul>
								<li>Keep the current 3D position (<a href="xml.html#view.tx">tx, ty, tz</a>).</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPSCENES" href="#loadpano.flags.KEEPSCENES" class="pre selflink2">KEEPSCENES</a>
							<ul>
								<li>Keep the current scenes (loadpano only).</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPPLUGINS" href="#loadpano.flags.KEEPPLUGINS" class="pre selflink2">KEEPPLUGINS</a>
							<ul>
								<li>Keep the current loaded layers / plugins.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.KEEPHOTSPOTS" href="#loadpano.flags.KEEPHOTSPOTS" class="pre selflink2">KEEPHOTSPOTS</a>
							<ul>
								<li>Keep the current loaded hotspots.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.NOPREVIEW" href="#loadpano.flags.NOPREVIEW" class="pre selflink2">NOPREVIEW</a>
							<ul>
								<li>Skip / ignore the <a href="xml.html?#preview" class="selflink">&lt;preview&gt;</a> element of the new pano.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.REMOVESCENES" href="#loadpano.flags.REMOVESCENES" class="pre selflink2">REMOVESCENES</a>
							<ul>
								<li>Remove all current scenes.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.ONLYSCENES" href="#loadpano.flags.ONLYSCENES" class="pre selflink2">ONLYSCENES</a>
							<ul>
								<li>Load only the <a href="xml.html#scene" class="selflink">&lt;scene&gt;</a> elements from the xml, 
									all other xml elements will be skipped.
								</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.IGNOREKEEP" href="#loadpano.flags.IGNOREKEEP" class="pre selflink2">IGNOREKEEP</a>
							<ul>
								<li>Ignore the <a href="xml.html?#layer.keep" class="selflink">keep="true"</a> setting and remove also these elements.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.IMAGEONLY" href="#loadpano.flags.IMAGEONLY" class="pre selflink2">IMAGEONLY</a>
							<ul>
								<li>Load only the pano-image (and the preview).</li>
								<li>Can not be used with the loadpanoscene() action.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.IMAGEANDVIEW" href="#loadpano.flags.IMAGEANDVIEW" class="pre selflink2">IMAGEANDVIEW</a>
							<ul>
								<li>Load only the pano-image (and the preview) and the <a href="xml.html#view">view</a> settings.</li>
								<li>Can not be used with the loadpanoscene() action.</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.NOAUTORUN" href="#loadpano.flags.NOAUTORUN" class="pre selflink2">NOAUTORUN</a>
							<ul>
								<li>Do not automatically run <a href="xml.html#action" class="selflink">&lt;action&gt;</a> elements with <a href="xml.html#action.autorun">autorun="onstart"</a>.</li>
								<li>Note - <a href="xml.html#action" class="selflink">&lt;action&gt;</a> elements with <a href="xml.html#action.autorun">autorun="preinit"</a> will be always called!</li>
							</ul>
						</li>
						<li><a name="loadpano.flags.RESET" href="#loadpano.flags.RESET" class="pre selflink2">RESET</a>
							<ul>
								<li>Resets the krpano viewer before loading the new pano.</li>
								<li>Removes all current layers, hotspots, actions, events and tween-animations/timers, even when defined with keep=true.</li>
								<li>Set everything back to default except:
									custom created variables and
									the current <a href="xml.html#area">area</a>,
									
									<a href="xml.html#network">network</a>,
									<a href="xml.html#memory">memory</a> and
									<a href="xml.html#security">security</a> settings.
								</li>
							</ul>
						</li>
					</ul>
				</li>
			</ul>
		</li>
		
		<li class="uldd2"><a name="loadpano.blend" href="#loadpano.blend" class="selflink">blend</a> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Blend / Crossfade to next pano image / Transition Animation</li>
				<li>Available blending modes:<br>
			
				<pre><a name="loadpano.NOBLEND" href="#loadpano.NOBLEND" class="selflink2">NOBLEND</a></pre>
				<div class="preinfo">
					No blending, just switch directly to the next panorama (the default).
				</div>
				<br>
				
				<pre><a name="loadpano.BLEND" href="#loadpano.BLEND" class="selflink2">BLEND(time, tweentype)</a></pre>
				<div class="preinfo">
					Blend / Crossfade from current panorama to next one.<br>
					<i>This is also the fallback mode when the selected mode is not supported!</i><br>
					<br>
					Parameters:
					<ul>
						<li><b>time</b> - The blending time in seconds (default=2.0).</li>
						<li><b>tweentype</b> - The blending curve / motion shape, type of the blending animation (default=easeInCubic) - see <a href="#tweentypes">tweentypes</a>.</li>
					</ul>
				</div>
				<br>
				
				<pre><span class="readonly" style="float:right;">(WebGL only)</span><a name="loadpano.COLORBLEND" href="#loadpano.COLORBLEND" class="selflink2">COLORBLEND(time, color, tweentype)</a></pre>
				<div class="preinfo">
					Blend to a color and then from that color to the next panorama.<br>
					<br>
					Parameters:
					<ul>
						<li><b>time</b> - The blending time in seconds (default=2.0).</li>
						<li><b>color</b> - The in-between color in hex format (default=0x000000 = black).</li>
						<li><b>tweentype</b> - The blending curve / motion shape, type of the blending animation (default=easeOutSine) - see <a href="#tweentypes">tweentypes</a>.</li>
					</ul>
				</div>
				<br>
				
				<pre><span class="readonly" style="float:right;">(WebGL only)</span><a name="loadpano.LIGHTBLEND" href="#loadpano.LIGHTBLEND" class="selflink2">LIGHTBLEND(time, color, colorscale, tweentype)</a></pre>
				<div class="preinfo">
					Add or subtract a color and then cross-fade to the next panorama.<br>
					<br>
					Parameters:
					<ul>
						<li><b>time</b> - The blending time in seconds (default=2.0).</li>
						<li><b>color</b> - The color to add in hex format (default=0xFFFFFF = white).</li>
						<li><b>colorscale</b> - The scaling factor of the color, use negative values for subtracting (default=2.0).</li>
						<li><b>tweentype</b> - The blending curve / motion shape, type of the blending animation (default=easeInCubic) - see <a href="#tweentypes">tweentypes</a>.</li>
					</ul>
				</div>
				<br>
				
				<pre><span class="readonly" style="float:right;">(WebGL only)</span><a name="loadpano.SLIDEBLEND" href="#loadpano.SLIDEBLEND" class="selflink2">SLIDEBLEND(time, angle, smooth, tweentype)</a></pre>
				<div class="preinfo">
					A slide animation between the current and the next panorama.<br>
					
					<br>
					Parameters:
					<ul>
						<li><b>time</b> - The blending time in seconds (default=2.0).</li>
						<li><b>angle</b> - The angle / direction of the slide in degrees (default=0.0).</li>
						<li><b>smooth</b> - The smoothing / blurring of the transition line (0.0 to 1.0, default=0.2).</li>
						<li><b>tweentype</b> - The blending curve / motion shape, type of the blending animation (default=linear) - see <a href="#tweentypes">tweentypes</a>.</li>
					</ul>
				</div>
				<br>
				
				<pre><span class="readonly" style="float:right;">(WebGL only)</span><a name="loadpano.OPENBLEND" href="#loadpano.OPENBLEND" class="selflink2">OPENBLEND(time, shape, smooth, zoom, tweentype)</a></pre>
				<div class="preinfo">
					An opening animation between the current and the next panorama.<br>
					
					<br>
					Parameters:
					<ul>
						<li><b>time</b> - The blending time in seconds (default=2.0).</li>
						<li><b>shape</b> - A factor that defines the opening shape (-1.0 to +1.0) - 0.0=circle opening, -1.0=vertical opening, +1.0=horizontal opening (default=0.0).</li>
						<li><b>smooth</b> - The smoothing / blurring of the transition line (0.0 to 1.0, default=0.2).</li>
						<li><b>zoom</b> - Additionally zoom-out the old panorama (0.0 to 1.0, default=0.0).</li>
						<li><b>tweentype</b> - The blending curve / motion shape, type of the blending animation (default=linear) - see <a href="#tweentypes">tweentypes</a>.</li>
					</ul>
				</div>
				<br>
				
				<pre><span class="readonly" style="float:right;">(WebGL only)</span><a name="loadpano.ZOOMBLEND" href="#loadpano.ZOOMBLEND" class="selflink2">ZOOMBLEND(time, zoom, tweentype)<br>ZOOMBLEND(time, zoom, x, y, tweentype)</a></pre>
				<div class="preinfo">
					Zoom into the current view and cross-fade to the next panorama.<br>
					<br>
					Parameters:
					<ul>
						<li><b>time</b> - The blending time in seconds (default=2.0).</li>
						<li><b>zoom</b> - The zoom factor (default=2.0).</li>
						<li><b>x, y</b> - The zoom center (0.0 to 1.0, default=0.5).</li>
						<li><b>tweentype</b> - The blending curve / motion shape, type of the blending animation (default=easeInOutSine) - see <a href="#tweentypes">tweentypes</a>.</li>
					</ul>
				</div>
				<br>
				DEMO: <a href="examples.html#blending-demo">Pano Blending Demo</a><br>
				<br>
				<i>
					Note: There can be cases where the selected blending mode is not supported - for example, 
					when using a <a href="embedpano.html#bgcolor">transparent</a> background (the default for <a href="xml.html#layer.krpanobgcolor">krpano layers</a>)
					or when <a href="embedpano.html#webgl">WebGL</a> is not available (CSS3D only).
					In such cases, the <span class="pre">BLEND()</span> mode will be used automatically as a fallback.
				</i><br>

				</li>
			</ul>
		</li>
		
		<li class="uldd2"><b>loaddone</b> <span class="smallcomment">(optionally)</span> 
			<ul>
				<li>Actions code or a Javascript function to call when the loading is done.</li>
			</ul>
		</li>
		<li><b>loaderror</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Actions code or a Javascript function to call when the loading failed.</li>
				<li>When not set or set to null, the error will be either handled by the <a href="xml.html#events.onxmlerror">onxmlerror</a> event
					or show a fatal-error message.
				</li>
			</ul>
		</li>
	</ul>
	
	<div name="loadpanoexamples" class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('loadpanoexamples');"><div class="ico_example"></div> Examples</div>
		<div id="loadpanoexamples" class="xmlexamplecontent">
			
			<div style="padding-top:6px;">
				<a href="#loadpano" class="selflink2">loadpano</a>
				<div class="presyntax">
					loadpano(pano2.xml);<br>
					loadpano(pano2.xml, null, MERGE, BLEND(1));<br>
				</div>
			</div>
			
			<div style="padding-top:6px;">
				<a href="#loadscene" class="selflink2">loadscene</a>
				<div class="presyntax">
					loadscene(scene1);<br>
					loadscene(scene1, null, MERGE, BLEND(1));<br>
				</div>
			</div>
			
			<div style="padding-top:6px;">
				<a href="#loadxml" class="selflink2">loadxml</a>
				<div class="presyntax">
					loadxml('<small>&lt;krpano&gt;&lt;image&gt;&lt;sphere url="pano.jpg"/&gt;&lt;/image&gt;&lt;/krpano&gt;</small>');<br>
					loadxml(get(data[xml].content), null, KEEPALL);
				</div>
			</div>
			
			<div style="padding-top:6px;">
				<a href="#loadpanoimage" class="selflink2">loadpanoimage</a> (Action Code)
				<div class="presyntax">
					image.reset();<br>
					set(image.sphere.url, 'pano.jpg');<br>
					set(image.hfov, 100);<br>
					loadpanoimage();<br>
				</div>
			</div>
			
			
			<div style="padding-top:6px;">
				<a href="#loadpanoimage" class="selflink2">loadpanoimage</a> (Javascript Code)
				<div class="presyntax">
					krpano.image.reset();<br>
					krpano.image.flat = {<br>
					&nbsp;&nbsp;url : "tile_%l_%v_%h.jpg",<br>
					&nbsp;&nbsp;multires : "512,1024x512,2048x1024,4096x2048"<br>
					};<br>
					krpano.actions.loadpanoimage('MERGE','BLEND(0.5)',function()<br>
					{<br>
					&nbsp;&nbsp;console.log('load call done');<br>
					});<br>
				</div>
			</div>
			
		</div>
	</div>
	
</div>
</div>





<div class="xmlnodedesc">
<a name="reloadpano" class="docu_anchor"></a>
<pre><a href="#reloadpano" class="selflink">reloadpano(<span class="optargs">blend, flags</span>)</a></pre>

<div class="xmlnodetext">
	Reload the current pano image.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>blend</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Optional <a href="#loadpano.blend">loadpano blending</a> settings.</li>
				<li>The default is <a href="#loadpano.blend.NOBLEND" class="pre selflink2">NOBLEND</a>.</li>
			</ul>
		</li>
		<li><b>flags</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Additional <a href="#loadpano.flags">loadpano flags</a>.</li>
				<li>Flags that could be used here: 
					<a href="#loadpano.flags.PRELOAD" class="pre selflink2">PRELOAD</a>,
					<a href="#loadpano.flags.KEEPMOVING" class="pre selflink2">KEEPMOVING</a> and 
					<a href="#loadpano.flags.NOPREVIEW" class="pre selflink2">NOPREVIEW</a>.
				</li>
			</ul>
		</li>
	</ul>
</div>
</div>




<div class="xmlnodedesc">
<a name="image.reset" class="docu_anchor"></a>
<pre><a href="#image.reset" class="selflink">image.reset(<span class="optargs">options</span>)</a></pre>

<div class="xmlnodetext">
	Resets the <a href="xml.html#image" class="selflink">&lt;image&gt;</a> element back to default.<br>
	<br>
	Should be used before a <a href="#loadpanoimage">loadpanoimage()</a> call to create an new image object.
	When the image object is already used for rendering a pano, then calling loadpanoimage() will fail with an error.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>options</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>When <b>options</b> is set to <span class="pre">copy</span> then all basic settings from 
					the current <a href="xml.html#image" class="selflink">&lt;image&gt;</a> element are copied to the new one.
				</li>
			</ul>
		</li>
	</ul>
</div>
</div>




<div class="xmlnodedesc">
<a name="includexml" class="docu_anchor"></a>
<a name="includexmlstring" class="docu_anchor"></a>
<pre><a href="#includexml" class="selflink">includexml(url, <span class="optargs">loaddone</span>, <span class="optargs">loaderror</span>, <span class="optargs">autorunactions</span>)</a></pre>
<pre><a href="#includexmlstring" class="selflink">includexmlstring(string, <span class="optargs">loaddone</span>, <span class="optargs">loaderror</span>, <span class="optargs">autorunactions</span>)</a></pre>

<div class="xmlnodetext">
	Dynamically load and add xml content.<br>
	<br>
	This will not change any current elements or trigger any events.<br>
	Only <a href="xml.html#action" class="selflink">&lt;actions&gt;</a> with <a href="xml.html#action.autorun">autorun="preinit"</a> will get called.<br>
	If the xml contains <a href="xml.html#image" class="selflink">&lt;image&gt;</a> elements, then they will be skipped.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>url</b>
			<ul>
				<li>The url of the xml file to load and include.</li>
			</ul>
		</li>
		<li><b>string</b>
			<ul>
				<li>The xml code to include as string.</li>
				
			</ul>
		</li>
		<li><b>loaddone</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Actions code or a Javascript function to call when the loading is done.</li>
			</ul>
		</li>
		<li><b>loaderror</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Actions code or a Javascript function to call when the loading failed.</li>
				<li>When not set or set to null, the error will be either handled by the <a href="xml.html#events.onxmlerror">onxmlerror</a> event
					or show a fatal-error message.
				</li>
			</ul>
		</li>
		<li><b>autorunactions</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Automatically run <a href="xml.html#action" class="selflink">&lt;action&gt;</a> elements with <a href="xml.html#action.autorun">autorun="onstart"</a>.</li>
				<li>The default is true, use false to disable the automatic action running.</li>
				<li>Note - <a href="xml.html#action" class="selflink">&lt;action&gt;</a> elements with <a href="xml.html#action.autorun">autorun="preinit"</a> will be always called!</li>
			</ul>
		</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="loadjs" class="docu_anchor"></a>
<pre><a href="#loadjs" class="selflink">loadjs(url, <span class="optargs">loaddone, loaderror</span>)</a></pre>

<div class="xmlnodetext">
	Dynamically load and execute Javascript code.<br>
	<br>
	The Javascript code will run within the krpano context and have direct access to all krpano objects and variables 
	(same as in <a href="xml.html#action.js">type="Javascript"</a> <a href="xml.html#action.js" class="selflink">&lt;actions&gt;</a> elements).<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>url</b>
			<ul>
				<li>The url of the js file to load and execute.</li>
				<li>Different to Javascript files loaded directly by the browser (using &lt;script&gt; in the HTML code), these js files can be encrypted using the krpano tools.</li>
				<li>Optionally it is also possible to load several js files at once.
					For this the urls need to be separated by a pipe <span class="presyntax_inline">|</span> character.
					The file loading will be done in parallel but the resulting Javascript code execution will be 
					done when all files are loaded and in the same order as the files were requested.
					Example:<br>
					<pre>loadjs('file1.js|file2.js|file3.js');</pre>
					When called directly from Javascript it is also possible to pass the files as Array:
					<pre>krpano.actions.loadjs(['file1.js','file2.js','file3.js']);</pre>
				</li>
			</ul>
		</li>
		<li><b>loaddone</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Actions code or a Javascript function to call when the loading is done.</li>
			</ul>
		</li>
		<li><b>loaderror</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Actions code or a Javascript function to call when the loading failed.</li>
				<li>When not set or set to null, the error will be either handled by the <a href="xml.html#events.onxmlerror">onxmlerror</a> event
					or show a fatal-error message.
				</li>
			</ul>
		</li>
	</ul>
</div>
</div>










<div class="xmlnodedesc">
<a name="openurl" class="docu_anchor"></a>
<pre><a href="#openurl" class="selflink">openurl(url, <span class="optargs">target</span>)</a></pre>
<div class="xmlnodetext">
	Open an url / link.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>url</b>
			<ul>
				<li>The url to open.</li>
			</ul>
		</li>
		<li><b>target</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The target where the url should be opened.</li>
				<li>Possible settings:
					<ul>
						<li><b>_blank</b> - open the url in a new window (the default)</li>
						<li><b>_self</b> - open the url in the current frame in the current window</li>
						<li><b>_parent</b> - open the url in the parent of the current frame</li>
						<li><b>_top</b> - open the url in the top-level frame in the current window</li>
					</ul>
				</li>
			</ul>
		</li>
	</ul>
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('openurlexamples');"><div class="ico_example"></div> Examples</div>
		<div id="openurlexamples" class="xmlexamplecontent">
			<pre>openurl('https://krpano.com',_self);</pre>
			<pre>openurl('help.html');</pre>
		</div>
	</div>
</div>
</div>





<div class="xmlnodedesc">
<a name="lookat" class="docu_anchor"></a>
<a name="lookat3d" class="docu_anchor"></a>
<pre><a href="#lookat" class="selflink">lookat(h, v, <span class="optargs">fov, distortion, architectural, pannini</span>)</a></pre>
<pre><a href="#lookat3d" class="selflink">lookat3d(x, y, z, <span class="optargs">fov, distortion, architectural, pannini</span>)</a></pre>
<div class="xmlnodetext">
	Look at this panorama position.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>h</b> / <b>v</b> <span class="smallcomment">(lookat)</span>
			<ul>
				<li>The horizontal and vertical looking direction (<a href="xml.html#view.hlookat">view.hlookat</a> / <a href="xml.html#view.vlookat">view.vlookat</a>)
					in spherical coordinates in degrees (-180 to +180 and -90 to +90).
				</li>
			</ul>
		</li>
		<li><b>x</b> / <b>y</b> / <b>z</b> <span class="smallcomment">(lookat3d)</span>
			<ul>
				<li>The 3D-position to look at from the current 3D-position.
				</li>
			</ul>
		</li>
		<li><b>fov</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The field of view (<a href="xml.html#view.fov">view.fov</a>) in degrees (0 - 179).</li>
			</ul>
		</li>
		<li><b>distortion</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The fisheye distortion setting (<a href="xml.html#view.distortion">view.distortion</a>).</li>
			</ul>
		</li>
		<li><b>architectural</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The architectural projection setting (<a href="xml.html#view.architectural">view.architectural</a>).</li>
			</ul>
		</li>
		<li><b>pannini</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The pannini projection setting (<a href="xml.html#view.pannini">view.pannini</a>).</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('lookatexamples');"><div class="ico_example"></div> Examples</div>
		<div id="lookatexamples" class="xmlexamplecontent">
			<pre>lookat(0,0);</pre>
			<pre>lookat(0,0,90);</pre>
			<pre>loadpano(pano.xml);
lookat(45.1, -20.2, 110.0);</pre>
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="lookto" class="docu_anchor"></a>
<a name="lookto3d" class="docu_anchor"></a>
<a name="looktohotspot" class="docu_anchor"></a>
<a name="moveto" class="docu_anchor"></a>
<a name="zoomto" class="docu_anchor"></a>
<pre style="white-space:pre-wrap;"><a href="#lookto" class="selflink">lookto(h, v, <span class="optargs">fov, motiontype, shortestway, nonblocking, ondone</span>)</a></pre>
<pre style="white-space:pre-wrap;"><a href="#lookto3d" class="selflink">lookto3d(x, y, z, <span class="optargs">fov, motiontype, shortestway, nonblocking, ondone</span>)</a></pre>
<pre><a href="#looktohotspot" class="selflink">looktohotspot(hotspotname, <span class="optargs">fov, motiontype, shortestway</span>)</a></pre>
<pre><a href="#moveto" class="selflink">moveto(h, v, <span class="optargs">motiontype</span>)</a></pre>
<pre><a href="#zoomto" class="selflink">zoomto(fov, <span class="optargs">motiontype</span>)</a></pre>
<div class="xmlnodetext">
	Move the view from current looking position to the given position.<br>
	<br>
	<i>Note - the user-interface and all following actions are blocked during the movement (except the <b>nonblocking</b> parameter of the lookto call is true).
	That means the next action will be only executed when the current lookto action has been finished.<br>
	To allow the user to interrupt the movement and the blocked user interface and to take control again, the <a href="#oninterrupt">oninterrupt()</a> action can be used.
	</i>
	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>h</b> / <b>v</b> <span class="smallcomment">(lookto, moveto)</span>
			<ul>
				<li>The horizontal and vertical looking direction (<a href="xml.html#view.hlookat">view.hlookat</a> / <a href="xml.html#view.vlookat">view.vlookat</a>)
					in spherical coordinates in degrees (-180 to +180, wraparound possible and -90 to +90).
				</li>
			</ul>
		</li>
		<li><b>x</b> / <b>y</b> / <b>z</b> <span class="smallcomment">(lookto3d)</span>
			<ul>
				<li>The 3D-position to look to from the current 3D-position.
				</li>
			</ul>
		</li>
		
		<li><b>hotspotname</b> <span class="smallcomment">(for looktohotspot, optionally)</span>
			<ul>
				<li>The name of the hotspot.</li>
				<li>This will be use the hotspot position (ath/atv) as destination position.</li>
				<li>When no name will be defined and looktohotspot() will be called from a hotspot element then
					that hotspot itself will be used.
				</li>
			</ul>
		</li>
		<li><b>fov</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The destination fov (0 to 179).</li>
				<li>The <b>looktohotspot</b> action will use automatically the size of the hotspot as destination fov
					when the fov was not set. The other actions keep the current fov when not set.<br>
				</li>
			</ul>
		</li>
		<li><b>motiontype</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The type of the motion.</li>
				<li>Possible settings:
					<ul>
						<li><b>linear(speed)</b> - a linear motion
							<ul>
								<li>speed = moving speed in degrees/second<br></li>
							</ul>
						</li>
						<li><b>smooth(accel,break,maxspeed)</b> - accelerated smooth movement (=default)
							<ul>
								<li>accel    = acceleration in degrees/second² (default=720)</li>
								<li>break    = negative acceleration in degrees/second² (default=-720)</li>
								<li>maxspeed = maximum moving speed in degrees/second (default=720)</li>
							</ul>
						</li>
						<li><b>tween(tweentype,time)</b> - tween animation curve
							<ul>
								<li>tweentype = one of the <a href="#tweentypes">tween types</a></li>
								<li>time      = time in seconds for the movement</li>
							</ul>
						</li>
					</ul>
				</li>
			</ul>
		</li>
		<li><b>shortestway</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The use the shortest possible way from the current to the destination position.</li>
				<li>Possible settings: <b>true</b> or <b>false</b> (default=true).</li>
			</ul>
		</li>
		<li><b>nonblocking</b> <span class="smallcomment">(optionally, lookto only)</span>
			<ul>
				<li>When set to true, then the lookto action will not wait for completing the movement
					before continue executing the the following actions. The user-interface will also be not blocked.
				</li>
				<li>When the lookto movement is done then the <b>ondone</b> action will be called (when defined).</li>
				<li>To stop/interrupt a lookto animation, the <a href="#stoplookto">stoplookto()</a> action can be anytime called.</li>
			</ul>
		</li>
		<li><b>ondone</b> <span class="smallcomment">(optionally, lookto only, only when nonblocking is true)</span>
			<ul>
				<li>This action will be called when the <b>nonblocking</b> lookto movement is done.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('looktoexamples');"><div class="ico_example"></div> Examples</div>
		<div id="looktoexamples" class="xmlexamplecontent">
			<pre>moveto(100.0,5,linear(10));</pre>
			<pre>zoomto(130,smooth());</pre>
			<pre>lookto(33,-22,30,smooth(100,50,20));</pre>
			<pre>looktohotspot(hotspot1);</pre>
			<pre>looktohotspot(hotspot2, 40);</pre>
			<pre>looktohotspot(hotspot3, 25, smooth(100,50,20));</pre>
			<pre>looktohotspot(get(name));</pre>
		</div>
	</div>

</div>
</div>







<div class="xmlnodedesc">
<a name="adjusthlookat" class="docu_anchor"></a>
<pre><a href="#adjusthlookat" class="selflink">adjusthlookat(desthlookat)</a></pre>
<div class="xmlnodetext">
	Adjusts the <a href="xml.html#view.hlookat">view.hlookat</a> value for manual tweening.<br>
    It fixes the 360 wrap around for the shortest way to <b>desthlookat</b>.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>desthlookat</b>
			<ul>
				<li>The intended destination hlookat value.</li>
				<li>When <b>desthlookat</b> is the name of a variable, then automatically the value of that variable will be used.</li>
				<li>The current <a href="xml.html#view.hlookat">view.hlookat</a> variable will be adjusted
					(without changing the current view) to be next to this value.
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('adjusthlookatexamples');"><div class="ico_example"></div> Examples</div>
		<div id="adjusthlookatexamples" class="xmlexamplecontent">
			<pre>adjusthlookat(140);
tween(view.hlookat, 140);</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="adjust360" class="docu_anchor"></a>
<pre><a href="#adjust360" class="selflink">adjust360(source_ath, target_ath)</a></pre>
<div class="xmlnodetext">
	Adjusts the <b>source_ath</b> variable to be shortest 360-horizontal-around way to <b>target_ath</b> variable.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>source_ath</b>
			<ul>
				<li>The source/start ath value.</li>
				<li><b>source_ath</b> needs to be the name of a variable.</li>
			</ul>
		</li>
		<li><b>target_ath</b>
			<ul>
				<li>The intended target/destination ath value.</li>
				<li>When <b>desthlookat</b> is the name of a variable, then automatically the value of that variable will be used.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('adjust360examples');"><div class="ico_example"></div> Examples</div>
		<div id="adjust360examples" class="xmlexamplecontent">
			Move a hotspot to the current horizontal viewing position:
			<pre>adjust360(hotspot[test].ath, view.hlookat);
tween(hotspot[test].ath, get(view.hlookat), 1.0);</pre>
		</div>
	</div>

</div>
</div>



<div class="xmlnodedesc">
<a name="getlooktodistance" class="docu_anchor"></a>
<pre><a href="#getlooktodistance" class="selflink">getlooktodistance(result, toH, toV, <span class="optargs">fromH, fromV</span>)</a></pre>
<div class="xmlnodetext">
	Get the spherical distance between the <b>fromH</b> / <b>fromV</b> and <b>toH</b> / <b>toV</b> lookto points (in degrees).
	The result will be always between 0.0 and 180.0 (more than 180 degree distance is not possible on a sphere).<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>result</b>
			<ul>
				<li>The name of the variable where the distance value will be stored.</li>
				<li>The variable will be created when it doesn't exists.</li>
				<li>When calling this function directly by Javascript, the result parameter can be null, the result will be returned as Javascript return value in this case.</li>
			</ul>
		</li>
		
		<li><b>toH</b>
			<ul>
				<li>Horizontal looking-to position (-180 to +180, wraparound possible).</li>
				<li>Can be a variable name or a value.</li>
			</ul>
		</li>
		
		<li><b>toV</b>
			<ul>
				<li>Vertical looking-to position (-90 to +90).</li>
				<li>Can be a variable name or a value.</li>
			</ul>
		</li>
		
		<li><b>fromH</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Horizontal looking-from position (-180 to +180, wraparound possible).</li>
				<li>Can be a variable name or a value.</li>
				<li>When not defined, the current horizontal looking direction (<a href="xml.html#view.hlookat">view.hlookat</a>) will be used by default.</li>
			</ul>
		</li>
		
		<li><b>fromV</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>Vertical looking-from position (-90 to +90).</li>
				<li>Can be a variable name or a value.</li>
				<li>When not defined, the current vertical looking direction (<a href="xml.html#view.vlookat">view.vlookat</a>) will be used by default.</li>
			</ul>
		</li>
	</ul>

	

</div>
</div>






<div class="xmlnodedesc">
<a name="stoplookto" class="docu_anchor"></a>
<pre><a href="#stoplookto" class="selflink">stoplookto()</a></pre>
<div class="xmlnodetext">
	Stop a <a href="#lookto">lookto()</a>  action.<br>
</div>
</div>




<div class="xmlnodedesc">
<a name="stopmovements" class="docu_anchor"></a>
<pre><a href="#stopmovements" class="selflink">stopmovements()</a></pre>
<div class="xmlnodetext">
	Instantly stop all user-driven (by mouse, keyboard or touch) panning and zooming movements.<br>
</div>
</div>





<div class="xmlnodedesc">
<a name="wait" class="docu_anchor"></a>
<pre><a href="#wait" class="selflink">wait(parameter)</a></pre>
<div class="xmlnodetext">
	Wait a number of seconds or wait for an event.<br>
	<br>
	<i>Note - The user interface and all following actions will be blocked during the waiting. That means 
	the next action in the current call will be executed when the current wait action is done. The <a href="#oninterrupt">oninterrupt</a>
	action can be used to make this action interruptable by the user.</i>
	<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>parameter</b><br>
			<ul>
				<li><b>any number</b> - this the time the action will wait in seconds</li>
				<li><b>LOAD</b> - wait until loading is finished</li>
				<li><b>BLEND</b> - wait until loading and blending are finished</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('waitexamples');"><div class="ico_example"></div> Examples</div>
		<div id="waitexamples" class="xmlexamplecontent">
			<pre>oninterrupt(break);
lookto(150,30,70);
wait(3);
lookto(242,0,150);
lookto(280,-10,50);
wait(3);</pre>	
			<pre>loadpano(pano2.xml,null,MERGE,BLEND(2));
lookat(100,50,5);
wait(BLEND);
lookto(100,50,150);</pre>
		</div>
	</div>

</div>
</div>













<div class="xmlnodedesc">
<a name="oninterrupt" class="docu_anchor"></a>
<pre><a href="#oninterrupt" class="selflink">oninterrupt(actions)</a></pre>
<div class="xmlnodetext">
	This action can be used before calling actions that are blocking the user interface (like 
	<a href="#wait">wait</a>,
	<a href="#lookto">lookto</a>,
	<a href="#looktohotspot">looktohotspot</a>,
	<a href="#moveto">moveto</a>,
	<a href="#zoomto">zoomto</a>
	or <a href="#tween">tween</a> with WAIT as ondone).<br>
	When any of these actions will get interrupted by the user (e.g. by a click) then the these
	actions will be stopped and the given <b>actions</b> be called.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>actions</b><br>
			<ul>
				<li>The action commands to call on a user interrupt.</li>
				<li>Addtionally there is a special command possible here:<br>
				<b>break</b> - this will just break the current actions.
				</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('oninterruptexamples');"><div class="ico_example"></div> Examples</div>
		<div id="oninterruptexamples" class="xmlexamplecontent">
			<pre>oninterrupt(break);
lookto(150,30,70);
wait(3);
lookto(242,0,150);
lookto(280,-10,50);
wait(3);</pre>
			<pre>oninterrupt( trace(user interrupt); );
lookto(0,0,90);			
lookto(90,0,90);
lookto(180,0,90);
lookto(270,0,90);
lookto(0,0,90);</pre>
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="screentosphere" class="docu_anchor"></a>
<a name="spheretoscreen" class="docu_anchor"></a>
<pre><a href="#screentosphere" class="selflink">screentosphere(x,y, h,v)</a></pre>
<pre><a href="#spheretoscreen" class="selflink">spheretoscreen(h,v, x,y, <span class="optargs">stereoside</span>)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#screentosphere" class="selflink">p = krpano.actions.screentosphere(x,y)</a></pre>
<pre><a href="#spheretoscreen" class="selflink">p = krpano.actions.spheretoscreen(h,v, <span class="optargs">stereoside</span>)</a></pre>

<div class="xmlnodetext">
	Actions for converting between screen and spherical coordinates.<br>
	<br>
	The <b>screentosphere</b> action will convert the <b>x/y</b> variables to the <b>h/v</b> variables and
	the <b>spheretoscreen</b> action the <b>h/v</b> variables to the <b>x/y</b> variables.<br>
	<br>
	Parameters:
	<ul>
		<li><b>x</b> / <b>y</b> - Screen coordinates in pixels from the left top edge.</li>
		<li><b>h</b> / <b>v</b> - Spherical coordinates in degrees.</li>
		<li><b>stereoside</b> <span class="smallcomment">(optionally)</span>
			<ul>
				For stereo rendering - define to which screen side the coordinates should be mapped.
				Possible settings: <span class="presyntax_inline">l</span> for the left side or <span class="presyntax_inline">r</span>
				for right side or not-set/undefined for normal non-stereo screen coordinates.
			</ul>
		</li>
	</ul>
	Javascript Return:
	<ul>
		<li><b>p</b> - An object with x, y properties.</li>
	</ul>
	Spheretoscreen Notes:
	<ul>
		<li>When the given spherical coordinates can't be converted to screen coordinates, e.g. when 'behind' the screen, 
			then the resulting values will be <a href="#expr.isnan">NaN</a> (Not-a-Number). The Javascript call will return null in this case.
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('screentosphereexamples');"><div class="ico_example"></div> Examples</div>
		<div id="screentosphereexamples" class="xmlexamplecontent">
			<pre>screentosphere(mouse.x, mouse.y, toh, tov);</pre>
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="screentolayer" class="docu_anchor"></a>
<a name="layertoscreen" class="docu_anchor"></a>
<pre><a href="#screentolayer" class="selflink">screentolayer(layer, screenx,screeny, layerx,layery)</a></pre>
<pre><a href="#layertoscreen" class="selflink">layertoscreen(layer, layerx,layery, screenx,screeny)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#screentolayer" class="selflink">p = krpano.actions.screentolayer(layer, screenx,screeny)</a></pre>
<pre><a href="#layertoscreen" class="selflink">p = krpano.actions.layertoscreen(layer, layerx,layery)</a></pre>
<div class="xmlnodetext">
	Actions for converting between screen/stage and relative <a href="xml.html#layer" class="selflink">&lt;layer&gt;</a> coordinates.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>layer</b> - The <a href="xml.html#layer.name">name</a> of the <a href="xml.html#layer" class="selflink">&lt;layer&gt;</a> element or the <a href="xml.html#layer" class="selflink">&lt;layer&gt;</a> element itself.</li>
		<li><b>screenx</b> / <b>screenx</b> - Screen/stage coordinates in pixels from the left top edge.</li>
		<li><b>layerx</b> / <b>layery</b> - Layer coordinates from the left top layer edge.</li>
	</ul>
	Javascript Return:
	<ul>
		<li><b>p</b> - An object with x, y properties.</li>
	</ul>
	Notes:<br>
	<ul>
		<li>The screen /stage coordinates are based on the krpano coordinate system (from left-top 0 / 0 to right-bottom <a href="#stagewidth">stagewidth</a> / <a href="#stageheight">stageheight</a>).</li>
		<li>The layer coordinates will be scaled when <a href="xml.html#layer.scalechildren">scalechildren</a> is enabled.</li>
		<li>Rotated layers are not supported!</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('screentolayerexamples');"><div class="ico_example"></div> Examples</div>
		<div id="screentolayerexamples" class="xmlexamplecontent">
			<pre>screentolayer(bar, mouse.stagex,mouse.stagey, lx,ly);<br>div(fill, lx, layer[bar].pixelwidth);<br>mul(fill, 100);<br>clamp(fill, 0, 100);<br>txtadd(layer[barfill].width, get(fill), '%');</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="spheretospace" class="docu_anchor"></a>
<a name="spacetosphere" class="docu_anchor"></a>
<pre><a href="#spheretospace" class="selflink">spheretospace(h,v,depth, x,y,z)</a></pre>
<pre><a href="#spacetosphere" class="selflink">spacetosphere(x,y,z, h,v,depth)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#spheretospace" class="selflink">p = krpano.actions.spheretospace(h,v,depth)</a></pre>
<pre><a href="#spacetosphere" class="selflink">p = krpano.actions.spacetosphere(x,y,z)</a></pre>
<div class="xmlnodetext">
	Actions for converting between spherical and XYZ 3D space coordinates.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>h</b> / <b>v</b> - Spherical coordinates in degrees.</li>
		<li><b>depth</b> - Distance from spherical center (1000.0 by default).</li>
		<li><b>x</b> / <b>y</b> / <b>z</b> - 3D space coordinates.</li>
	</ul>
	Javascript Return:
	<ul>
		<li>spheretospace: <b>p</b> - An object with <b>x</b>, <b>y</b>, <b>z</b> properties.</li>
		<li>spacetosphere: <b>p</b> - An object with <b>h</b>, <b>v</b>, <b>depth</b> properties.</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('spheretospaceexamples');"><div class="ico_example"></div> Examples</div>
		<div id="spheretospaceexamples" class="xmlexamplecontent">
			Convert the hotspot position from spherical to space coordinates:
			<pre>spheretospace(ath,atv,depth, tx,ty,tz);<br>set(ath,0);<br>set(atv,0);<br>set(depth,0);</pre>
			and back:
			<pre>spacetosphere(tx,ty,tz, ath,atv,depth);<br>set(tx,0);<br>set(ty,0);<br>set(tz,0);</pre>
		</div>
	</div>

</div>
</div>












<div class="xmlnodedesc">
<a name="remapfovtype" class="docu_anchor"></a>
<pre><a href="#remapfovtype" class="selflink">remapfovtype(fov, srcfovtype, dstfovtype, <span class="optargs">width, height</span>)</a></pre>
<div class="xmlnodetext">
	Remap a fov value from one <a href="xml.html#view.fovtype">fovtype</a> to another.<br>
	<br>
	When changing the viewing fovtype and at the same time, remapping the viewing fov,
	then the resulting pano zoom will keep the same.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>fov</b>
			<ul>
				<li>A variable with the fov value that should be changed.</li>
				<li>The result will be stored in the same variable.</li>
			</ul>
		</li>
		<li><b>srcfovtype</b>
			<ul>
				<li>The current <a href="xml.html#view.fovtype">fovtype</a>.</li>
				<li>Can be: HFOV, VFOV, DFOV or MFOV.</li>
			</ul>
		</li>
		<li><b>dstfovtype</b>
			<ul>
				<li>The new <a href="xml.html#view.fovtype">fovtype</a>.</li>
				<li>Can be: HFOV, VFOV, DFOV or MFOV.</li>
			</ul>
		</li>
		
		<li><b>width</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The width of the fov area/frame in pixels.</li>
				<li>By default the current screen/area size will be used.</li>
			</ul>
		</li>
		
		<li><b>height</b> <span class="smallcomment">(optionally)</span>
			<ul>
				<li>The height of the fov area/frame in pixels.</li>
				<li>By default the current screen/area size will be used.</li>
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('remapfovtypeexamples');"><div class="ico_example"></div> Examples</div>
		<div id="remapfovtypeexamples" class="xmlexamplecontent">
			<pre>set(view.fovtype, HFOV);
set(view.fov, 90);
...
set(view.fovtype, VFOV);
remapfovtype(view.fov, HFOV, VFOV);</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="screentodepth" class="docu_anchor"></a>
<a name="raycastdepth" class="docu_anchor"></a>
<a name="screenraycast" class="docu_anchor"></a>
<a name="cursorraycast" class="docu_anchor"></a>
<a name="raycast" class="docu_anchor"></a>
<pre><a href="#screenraycast" class="selflink">hit = screenraycast(sx,sy)</a></pre>
<pre><a href="#cursorraycast" class="selflink">hit = cursorraycast()</a></pre>
<pre><a href="#raycast" class="selflink">hit = raycast(x,y,z, dx,dy,dz)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#screenraycast" class="selflink">hit = krpano.screenraycast(sx,sy)</a></pre>
<pre><a href="#cursorraycast" class="selflink">hit = krpano.cursorraycast()</a></pre>
<pre><a href="#raycast" class="selflink">hit = krpano.raycast(x,y,z, dx,dy,dz)</a></pre>
<div class="xmlnodetext">
	Get 3D information from the <a href="xml.html#depthmap">Depthmap / 3D-Model</a> 
	(only if the <a href="xml.html#depthmap.hittest">hittest</a> setting is enabled)
	or from Hotspots (also only with <a href="xml.html#hotspot.hittest">hittest</a> enabled).<br>
	<br>
	This work by raycasting, that means finding the hit/intersection-point between a ray and the depthmap / 3D-Model surface or a hotspot.<br>
	<br>
	There different functions available:
	<ul>
		<li><a href="#screenraycast">screenraycast</a> - raycast from any 2D-point on the screen.</li>
		<li><a href="#cursorraycast">cursorraycast</a> - raycast from the current mouse-cursor position.
			This works also for VR by automatically using the currently active VR controller.
		</li>
		<li><a href="#raycast">raycast</a> - raycast from any point in 3D-space into any direction.</li>
	</ul>
	<br>
	Parameters:<br>
	<ul>
		<li><b>sx</b> / <b>sy</b> <span class="smallcomment">(screenraycast)</span>
			<ul>
				<li>Screen coordinates in pixels from the left top edge.</li>
			</ul>
		</li>
		
		<li><b>x</b> / <b>y</b> / <b>z</b> <span class="smallcomment">(raycast)</span>
			<ul>
				<li>World-space 3D origin coordinates of the ray.</li>
				<li>For using the current viewing position use <a href="xml.html#view.tx">view.tx, view.ty, view.tz</a>.</li>
				
			</ul>
		</li>
		
		<li><b>dx</b> / <b>dy</b> / <b>dz</b> <span class="smallcomment">(raycast)</span>
			<ul>
				<li>3D direction vector of the ray.</li>
				<li>For using the current viewing direction use <a href="xml.html#view.dir">view.dir.x, view.dir.y, view.dir.z</a>.</li>
			</ul>
		</li>
		
		<li><b>hit</b>
			<ul>
				<li>An object with several properties about the result.</li>
				<li>When there is no depth/3d-information at the requested point, it will be null.</li>
				<li>Properties:
					<ul>
						<li>d - distance/depth from the screen to the point.</li>
						<li>x,y,z - the worldspace x,y,z 3D coordinates of the hit-point (in cm).</li>
						<li>nx,ny,nz - the normal vector of the hit-surface.</li>
						<li>rx,ry,rz - rotation angles (in degrees) that match the hit-surface (in "zxy" <a href="xml.html#hotspot.rotationorder">rotation-order</a> - note: that's not the default one for hotspots).</li>
						<li>hs - a hotspot object (only when a hotspot with <a href="#hotspot.hittest">hittest=true</a> will be hit).</li>
					</ul>
				</li>
				<li>Note - the performance and accuracy of the results depends on the the <a href="xml.html#depthmap.hittestmode">depthmap.hittestmode</a> settings.</li>
				
			</ul>
		</li>
	</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('screenraycastexamples');"><div class="ico_example"></div> Examples</div>
		<div id="screenraycastexamples" class="xmlexamplecontent">
			Get the distance to the next wall/surface in front of the viewer:
			<pre>
hit = raycast(view.tx, view.ty, view.tz, view.dir.x, view.dir.y, view.dir.z);
if(hit,
  trace('distance to wall:', hit.d, 'cm');
);
</pre>
			Place a hotspot on the surface of a Depthmap / 3D-Model:
			<pre>
hit = screenraycast(mouse.x, mouse.y);
if(hit,
  copy(hs.tx, hit.x);
  copy(hs.ty, hit.y);
  copy(hs.tz, hit.z);
  copy(hs.rx, hit.rx);
  copy(hs.ry, hit.ry);
  copy(hs.rz, hit.rz);
);
</pre>
		</div>
	</div>

</div>
</div>







<div class="xmlnodedesc">
<a name="showtext" class="docu_anchor"></a>
<pre><a href="#showtext" class="selflink">showtext(text, <span class="optargs">textstyle</span>)</a></pre>
<div class="xmlnodetext">
	
	
	<i class="html5only">
		Deprecated - use the new and extended <a href="plugins/showtext.html#top" class="html5only">showtext.xml</a> plugin instead!<br>
	</i>
	
	

</div>
</div>







<div class="xmlnodedesc">
<a name="updateobject" class="docu_anchor"></a>
<pre><a href="#updateobject" class="selflink">updateobject()</a></pre>
<div class="xmlnodetext">
	Updates / rebuilds the internal 3D model of the pano object.<br>
	<br>
	This must be called when dynamically changing of the <a href="xml.html#image.hfov">image.hfov</a>, <a href="xml.html#image.vfov">image.vfov</a> or
	<a href="xml.html#image.voffset">image.voffset</a> settings.<br>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('updateobjectexamples');"><div class="ico_example"></div> Examples</div>
		<div id="updateobjectexamples" class="xmlexamplecontent">
			<pre>set(image.hfov,1);
updateobject();</pre>
		</div>
	</div>

</div>
</div>







<div class="xmlnodedesc">
<a name="updatescreen" class="docu_anchor"></a>
<a name="invalidatescreen" class="docu_anchor"></a>
<pre><a href="#invalidatescreen" class="selflink">invalidatescreen()</a></pre>
<div class="xmlnodetext">
	<ul>
		<li>Request a redraw.</li>
		<li>Can be used when changing settings that don't cause a redraw by its own.</li>
		
	</ul>
</div>
</div>






<div class="xmlnodedesc">
<a name="addlayer" class="docu_anchor"></a>
<a name="addplugin" class="docu_anchor"></a>
<a name="addhotspot" class="docu_anchor"></a>

<pre><a href="#addlayer"     class="selflink">addlayer(name, <span class="optargs">varname</span>)</a></pre>
<pre><a href="#addplugin"    class="selflink">addplugin(name, <span class="optargs">varname</span>)</a></pre>
<pre><a href="#addhotspot"   class="selflink">addhotspot(name, <span class="optargs">varname, renderer</span>)</a></pre>
<span class="jsactionapi">Javascript API:</span>
<pre><a href="#addlayer"     class="selflink">layer = krpano.addlayer(name)</a></pre>
<pre><a href="#addplugin"    class="selflink">plugin = krpano.addplugin(name)</a></pre>
<pre><a href="#addhotspot"   class="selflink">hotspot = krpano.addhotspot(name, <span class="optargs">renderer</span>)</a></pre>

<div class="xmlnodetext">
	Dynamically create and add a new 
	<a href="xml.html#layer">layer</a>, 
	<a href="xml.html#plugin">plugin</a> or
	<a href="xml.html#hotspot">hotspot</a> element.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>name</b>
			<ul>
				<li>Name of the new layer/plugin or hotspot element.</li>
				<li>When no name is given or <span class="pre">auto</span> is used as name, then an automatic-generated name will be used.</li>
				<li>When there is already an element with the given name, no new element will be created, instead the current one will be returned.</li>
			</ul>
		</li>
		
		<li><b>varname</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>Create a variable with the given name linked to the new added element.</li>
			</ul>
		</li>
		
		<li><b>renderer</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>Set the hotspot <a href="#hotspot.renderer">renderer</a> setting directly on creation.</li>
				<li>This can avoid the temporary unnecessary and creation of a HTML element (for CSS3D-hotspots) when actually a WebGL-hotspot is desired.</li>
			</ul>
		</li>
		
	</ul>
	Javascript Return:
	<ul>
		<li>The new added element.</li>
	</ul>
	Notes:
	<ul>
		<li>Layers and plugins are the same, just different names.</li>
	</ul>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('addpluginexamples');"><div class="ico_example"></div> Examples</div>
		<div id="addpluginexamples" class="xmlexamplecontent">
			<pre>addlayer(button);
set(layer[button].url,button.jpg);
set(layer[button].align,bottom);
set(layer[button].x,10);
set(layer[button].y,20);
set(layer[button].onhover,showtext('hovering the new button'));
set(layer[button].onclick, removelayer(button) );</pre>

			<pre>addhotspot(newspot);
set(hotspot[newspot].url,spot.png);
set(hotspot[newspot].ath,150);
set(hotspot[newspot].atv,30);
set(hotspot[newspot].scale,0.7);
set(hotspot[newspot].zoom,true);
set(hotspot[newspot].onclick, removehotspot(newspot) );</pre>

			<pre>addhotspot(polyspot);
set(hotspot[polyspot].fillalpha, 0.25);
set(hotspot[polyspot].borderalpha, 0.50);
set(hotspot[polyspot].onclick, removehotspot(polyspot) );
set(hotspot[polyspot].point[0].ath,-10);
set(hotspot[polyspot].point[0].atv,-10);
set(hotspot[polyspot].point[1].ath,-10);
set(hotspot[polyspot].point[1].atv,+10);
set(hotspot[polyspot].point[2].ath,+10);
set(hotspot[polyspot].point[2].atv,+10);
set(hotspot[polyspot].point[3].ath,+10);
set(hotspot[polyspot].point[3].atv,-10);</pre>

<pre>addlayer('background_layer', bg);
bg.loadstyle('design1');
set(bg.bgcolor, 0x777777);
</pre>

			
		</div>
	</div>

</div>
</div>






<div class="xmlnodedesc">
<a name="removelayer" class="docu_anchor"></a>
<a name="removeplugin" class="docu_anchor"></a>
<a name="removehotspot" class="docu_anchor"></a>

<pre><a href="#removelayer"     class="selflink">removelayer(name, <span class="optargs">removechildren</span>)</a></pre>
<pre><a href="#removeplugin"    class="selflink">removeplugin(name, <span class="optargs">removechildren</span>)</a></pre>
<pre><a href="#removehotspot"   class="selflink">removehotspot(name)</a></pre>

<span class="jsactionapi">Javascript API:</span>
<pre><a href="#removelayer"     class="selflink">krpano.removelayer(name, <span class="optargs">removechildren</span>)</a></pre>
<pre><a href="#removeplugin"    class="selflink">krpano.removeplugin(name, <span class="optargs">removechildren</span>)</a></pre>
<pre><a href="#removehotspot"   class="selflink">krpano.removehotspot(name)</a></pre>
<div class="xmlnodetext">
	Dynamically remove and destroy a 
	<a href="xml.html#layer">layer</a>, 
	<a href="xml.html#plugin">plugin</a> or
	<a href="xml.html#hotspot">hotspot</a> 
	element.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>name</b>
			<ul>
				<li>Name of the layer/plugin or hotspot element that should be removed.</li>
			</ul>
		</li>
		<li><b>removechildren</b> <span class="smallcomment">(optionally)</span><br>
		<ul>
				<li>When set to true, all children elements will be removed too.</li>
			</ul>
		</li>
	</ul>
	<br>
	Alternatively also the <a href="xml.html#layer.remove">remove()</a> function of the element itself can be used, e.g.:<br>
	<pre><a href="xml.html#layer.remove" class="selflink2">layer[name].remove()</a>
<a href="xml.html#hotspot.remove" class="selflink2">hotspot[name].remove()</a>
</pre>
</div>
</div>






<div class="xmlnodedesc">
<a name="js" class="docu_anchor"></a>
<pre><a href="#js" class="selflink">js( JavascriptFunction(parameters) )</a></pre>
<div class="xmlnodetext">
	Call a Javascript function.<br>
	<br>
	The <b>parameters</b> will be parsed by krpano before calling the Javascript function. Use <a href="#get" class="pre selflink2">get(var)</a> or <a href="#calc" class="pre selflink2">calc(expression)</a> 
	in the parameters to access krpano variables.<br>
	
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('jsexamples');"><div class="ico_example"></div> Examples</div>
		<div id="jsexamples" class="xmlexamplecontent">
			<div style="padding-top:6px;">
				Code in the .html or .js file:
				<pre>function test(p1, p2, p3)
{
  alert(p1 + ": " + p2 + " / " + p3);
}</pre>
			</div>
			<div style="padding-top:6px;">
				Code in the xml file:
				<pre>js( test('Lookat', get(view.hlookat), get(view.vlookat)) );</pre>
			</div>
		</div>
	</div>

</div>
</div>


<div class="xmlnodedesc">
<a name="jscall" class="docu_anchor"></a>
<pre><a href="#jscall" class="selflink">jscall( ...any Javascript code... )</a></pre>
<div class="xmlnodetext">
	Directly call any kind of Javascript code.<br>
	<br>
	Inside the Javascript code these objects are available for a two-way communication:
		<ul>
			<li><b>krpano</b>
				<ul>
					<li>The <a href="js_api.html#krpanointerface">krpano Interface</a> object (allows additionally also direct Javascript access to all whole krpano structure and all functions there).</li>
				</ul>
			</li>
			<li><b>caller</b> - the object of the &lt;layer&gt;, &lt;plugin&gt; or &lt;hotspot&gt; element that has called that action.</li>
		</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('jscallexamples');"><div class="ico_example"></div> Examples</div>
		<div id="jscallexamples" class="xmlexamplecontent">
			<div style="padding-top:6px;">
				Change the style of a HTML element:<br>
				<pre>jscall('document.getElementById("test").style.display="none";');</pre>
			</div>
			<div style="padding-top:6px;">
				Use the <a href="#calc" class="selflink">calc()</a> action to build the Javascript call and pass krpano variables:<br>
				<pre>jscall(calc('console.log("krpano version: ' + version + '")'));</pre>
			</div>
			<div style="padding-top:6px;">
				Go back to the previous webpage:<br>
				<pre>jscall('history.back()');</pre>
			</div>
		</div>
	</div>

</div>
</div>


<div class="xmlnodedesc">
<a name="jsget" class="docu_anchor"></a>
<pre><a href="#jsget" class="selflink">jsget(variable, ...Javascript code... ,<span class="optargs"> noerror</span>)</a></pre>
<div class="xmlnodetext">
	Get the value of a Javascript variable or the return value of a Javascript function.<br>
	<br>
	Inside the Javascript code these objects are available for a two-way communication:
		<ul>
			<li><b>krpano</b>
				<ul>
					<li>The <a href="js_api.html#krpanointerface">krpano Interface</a> object (allows additionally also direct Javascript access to all whole krpano structure and all functions there).</li>
				</ul>
			</li>
			<li><b>caller</b> - the object of the &lt;layer&gt;, &lt;plugin&gt; or &lt;hotspot&gt; element that has called that action.</li>
		</ul>
	<br>
	Parameters:<br>
	<ul>
		<li><b>variable</b>
			<ul>
				<li>The name of krpano variable where the returned value will be stored.</li>
				<li>The variable will be created when it doesn't exist.</li>
			</ul>
		</li>
		<li><b>Javascript code</b>
			<ul>
				<li>The Javascript code to call.</li>
			</ul>
		</li>
		<li><b>noerror</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li>When set to true, no error will be rerported on errors and undefined be returned.</li>
			</ul>
		</li>
	</ul>
	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('jsgetexamples');"><div class="ico_example"></div> Examples</div>
		<div id="jsgetexamples" class="xmlexamplecontent">
			<div style="padding-top:6px;">
				Get the address of the current webpage:<br>
				<pre>jsget(ret, 'location.href');<br>trace('location=', get(ret));</pre>
			</div>
			<div style="padding-top:6px;">
				Let the user enter something:<br>
				<pre>jsget(passwort, 'prompt("Enter Password")');<br>if(password == 'hidden', ...);</pre>
			</div>
			<div style="padding-top:6px;">
				Get the current date in the format YYYY-MM-DD:<br>
				<pre>jsget(date, 'new Date().toISOString().slice(0,10);');<br>trace('date=', get(date));</pre>
			</div>
		</div>
	</div>

</div>
</div>


<div class="xmlnodedesc">
<a name="jscode" class="docu_anchor"></a>
<pre><a href="#jscode" class="selflink">event="js: ...any Javascript code..."</a></pre>
<div class="xmlnodetext">
	Directly call any kind of Javascript code from events (or code defined in variables).<br>
	When a called action code string starts with <span class="pre">js:</span> it will be considered to be Javascript code.<br>
	<br>
	Inside the Javascript code these objects are available for a two-way communication:
		<ul>
			<li><b>krpano</b>
				<ul>
					<li>The <a href="js_api.html#krpanointerface">krpano Interface</a> object (allows additionally also direct Javascript access to all whole krpano structure and all functions there).</li>
				</ul>
			</li>
			<li><b>caller</b> - the object of the &lt;layer&gt;, &lt;plugin&gt; or &lt;hotspot&gt; element that has called that action.</li>
		</ul>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('jscodeexamples');"><div class="ico_example"></div> Examples</div>
		<div id="jscodeexamples" class="xmlexamplecontent">
			<div style="padding-top:6px;">
				<pre>onclick="js:alert(caller.path);"</pre>
				<pre>onclick="js:krpano.actions.lookto(0,0);"</pre>
			</div>
		</div>
	</div>

</div>
</div>



<div class="xmlnodedesc">
<a name="addcssstyles" class="docu_anchor"></a>
<pre><a href="#addcssstyles" class="selflink">addcssstyles(styles)</a></pre>
<div class="xmlnodetext">
	Dynamically add <a href="xml.html#cssstyles">CSS styles</a>.
	<br>
	<br>
	Parameter:<br>
	<ul>
		<li><b>styles</b>
			<ul>
				<li>A string with CSS styles/classes.</li>
			</ul>
		</li>
	</ul>

</div>
</div>





<script>
	var url = location.href;
	if ( url.indexOf("#events.addListener") > 0) location = "js_api.html#events.addListener";
	if ( url.indexOf("#events.removeListener") >= 0) location = "js_api.html#events.removeListener";
</script>




<div class="xmlnodedesc">
<a name="showlog" class="docu_anchor"></a>
<pre><a href="#showlog" class="selflink">showlog(<span class="optargs">state, position</span>)</a></pre>
<div class="xmlnodetext">
	Show or hide the trace output log.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>state</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li><b>true</b> - Show the log window (default).</li>
				<li><b>false</b> - Hide the log window.</li>
				<li><b>toggle</b> - Show or hide the log window depending on the current state.</li>
			</ul>
		</li>
		<li><b>position</b> <span class="smallcomment">(optionally)</span><br>
			<ul>
				<li><b>top</b> -  Show the log at the top of the viewer window.</li>
				<li><b>bottom</b> - Show the log at the bottom of the viewer window (default).</li>
			</ul>
		</li>
	</ul>

</div>
</div>




<div class="xmlnodedesc">
<a name="debugvar" class="docu_anchor"></a>
<pre><a href="#debugvar" class="selflink">debugvar(varname)</a></pre>
<div class="xmlnodetext">
	Show / trace details (value and type) about a variable in the output log.<br>
	When the variable is an object, then also all object properties will be shown.<br>
	<br>
	<i>Notes:
		<ul>
			<li>Debug messages will be only shown when the <a href="xml.html#krpano.debugmode">debugmode</a> setting is enabled.</li>
			<li>Consider enabling the <a href="embedpano.html#consolelog">consolelog</a> setting in the HTML file
				to see these messages also in the browser console.
			</li>
			<li>Doing many traces is affecting the rendering performance!
				Especially avoid constantly tracing messages every frame!
			</li>
		</ul>
	</i>
</div>
</div>





<div class="xmlnodedesc">
<a name="debug" class="docu_anchor"></a>
<a name="trace" class="docu_anchor"></a>
<a name="warning" class="docu_anchor"></a>
<a name="error" class="docu_anchor"></a>
<pre><a href="#debug" class="selflink">debug(<span class="optargs">...</span>)</a></pre>
<pre><a href="#trace" class="selflink">trace(<span class="optargs">...</span>)</a></pre>
<pre><a href="#warning" class="selflink">warning(<span class="optargs">...</span>)</a></pre>
<pre><a href="#error" class="selflink">error(<span class="optargs">...</span>)</a></pre>
<div class="xmlnodetext">
	Traces texts or the content of variables to the output log.<br>
	<br>
	<ul>
		<li>
			<a href="#debug" class="selflink">debug()</a> will trace <span class="presyntax_inline">DEBUG:</span> messages.<br>
			These messages will be only shown when the <a href="xml.html#krpano.debugmode">debugmode</a> setting is enabled.
		</li>
		<li>
			<a href="#trace" class="selflink">trace()</a> will trace <span class="presyntax_inline">INFO:</span> messages.
		</li>
		<li>
			<a href="#warning" class="selflink">warning()</a> will trace <span class="presyntax_inline">WARNING:</span> messages.
		</li>
		<li>
			<a href="#error" class="selflink">error()</a> will trace <span class="presyntax_inline">ERROR:</span> messages and 
			additionally also open the log (only when <a href="xml.html#krpano.showerrors">showerrors</a> is enabled).
		</li>
	</ul>
	
	<br>
	Parameters:<br>
	<ul>
		<li><b>...</b>
			<ul>
				<li>Any text or variable.</li>
				<li>When passing a variable, then that variable will be automatically resolved to its value.</li>
			</ul>
		</li>
		<li>Special parameter values:
			<ul>
				<li><pre>[HTML] ...</pre>
					When the text starts with [HTML] then the following text can be HTML-code, but
					where the <span class="presyntax_inline">&lt;</span> and <span class="presyntax_inline">&gt;</span> characters need
					to be replaced with <span class="presyntax_inline">[</span> and <span class="presyntax_inline">]</span>.
				</li>
				
				<li><pre>[OW] ...</pre>
					The line will be 'overwriteable' - that means the next trace will overwrite / replace that line.
				</li>
				
				<li><pre>[CLEARLOG]</pre>
					Clears the log.
				</li>
				
				<li><pre>[MAXLINES=NN]</pre>
					Defines the maximum lines to log, the default is 200.
				</li>
			</ul>
		</li>
	</ul>
	<br>
	
	<i>Notes:
		<ul>
			<li>Debug messages will be only shown when the <a href="xml.html#krpano.debugmode">debugmode</a> setting is enabled.</li>
			<li>Consider enabling the <a href="embedpano.html#consolelog">consolelog</a> setting in the HTML file
				to see these messages also in the browser console.
			</li>
			<li>Doing many traces is affecting the rendering performance!
				Especially avoid constantly tracing messages every frame!
			</li>
		</ul>
	</i>

	<div class="xmlexample">
		<div class="xmlexamplebutton" onclick="toggleexample('traceexamples');"><div class="ico_example"></div> Examples</div>
		<div id="traceexamples" class="xmlexamplecontent">
			<pre>trace('view.maxpixelzoom=', view.maxpixelzoom);</pre>
			<pre>&lt;events onkeydown="trace('keycode=',keycode);" /&gt;</pre>
			<pre>onresize="trace('size=',stagewidth,'x',stageheight);"</pre>
			<pre>onclick="trace('mouse clicked at ', mouse.x, ' / ', mouse.y);"</pre>
			<pre>trace('xyz=',xyz,' get(xyz)=',get(xyz));</pre>
		</div>
	</div>

</div>
</div>





<div class="xmlnodedesc">
<a name="fatalerror" class="docu_anchor"></a>
<pre><a href="#fatalerror" class="selflink">fatalerror(errormessage)</a></pre>
<div class="xmlnodetext">
	Show an error message and stop the user interaction.<br>
	<br>
	Parameters:<br>
	<ul>
		<li><b>errormessage</b>
			<ul>
				<li>The error message to show.</li>
			</ul>
		</li>
	</ul>
</div>
</div>





<div class="xmlnodedesc">
<a name="suppresserrors" class="docu_anchor"></a>
<pre><a href="#suppresserrors" class="selflink">suppresserrors(actions)</a></pre>
<div class="xmlnodetext">
	Call actions where errors and warnings will be suppressed.<br>
	<ul>
		<li>This could be used to temporary hide errors or warnings for certain special cases.</li>
		<li>Only 'direct' errors can be suppressed, but not 'delayed' errors like loading errors.</li>
	</ul>
	<br>
	Parameters:<br>
	<ul>
		<li><b>actions</b>
			<ul>
				<li>Any krpano action code.</li>
			</ul>
		</li>
		
	</ul>
</div>
</div>



<div style="height:100px;"></div>




				</div>
			</div>
		</div>
		<div id="krpano_footerwrapper">
			<div id="krpano_footer">
				<table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="right">Copyright &copy; 2025 krpano.com</td></tr></tbody></table>
			</div>
		</div>
	</div>
</body>
</html>
